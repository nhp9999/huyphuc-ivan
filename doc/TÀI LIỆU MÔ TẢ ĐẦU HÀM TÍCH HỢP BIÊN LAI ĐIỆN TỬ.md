**TÃ€I LIá»†U MÃ” Táº¢ Äáº¦U HÃ€M TÃCH Há»¢P HÃ“A ÄÆ N ÄIá»†N Tá»¬**

| PhiÃªn báº£n tÃ i liá»‡u | 1.0 |
| --- | --- |

Má»¥c Lá»¥c

[1\. QUY Äá»ŠNH VÃ€ CHUáº¨N CHUNG 6](#_Toc106724425)

[1.1. Chuáº©n Ä‘á»‹nh dáº¡ng dá»¯ liá»‡u tráº£ vá» 6](#_Toc106724426)

[1.2. Base64 format 6](#_Toc106724427)

[1.3. Errors 6](#_Toc106724428)

[2\. Danh sÃ¡ch cÃ¡c hÃ m tÃ­ch há»£p 7](#_Toc106724429)

[2.1. NhÃ³m cÃ¡c hÃ m webservice táº¡o láº­p vÃ  phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n (PublishService) 7](#_Toc106724430)

[2.1.1. PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n 7](#_Toc106724431)

[2.1.2. PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n theo sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o 10](#_Toc106724432)

[2.1.3. PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n theo danh sÃ¡ch fkey truyá»n vÃ o 14](#_Toc106724433)

[2.1.4. PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n theo khoáº£ng thá»i gian (publishdate) 16](#_Toc106724434)

[2.1.5. Láº¥y giÃ¡ trá»‹ Hash cho phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n token ( bÆ°á»›c 1) 17](#_Toc106724435)

[2.1.6. PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n sá»­ dá»¥ng token (bÆ°á»›c 2) 19](#_Toc106724436)

[2.1.7. Thay tháº¿, Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n sá»­ dá»¥ng token 21](#_Toc106724437)

[2.1.8. ThÃªm má»›i hÃ³a Ä‘Æ¡n theo máº«u sá»‘, kÃ½ hiá»‡u 23](#_Toc106724438)

[2.1.9. Cáº­p nháº­t dá»¯ liá»‡u khÃ¡ch hÃ ng 27](#_Toc106724439)

[2.1.10. XÃ³a hÃ³a Ä‘Æ¡n chÆ°a phÃ¡t hÃ nh theo danh sÃ¡ch fkey 28](#_Toc106724440)

[2.1.11. ThÃªm má»›i hÃ³a Ä‘Æ¡n 29](#_Toc106724441)

[2.1.12. Gá»­i láº¡i email thÃ´ng bÃ¡o hÃ³a Ä‘Æ¡n phÃ¡t hÃ nh 35](#_Toc106724442)

[2.1.13. Láº¥y thÃ´ng tin chá»©ng thÆ° sá»‘ hiá»‡n táº¡i cá»§a Ä‘Æ¡n vá»‹ 37](#_Toc106724443)

[2.1.14. Cáº­p nháº­t loáº¡i hÃ¬nh kÃ½ sá»‘ vÃ  chá»©ng thÆ° sá»‘ 38](#_Toc106724444)

[2.1.15. XÃ³a chá»©ng thÆ° sá»‘ 39](#_Toc106724445)

[2.1.16. Danh sÃ¡ch chá»©ng thÆ° sá»‘ cá»§a Ä‘Æ¡n vá»‹ 39](#_Toc106724446)

[2.1.17. Thay Ä‘á»•i máº­t kháº©u 40](#_Toc106724447)

[2.2. NhÃ³m cÃ¡c hÃ m webservice liÃªn quan Ä‘áº¿n tra cá»©u hÃ³a Ä‘Æ¡n ( PortalService) 41](#_Toc106724448)

[2.2.1. Download hÃ³a Ä‘Æ¡n 42](#_Toc106724449)

[2.2.2. Download hÃ³a Ä‘Æ¡n vá»›i cáº£ cÃ¡c hÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n 42](#_Toc106724450)

[2.2.3. Download hÃ³a Ä‘Æ¡n theo Fkey 42](#_Toc106724451)

[2.2.4. Download hÃ³a Ä‘Æ¡n theo fkey, khÃ´ng kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n 42](#_Toc106724452)

[2.2.5. Download hÃ³a Ä‘Æ¡n má»›i táº¡o theo Fkey Ä‘á»‹nh dáº¡ng Pdf 42](#_Toc106724453)

[2.2.6. Download hÃ³a Ä‘Æ¡n Ä‘á»‹nh dáº¡ng Pdf 42](#_Toc106724454)

[2.2.7. Download hÃ³a Ä‘Æ¡n Ä‘á»‹nh dáº¡ng Pdf, khÃ´ng kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n 42](#_Toc106724455)

[2.2.8. Láº¥y danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»« sá»‘, Ä‘áº¿n sá»‘ 42](#_Toc106724456)

[2.2.9. TÃ¬m kiáº¿m hÃ³a Ä‘Æ¡n theo khÃ¡ch hÃ ng 42](#_Toc106724457)

[2.2.10. TÃ¬m kiáº¿m hÃ³a Ä‘Æ¡n theo fkey 42](#_Toc106724458)

[2.2.11. Láº¥y thÃ´ng tin chi tiáº¿t hÃ³a Ä‘Æ¡n 42](#_Toc106724459)

[2.2.12. Láº¥y thÃ´ng tin chi tiáº¿t hÃ³a Ä‘Æ¡n, khÃ´ng kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n 42](#_Toc106724460)

[2.2.13. Láº¥y thÃ´ng tin chi tiáº¿t hÃ³a Ä‘Æ¡n theo fkey 42](#_Toc106724461)

[2.2.14. Láº¥y thÃ´ng tin chi tiáº¿t hÃ³a Ä‘Æ¡n táº¡o má»›i theo fkey 42](#_Toc106724462)

[2.2.15. Láº¥y thÃ´ng tin chi tiáº¿t cá»§a hÃ³a Ä‘Æ¡n theo fkey, khÃ´ng kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n 42](#_Toc106724463)

[2.2.16. Chuyá»ƒn Ä‘á»•i hÃ³a Ä‘Æ¡n chá»©ng minh nguá»“n gá»‘c, xuáº¥t xá»© 42](#_Toc106724464)

[2.2.17. Chuyá»ƒn Ä‘á»•i hÃ³a Ä‘Æ¡n chá»©ng minh nguá»“n gá»‘c, xuáº¥t xá»­ theo fkey 42](#_Toc106724465)

[2.2.18. Chuyá»ƒn Ä‘á»•i lÆ°u trá»¯ hÃ³a Ä‘Æ¡n 42](#_Toc106724466)

[2.2.19. Láº¥y thÃ´ng tin khÃ¡ch hÃ ng 42](#_Toc106724467)

[2.2.20. Chuyá»ƒn Ä‘á»•i lÆ°u trá»¯ hÃ³a Ä‘Æ¡n theo Fkey 42](#_Toc106724468)

[2.2.21. Download hÃ³a Ä‘Æ¡n lá»—i gá»­i thuáº¿ theo Fkey 42](#_Toc106724469)

[2.2.22. Download hÃ³a Ä‘Æ¡n lá»—i gá»­i cÆ¡ quan thuáº¿ Ä‘á»‹nh dáº¡ng Pdf theo token 42](#_Toc106724470)

[2.2.23. Download hÃ³a Ä‘Æ¡n lá»—i gá»­i cÆ¡ quan thuáº¿ Ä‘á»‹nh dáº¡ng HTML 42](#_Toc106724471)

[2.2.24. Download hÃ³a Ä‘Æ¡n lá»—i gá»­i thuáº¿ Ä‘á»‹nh dáº¡ng Pdf theo Fkey 42](#_Toc106724472)

[2.2.25. Download hÃ³a Ä‘Æ¡n lá»—i gá»­i cÆ¡ quan thuáº¿ theo invtoken 42](#_Toc106724473)

[2.2.26. Download hÃ³a Ä‘Æ¡n lá»—i gá»­i cÆ¡ quan thuáº¿ vá»›i cáº£ cÃ¡c hÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n theo invtoken 42](#_Toc106724474)

[2.2.27. Download hÃ³a Ä‘Æ¡n lá»—i gá»­i thuáº¿ Ä‘á»‹nh dáº¡ng Pdf, khÃ´ng kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n theo fkey 42](#_Toc106724475)

[2.2.28. Download hÃ³a Ä‘Æ¡n lá»—i gá»­i thuáº¿ Ä‘á»‹nh dáº¡ng Pdf, khÃ´ng kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n theo Token 42](#_Toc106724476)

[2.2.29. Láº¥y danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»« ngÃ y Ä‘áº¿n ngÃ y theo máº«u sá»‘, kÃ½ hiá»‡u 42](#_Toc106724477)

[2.3. NhÃ³m cÃ¡c hÃ m webservice xá»­ lÃ½ hÃ³a Ä‘Æ¡n ( BussinessService) 41](#_Toc106724478)

[2.3.1. Gáº¡ch ná»£ hÃ³a Ä‘Æ¡n theo fkey 42](#_Toc106724479)

[2.3.2. Gáº¡ch ná»£ hÃ³a Ä‘Æ¡n 42](#_Toc106724480)

[2.3.3. Bá» gáº¡ch ná»£ hÃ³a Ä‘Æ¡n theo fkey 42](#_Toc106724481)

[2.3.4. Bá» gáº¡ch ná»£ hÃ³a Ä‘Æ¡n 42](#_Toc106724482)

[2.3.5. Äiá»u chá»‰nh hÃ³a Ä‘Æ¡n 42](#_Toc106724483)

[2.3.6. Äiá»u chá»‰nh hÃ³a Ä‘Æ¡n theo sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o 42](#_Toc106724484)

[2.3.7. Html xem trÆ°á»›c khi Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n 42](#_Toc106724485)

[2.3.8. Há»§y hÃ³a Ä‘Æ¡n theo fkey 42](#_Toc106724486)

[2.3.9. Thay tháº¿ hÃ³a Ä‘Æ¡n 42](#_Toc106724487)

[2.3.10. Thay tháº¿ hÃ³a Ä‘Æ¡n theo sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o 42](#_Toc106724488)

[2.3.11. Html xem trÆ°á»›c khi thay tháº¿ hÃ³a Ä‘Æ¡n 42](#_Toc106724489)

[2.3.12. Há»§y hÃ³a Ä‘Æ¡n theo fkey 42](#_Toc106724490)

[2.3.13. Há»§y hÃ³a Ä‘Æ¡n khÃ´ng check tráº¡ng thÃ¡i thanh toÃ¡n 42](#_Toc106724491)

[2.3.14. Gáº¡ch ná»£ hÃ³a Ä‘Æ¡n theo fkey 42](#_Toc106724492)

[2.3.15. PhÃ¢n phá»‘i hÃ³a Ä‘Æ¡n 42](#_Toc106724493)

[2.3.16. ÄÃ­nh kÃ¨m file báº£ng kÃª cho hÃ³a Ä‘Æ¡n theo sá»‘ hÃ³a Ä‘Æ¡n 42](#_Toc106724494)

[2.3.17. Dowload file báº£ng kÃª cá»§a hÃ³a Ä‘Æ¡n theo Fkey 42](#_Toc106724495)

[2.3.18. Äiá»u chá»‰nh nhiá»u hÃ³a Ä‘Æ¡n 42](#_Toc106724496)

[2.3.19. KhÃ´i phá»¥c hÃ³a Ä‘Æ¡n Ä‘Ã£ há»§y Fkey 42](#_Toc106724497)

[2.3.20. KhÃ´i phá»¥c hÃ³a Ä‘Æ¡n Ä‘Ã£ há»§y Token 42](#_Toc106724498)

[2.3.21. KhÃ´i phá»¥c hÃ³a Ä‘Æ¡n bá»‹ thay tháº¿ báº±ng FKey 42](#_Toc106724499)

[2.3.22. KhÃ´i phá»¥c hÃ³a Ä‘Æ¡n bá»‹ thay tháº¿ báº±ng Token 42](#_Toc106724500)

[3\. Danh sÃ¡ch cÃ¡c hÃ m tÃ­ch há»£p thÃ´ng tÆ° 78 42](#_Toc106724501)

[3.1. NhÃ³m cÃ¡c hÃ m webservice táº¡o láº­p vÃ  phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n (PublishService) 42](#_Toc106724502)

[3.1.1. PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n 42](#_Toc106724503)

[3.1.2. PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n theo sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o 42](#_Toc106724504)

[3.1.3. ThÃªm má»›i hÃ³a Ä‘Æ¡n 42](#_Toc106724505)

[3.1.4. ThÃªm má»›i hÃ³a Ä‘Æ¡n theo máº«u sá»‘, kÃ½ hiá»‡u 42](#_Toc106724506)

[3.1.5. Láº¥y ná»™i dung XMLData HÃ³a Ä‘Æ¡n cÃ³ mÃ£ CQT tráº£ vá» 42](#_Toc106724507)

[3.1.6. Láº¥y tráº¡ng thÃ¡i vÃ  XMLData hÃ³a Ä‘Æ¡n cÃ³ mÃ£, tráº¡ng thÃ¡i cá»§a hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i CQT tráº£ vá» theo danh sÃ¡ch invToken 42](#_Toc106724508)

[3.1.7. Láº¥y tráº¡ng thÃ¡i vÃ  XMLData hÃ³a Ä‘Æ¡n cÃ³ mÃ£, tráº¡ng thÃ¡i cá»§a hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i CQT tráº£ vá» theo danh sÃ¡ch Fkey 42](#_Toc106724509)

[3.1.8. Láº¥y tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n cÃ³ mÃ£, hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i CQT tráº£ vá» theo danh sÃ¡ch invToken 42](#_Toc106724510)

[3.1.9. Láº¥y tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n cÃ³ mÃ£, hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i CQT tráº£ vá» theo danh sÃ¡ch Fkey 42](#_Toc106724511)

[3.1.10. Gá»­i thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ sai sÃ³t. 42](#_Toc106724512)

[3.1.11. Láº¥y giÃ¡ trá»‹ Hash cho gá»­i thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n cÃ³ sai sÃ³t báº±ng token ( bÆ°á»›c 1) 42](#_Toc106724513)

[3.1.12. Gá»­i thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ sai sÃ³t sá»­ dá»¥ng token (bÆ°á»›c 2) 42](#_Toc106724514)

[3.1.13. Láº¥y giÃ¡ trá»‹ Hash cho gá»­i thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n cÃ³ sai sÃ³t báº±ng SmartCA ( bÆ°á»›c 1) 42](#_Toc106724515)

[3.1.14. Gá»­i thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ sai sÃ³t sá»­ dá»¥ng SmartCA (bÆ°á»›c 2) 42](#_Toc106724516)

[3.1.15. Nháº­n káº¿t quáº£ thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n sai sÃ³t 42](#_Toc106724517)

[3.1.16. Xá»­ lÃ½ kÃªt quáº£ thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n sai sÃ³t 42](#_Toc106724518)

[3.1.17. Láº¥y danh sÃ¡ch lá»‹ch sá»­ truyá»n nháº­n CQT theo tham sá»‘ truyá»n vÃ o vÃ  phÃ¢n trang 42](#_Toc106724519)

[3.1.18. Xem chi tiáº¿t báº£n ghi trong lá»‹ch sá»­ truyá»n nháº­n 42](#_Toc106724520)

[3.1.19. Xem chi tiáº¿t step CQT tráº£ vá» 43](#_Toc106724521)

[3.1.20. Nháº­n káº¿t quáº£ lá»‹ch sá»± truyá»n nháº­n 43](#_Toc106724522)

[3.1.21. ÄÄƒng kÃ½ tá» khai DK01 44](#_Toc106724523)

[3.1.22. Láº¥y káº¿t quáº£ tá» khai DK01 44](#_Toc106724524)

[3.1.23. ÄÄƒng kÃ½ dáº£i sá»‘ 44](#_Toc106724525)

[3.1.24. Há»§y dáº£i sá»‘ 44](#_Toc106724526)

[3.1.25. Láº¥y giÃ¡ trá»‹ Hash cho phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n SmartCa ( bÆ°á»›c 1) 44](#_Toc106724527)

[3.1.26. PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n sá»­ dá»¥ng SmartCA (bÆ°á»›c 2) 44](#_Toc106724528)

[3.1.27. In thÃ´ng bÃ¡o hÃ³a Ä‘Æ¡n sai sÃ³t 44](#_Toc106724529)

[3.2. NhÃ³m cÃ¡c hÃ m webservice xá»­ lÃ½ hÃ³a Ä‘Æ¡n (BussinessService) 45](#_Toc106724530)

[3.2.1. Äiá»u chá»‰nh hÃ³a Ä‘Æ¡n theo sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o 45](#_Toc106724531)

[3.2.2. Html xem trÆ°á»›c khi Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n 49](#_Toc106724532)

[3.2.3. Thay tháº¿ hÃ³a Ä‘Æ¡n theo sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o 52](#_Toc106724533)

[3.2.4. Html xem trÆ°á»›c khi thay tháº¿ hÃ³a Ä‘Æ¡n 55](#_Toc106724534)

[3.2.5. Thay tháº¿ hÃ³a Ä‘Æ¡n giá»¯ sá»‘ khÃ¡c máº«u sá»‘ 58](#_Toc106724535)

[3.2.6. Thay tháº¿ hÃ³a Ä‘Æ¡n theo fkey, pattern, serial truyá»n vÃ o 62](#_Toc106724536)

[3.2.7. Äiá»u chá»‰nh hÃ³a Ä‘Æ¡n theo fkey, pattern, serial truyá»n vÃ o 65](#_Toc106724537)

[3.2.8. Äiá»u chá»‰nh hÃ³a Ä‘Æ¡n cÅ© (hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trÃªn há»‡ thá»‘ng) 69](#_Toc106724538)

[3.2.9. Thay tháº¿ hÃ³a Ä‘Æ¡n cÅ© (hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trÃªn há»‡ thá»‘ng) 73](#_Toc106724539)

[3.2.10. Äiá»u chá»‰nh hÃ³a Ä‘Æ¡n khÃ´ng phÃ¡t sinh hÃ³a Ä‘Æ¡n má»›i 78](#_Toc106724540)

[3.2.11. láº¥y giÃ¡ trá»‹ Hash cho Ä‘iá»u chá»‰nh thay tháº¿ hÃ³a Ä‘Æ¡n cÅ© token Smart CA(BÆ°á»›c 1) 79](#_Toc106724541)

[3.2.12. Gá»­i Ä‘iá»u chá»‰nh, thay tháº¿ hÃ³a Ä‘Æ¡n cÅ© sá»­ dá»¥ng token smart CA (BÆ°á»›c 2) 82](#_Toc106724542)

[3.2.13. Láº¥y giÃ¡ trá»‹ Hash cho Ä‘iá»u chá»‰nh thay tháº¿ khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cÅ© vá»›i Smart CA(BÆ°á»›c 1) 84](#_Toc106724543)

[3.2.14. Gá»­i Ä‘iá»u chá»‰nh, thay tháº¿ khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cÅ© vá»›i smart CA (BÆ°á»›c 2) 86](#_Toc106724544)

[3.2.15. Láº¥y giÃ¡ trá»‹ Hash cho Ä‘iá»u chá»‰nh thay tháº¿ khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cÅ© vá»›i Token(BÆ°á»›c 1) 88](#_Toc106724545)

[3.2.16. Gá»­i Ä‘iá»u chá»‰nh, thay tháº¿ khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cÅ© vá»›i Token (BÆ°á»›c 2) 90](#_Toc106724546)

[3.2.17. Thay tháº¿, Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n sá»­ dá»¥ng SmartCa (bÆ°á»›c 2) 93](#_Toc106724547)

[3.2.18. Láº¥y thÃ´ng tin config 95](#_Toc106724548)

# QUY Äá»ŠNH VÃ€ CHUáº¨N CHUNG

## Chuáº©n Ä‘á»‹nh dáº¡ng dá»¯ liá»‡u tráº£ vá»

Dá»¯ liá»‡u message Ä‘Æ°á»£c trao Ä‘á»•i qua Web Service theo Ä‘á»‹nh dáº¡ng XML.

## Base64 format

Má»™t dáº¡ng khÃ¡c Ä‘á»ƒ truyá»n dá»¯ liá»‡u binary dÆ°á»›i dáº¡ng text lÃ  dáº¡ng Base64 Encoding.

[http://en.wikipedia.org/wiki/Base64](http://en.wikipedia.org/wiki/Base64)

## Errors

CÃ¡c lá»—i tráº£ vá» theo báº£ng mÃ´ táº£ mÃ£ lá»—i tÆ°Æ¡ng á»©ng má»—i Ä‘áº§u hÃ m.

# Danh sÃ¡ch cÃ¡c hÃ m tÃ­ch há»£p

## NhÃ³m cÃ¡c hÃ m webservice táº¡o láº­p vÃ  phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n (PublishService)

**MÃ´ táº£: cÃ¡c Ä‘áº§u hÃ m web service náº±m trong PublishService.asmx, thá»±c hiá»‡n cÃ¡c nghiá»‡p vá»¥ liÃªn quan Ä‘áº¿n táº¡o láº­p, phÃ¡t hÃ nh vÃ  xá»­ lÃ½ hÃ³a Ä‘Æ¡n**

### PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n

URL

String **ImportAndPublishInv**(string Account, string ACpass, string xmlInvData, string username, string password, string pattern = "", string serial = "", int convert = 0).

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n vá»›i dá»¯ liá»‡u XML cá»§a khÃ¡ch hÃ ng, tá»‘i Ä‘a cho 5000 hÃ³a Ä‘Æ¡n.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass :** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice ( tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: Chuá»—i XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n ( theo cáº¥u trÃºc mÃ´ táº£)
*   **pattern:** Máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **serial:** KÃ½ hiá»‡u hÃ³a Ä‘Æ¡n
*   **convert:** Máº·c Ä‘á»‹nh lÃ  0 (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode / 1- Cáº§n convert tá»« TCVN3 sang Unicode)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm khÃ¡ch hÃ ng |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh | Há»‡ thá»‘ng sáº½ tráº£ vá» lá»—i náº¿u 1 hÃ³a Ä‘Æ¡n trong chuá»—i XML Ä‘áº§u vÃ o khÃ´ng há»£p lá»‡, cáº£ lÃ´ hÃ³a Ä‘Æ¡n sáº½ khÃ´ng Ä‘Æ°á»£c phÃ¡t hÃ nh. |
| ERR:7 | ThÃ´ng tin vá» Username/pass khÃ´ng há»£p lá»‡ |  |
| ERR:20 | Pattern vÃ  Serial khÃ´ng phÃ¹ há»£p, hoáº·c khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Äƒng kÃ­ cÃ³ sá»­ dá»¥ng Pattern vÃ  Serial truyá»n vÃ o. |  |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, kiá»ƒm tra exception tráº£ vá» (DB roll back) |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng cho phÃ©p |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘á»§ sá»‘ hÃ³a Ä‘Æ¡n cho lÃ´ phÃ¡t hÃ nh |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | 1 hoáº·c nhiá»u hÃ³a Ä‘Æ¡n trong lÃ´ hÃ³a Ä‘Æ¡n cÃ³ Fkey trÃ¹ng vá»›i Fkey cá»§a hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |
| ERR:21 | Lá»—i trÃ¹ng sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| ERR:35 | CÃ´ng ty Ä‘Äƒng kÃ½ DK01 cáº£ cÃ³ mÃ£, khÃ´ng mÃ£. Táº¡o cáº£ kÃ½ hiá»‡u cáº£ 2 dáº£i cÃ³ mÃ£ vÃ  khÃ´ng mÃ£ sáº½ yÃªu cáº§u báº¯t buá»™c truyá»n pattern, serial |  |
| OK:pattern;serial1-key1_num1,key2_num12, â€¦)(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E-key1_1,key2_2,key3_3,key4_4,key5_5) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPattern ğŸ¡ª Máº«u sá»‘ cá»§a cÃ¡c hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nhSerial1 ğŸ¡ª serial cá»§a dÃ£y cÃ¡c hÃ³a Ä‘Æ¡n phÃ¡t hÃ nhnum1, num2â€¦ lÃ  cÃ¡c sá»‘ hÃ³a Ä‘Æ¡nkey1,key2â€¦ lÃ  khÃ³a Ä‘á»ƒ nháº­n biáº¿t hÃ³a Ä‘Æ¡n phÃ¡t hÃ nh cho khÃ¡ch hÃ ng nÃ o(láº¥y tá»« Ä‘áº§u vÃ o) | CÃ¡c hÃ³a Ä‘Æ¡n cÃ³ serial khÃ¡c nhau phÃ¢n cÃ¡ch bá»Ÿi dáº¥u â€œ;â€CÃ¡c sá»‘ hÃ³a Ä‘Æ¡n phÃ¢n cÃ¡ch bá»Ÿi â€œ,â€ |

Cáº¥u trÃºc xmlInvData

<Invoices>

<Inv>

<key>**GiÃ¡ trá»‹ khÃ³a Ä‘á»ƒ phÃ¢n biá»‡t hÃ³a Ä‘Æ¡n xuáº¥t cho khÃ¡ch hÃ ng nÃ o**</key>

<Invoice>

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod>**PhÆ°Æ¡ng thá»©c thanh toÃ¡n**</PaymentMethod>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<Products>

<Product>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n sau thuáº¿\***</Amount>

<Remark>**Remark**</Remark>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tá»•ng tiá»n thuáº¿\***</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**Chiáº¿t kháº¥u**</Discount>

<DiscountAmount>**Tá»•ng tiá»n chiáº¿t kháº¥u**</DiscountAmount>

<IsSum> **TÃ­nh cháº¥t \* (0-HÃ ng hÃ³a, dá»‹ch vá»¥; 1-Khuyáº¿n máº¡i; 2-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)**</IsSum>

</Product>

</Products>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**NgÃ y dá»‹ch vá»¥**</ArisingDate>

<PaymentStatus>**Tráº¡ng thÃ¡i thanh toÃ¡n**</PaymentStatus>

<EmailDeliver>**EmailDeliver**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**MÃ£ sá»‘ thuáº¿**</ComTaxCode>

<ComFax>**Company Fax**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue> **GrossValue** </GrossValue>

<GrossValue0> **GrossValue0**</GrossValue0>

<VatAmount0> **VatAmount0**</VatAmount0>

<GrossValue5> **GrossValue5**</GrossValue5>

<VatAmount5> **VatAmount5**</VatAmount5>

<GrossValue10> **GrossValue10**</GrossValue10>

<VatAmount10> **VatAmount10**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**Äiá»‡n thoáº¡i cÃ´ng ty**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**CreateDate**</CreateDate>

<DiscountRate>**Chiáº¿t kháº¥u**</DiscountRate>

<CusSignStatus>**1.1**</CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax></GrossValue\_NonTax>

<CurrencyUnit>**ÄÆ¡n vá»‹ tiá»n tá»‡**</CurrencyUnit>

<ExchangeRate>**Tá»· giÃ¡**</ExchangeRate>

<ConvertedAmount>**Tá»•ng tiá»n quy Ä‘á»•i**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

<LDDNBo>**LDDNBO**</LDDNBo>

<HDSo>**HDSO**</HDSo>

<HVTNXHang>**HVTNXHANG**</HVTNXHang>

<TNVChuyen>**TNVCHUYEN**</TNVChuyen>

<PTVChuyen>**PTVCHUYEN**</PTVChuyen>

<HDKTSo>**HDKTSO**</HDKTSo>

<HDKTNgay>**HDKTNgay**</HDKTNgay>

</Invoice>

</Inv>

</Invoices>

### PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n theo sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o

URL

String **ImportAndPublishAssignedNo**(string Account, string ACpass, string xmlInvData, string username, string password, string pattern = "", string serial = "", int convert = 0).

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n vá»›i dá»¯ liá»‡u XML cá»§a khÃ¡ch hÃ ng cho phÃ©p truyá»n sá»‘ hÃ³a Ä‘Æ¡n khi phÃ¡t hÃ nh, tá»‘i Ä‘a cho 5000 hÃ³a Ä‘Æ¡n.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass :** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice ( tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: Chuá»—i XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n ( theo cáº¥u trÃºc mÃ´ táº£)
*   **pattern:** Máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **serial:** KÃ½ hiá»‡u hÃ³a Ä‘Æ¡n
*   **convert:** Máº·c Ä‘á»‹nh lÃ  0 (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode / 1- Cáº§n convert tá»« TCVN3 sang Unicode)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm khÃ¡ch hÃ ng |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh | Há»‡ thá»‘ng sáº½ tráº£ vá» lá»—i náº¿u 1 hÃ³a Ä‘Æ¡n trong chuá»—i XML Ä‘áº§u vÃ o khÃ´ng há»£p lá»‡, cáº£ lÃ´ hÃ³a Ä‘Æ¡n sáº½ khÃ´ng Ä‘Æ°á»£c phÃ¡t hÃ nh. |
| ERR:7 | ThÃ´ng tin vá» Username/pass khÃ´ng há»£p lá»‡ |  |
| ERR:20 | Pattern vÃ  Serial khÃ´ng phÃ¹ há»£p, hoáº·c khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Äƒng kÃ­ cÃ³ sá»­ dá»¥ng Pattern vÃ  Serial truyá»n vÃ o. |  |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, kiá»ƒm tra exception tráº£ vá» (DB roll back) |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng cho phÃ©p |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘á»§ sá»‘ hÃ³a Ä‘Æ¡n cho lÃ´ phÃ¡t hÃ nh |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | 1 hoáº·c nhiá»u hÃ³a Ä‘Æ¡n trong lÃ´ hÃ³a Ä‘Æ¡n cÃ³ Fkey trÃ¹ng vá»›i Fkey cá»§a hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |
| ERR:21 | Lá»—i trÃ¹ng sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| ERR:31 | Sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o khÃ´ng há»£p lá»‡ |  |
| ERR:35 | CÃ´ng ty Ä‘Äƒng kÃ½ DK01 cáº£ cÃ³ mÃ£, khÃ´ng mÃ£. Táº¡o cáº£ kÃ½ hiá»‡u cáº£ 2 dáº£i cÃ³ mÃ£ vÃ  khÃ´ng mÃ£ sáº½ yÃªu cáº§u báº¯t buá»™c truyá»n pattern, serial |  |
| OK:pattern;serial1-key1_num1,key2_num12, â€¦)(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E-key1_1,key2_2,key3_3,key4_4,key5_5) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPattern ğŸ¡ª Máº«u sá»‘ cá»§a cÃ¡c hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nhSerial1 ğŸ¡ª serial cá»§a dÃ£y cÃ¡c hÃ³a Ä‘Æ¡n phÃ¡t hÃ nhnum1, num2â€¦ lÃ  cÃ¡c sá»‘ hÃ³a Ä‘Æ¡nkey1,key2â€¦ lÃ  khÃ³a Ä‘á»ƒ nháº­n biáº¿t hÃ³a Ä‘Æ¡n phÃ¡t hÃ nh cho khÃ¡ch hÃ ng nÃ o(láº¥y tá»« Ä‘áº§u vÃ o) | CÃ¡c hÃ³a Ä‘Æ¡n cÃ³ serial khÃ¡c nhau phÃ¢n cÃ¡ch bá»Ÿi dáº¥u â€œ;â€CÃ¡c sá»‘ hÃ³a Ä‘Æ¡n phÃ¢n cÃ¡ch bá»Ÿi â€œ,â€ |

Cáº¥u trÃºc xmlInvData

<Invoices>

<Inv>

<key>**GiÃ¡ trá»‹ khÃ³a Ä‘á»ƒ phÃ¢n biá»‡t hÃ³a Ä‘Æ¡n xuáº¥t cho khÃ¡ch hÃ ng nÃ o**</key>

<Invoice>

<InvoiceNo>**Sá»‘ hÃ³a Ä‘Æ¡n\***</InvoiceNo>

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod>**PhÆ°Æ¡ng thá»©c thanh toÃ¡n**</PaymentMethod>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<Products>

<Product>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n sau thuáº¿\***</Amount>

<Remark>**Remark**</Remark>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tá»•ng tiá»n thuáº¿\***</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**Chiáº¿t kháº¥u**</Discount>

<DiscountAmount>**Tá»•ng tiá»n chiáº¿t kháº¥u**</DiscountAmount>

<IsSum> **TÃ­nh cháº¥t \* (0-HÃ ng hÃ³a, dá»‹ch vá»¥; 1-Khuyáº¿n máº¡i; 2-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)**</IsSum>

</Product>

</Products>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**NgÃ y dá»‹ch vá»¥**</ArisingDate>

<PaymentStatus>**Tráº¡ng thÃ¡i thanh toÃ¡n**</PaymentStatus>

<EmailDeliver>**EmailDeliver**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**MÃ£ sá»‘ thuáº¿**</ComTaxCode>

<ComFax>**Company Fax**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue> **GrossValue** </GrossValue>

<GrossValue0> **GrossValue0**</GrossValue0>

<VatAmount0> **VatAmount0**</VatAmount0>

<GrossValue5> **GrossValue5**</GrossValue5>

<VatAmount5> **VatAmount5**</VatAmount5>

<GrossValue10> **GrossValue10**</GrossValue10>

<VatAmount10> **VatAmount10**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**Äiá»‡n thoáº¡i cÃ´ng ty**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**CreateDate**</CreateDate>

<DiscountRate>**Chiáº¿t kháº¥u**</DiscountRate>

<CusSignStatus>**1.1**</CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax></GrossValue\_NonTax>

<CurrencyUnit>**ÄÆ¡n vá»‹ tiá»n tá»‡**</CurrencyUnit>

<ExchangeRate>**Tá»· giÃ¡**</ExchangeRate>

<ConvertedAmount>**Tá»•ng tiá»n quy Ä‘á»•i**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

<LDDNBo>**LDDNBO**</LDDNBo>

<HDSo>**HDSO**</HDSo>

<HVTNXHang>**HVTNXHANG**</HVTNXHang>

<TNVChuyen>**TNVCHUYEN**</TNVChuyen>

<PTVChuyen>**PTVCHUYEN**</PTVChuyen>

<HDKTSo>**HDKTSO**</HDKTSo>

<HDKTNgay>**HDKTNgay**</HDKTNgay>

</Invoice>

</Inv>

</Invoices>

### PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n theo danh sÃ¡ch fkey truyá»n vÃ o

URL

string **PublishInvFkey**(string Account, string ACpass, string lsFkey, string username, string password, string pattern = "", string serial = "").

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n theo 1 danh sÃ¡ch fkey truyá»n vÃ o, tá»‘i Ä‘a 200 fkey

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass :** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice ( tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **lsFkey:** Danh sÃ¡ch Fkey truyá»n vÃ o Ä‘Æ°á»£c ngÄƒn cÃ¡ch bá»Ÿi dáº¥u â€œ\_â€
*   **pattern:** Máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **serial:** KÃ½ hiá»‡u hÃ³a Ä‘Æ¡n

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n |  |
| ERR:6 | Danh sÃ¡ch Fkey khÃ´ng tá»“n táº¡i |  |
| ERR:15 | Danh sÃ¡ch Fkey Ä‘Ã£ phÃ¡t hÃ nh |  |
| ERR:20 | Pattern vÃ  Serial khÃ´ng phÃ¹ há»£p, hoáº·c khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Äƒng kÃ­ cÃ³ sá»­ dá»¥ng Pattern vÃ  Serial truyá»n vÃ o | Chá»‰ cháº¥p nháº­n Ä‘á»“ng thá»i nháº­p cáº£ Pattern vÃ  Serial hoáº·c Ä‘á»“ng thá»i Ä‘á»ƒ trá»‘ng cáº£ Pattern vÃ  Serial |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, kiá»ƒm tra exception tráº£ vá» (DB roll back) |
| ERR:10 | Danh sÃ¡ch Fkey truyá»n vÃ o vÆ°á»£t quÃ¡ 200 fkey |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| OK:#Fkey1 _No1, Fkey2_No2(VÃ­ dá»¥: OK:#Fkey1 _1, Fkey2_2) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngFkey1: Fkey thá»© nháº¥tNo1: Sá»‘ hÃ³a Ä‘Æ¡n thá»© 1 |  |

**Cáº¥u trÃºc cá»§a file XML (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<PublishInvFkey>

<Account>**TÃ i khoáº£n \***</Account>

<ACpass>**Máº­t kháº©u \***</ACpass>

<lsFkey>**fkey1\_fkey2\_fkey3 \***</lsFkey>

<username>**TÃ i khoáº£n role service \***</username>

<password>**Máº­t kháº©u tÃ i khoáº£n role service \***</password>

<pattern>**Máº«u sá»‘**</pattern>

<serial>**KÃ½ hiá»‡u**</serial>

</PublishInvFkey>

### PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n theo khoáº£ng thá»i gian (publishdate)

URL

string PublishInvByDate(string Account, string ACpass, string username, string password, string FromDate, string ToDate)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n theo 1 khoáº£ng thá»i gian truyá»n vÃ o.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **FromDate:** NgÃ y báº¯t Ä‘áº§u (so sÃ¡nh vá»›i trÆ°á»ng publishdate)
*   **ToDate:** NgÃ y káº¿t thÃºc (so sÃ¡nh vá»›i trÆ°á»ng publishdate)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n |  |
| ERR:23 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty |  |
| ERR:24# | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n cáº§n phÃ¡t hÃ nh cá»§a cÃ´ng ty á»©ng vá»›i tá»«ng máº«u sá»‘, kÃ½ hiá»‡u |  |
| ERR:14# | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n cá»§a cÃ´ng ty á»©ng vá»›i tá»«ng máº«u sá»‘, kÃ½ hiá»‡u |  |
| ERR:20 | Pattern vÃ  Serial khÃ´ng phÃ¹ há»£p, hoáº·c khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Äƒng kÃ­ cÃ³ sá»­ dá»¥ng Pattern vÃ  Serial truyá»n vÃ o | Chá»‰ cháº¥p nháº­n Ä‘á»“ng thá»i nháº­p cáº£ Pattern vÃ  serial hoáº·c Ä‘á»“ng thá»i Ä‘á»ƒ trá»‘ng cáº£ pattern vÃ  serial |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n | DB roll back |
| OK:#Fkey1 _No1, Fkey2_No2(VÃ­ dá»¥: OK:#Fkey1 _1, Fkey2_2) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngFkey1: Fkey thá»© nháº¥tNo1: Sá»‘ hÃ³a Ä‘Æ¡n thá»© 1 |  |

**Cáº¥u trÃºc cá»§a file XML (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<PublishInvByDate>

<Account>**TÃ i khoáº£n \***</Account>

<ACpass>**Máº­t kháº©u \***</ACpass>

<username>**TÃ i khoáº£n role service \***</username>

<password>**Máº­t kháº©u tÃ i khoáº£n role service \***</password>

<FromDate>**NgÃ y báº¯t Ä‘áº§u**</FromDate >

<ToDate>**NgÃ y káº¿t thÃºc**</ToDate>

</PublishInvByDate >

### Láº¥y giÃ¡ trá»‹ Hash cho phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n token ( bÆ°á»›c 1)

URL

string **getHashInvWithToken**(string Account, string ACpass, string xmlInvData, string username, string password, string serialCert, int type, string invToken, string pattern = "", string serial = "", int convert = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng token, thá»±c hiá»‡n truyá»n dá»¯ liá»‡u hÃ³a Ä‘Æ¡n vÃ  láº¥y giÃ¡ trá»‹ hash value Ä‘á»ƒ kÃ½ sá»‘ báº±ng token á»Ÿ client.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml hÃ³a Ä‘Æ¡n (theo máº«u mÃ´ táº£ kÃ¨m theo)
*   **serialCert**: Serial cá»§a chá»©ng thÆ° sá»‘ cÃ´ng ty Ä‘Ã£ Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng
*   **type**: phÃ¡t hÃ nh má»›i: 0, thay tháº¿ = 1, Ä‘iá»u chá»‰nh tÄƒng = 2, Ä‘iá»u chá»‰nh giáº£m = 3, Ä‘iá»u chá»‰nh thÃ´ng tin = 4
*   **invToken**: chuá»—i token hÃ³a Ä‘Æ¡n = máº«u sá»‘;kÃ½ hiá»‡u;sá»‘ hÃ³a Ä‘Æ¡n (vÃ­ dá»¥: 01GTKT0/001;AA/17E;1) â€“ chá»‰ cáº§n khi thay tháº¿/ Ä‘iá»u chá»‰nh; phÃ¡t hÃ nh thÃ¬ Ä‘á»ƒ trá»‘ng
*   **pattern**: máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **serial**: kÃ½ hiá»‡u hÃ³a Ä‘Æ¡n

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  Serial khÃ´ng phÃ¹ há»£p |  |
| ERR:6 | KhÃ´ng cÃ²n Ä‘á»§ sá»‘ lÆ°á»£ng hÃ³a Ä‘Æ¡n Ä‘á»ƒ phÃ¡t hÃ nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng tá»‘i Ä‘a cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i hÃ³a Ä‘Æ¡n cÃ³ lá»—i |  |
| ERR:35 | CÃ´ng ty Ä‘Äƒng kÃ½ DK01 cáº£ cÃ³ mÃ£, khÃ´ng mÃ£. Táº¡o cáº£ kÃ½ hiá»‡u cáº£ 2 dáº£i cÃ³ mÃ£ vÃ  khÃ´ng mÃ£ sáº½ yÃªu cáº§u báº¯t buá»™c truyá»n pattern, serial |  |
| Chuá»—i xml tráº£ vá» | Chuá»—i tráº£ vá» |  |

Cáº¥u trÃºc chuá»—i XML tráº£ vá»:

<Invoices>

<Inv>

<key>**123**</key>

<idInv>**128668**</idInv>

<hashValue>**rKdYgeYc7CYLOhjfNFDZ8nBaWjA=**</hashValue>

<pattern>**01GTKT0/001**</pattern>

<serial>**AA/17E**</serial>

</Inv>

<Inv>

<key>**456**</key>

<idInv>**128923**</idInv>

<hashValue>**2p60p82YQhqjMHG9t/toIaLfENQ=**</hashValue>

<pattern>**01GTKT0/001**</pattern>

<serial>**AA/17E**</serial>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <key>: fkey

tag <idInv>: id hÃ³a Ä‘Æ¡n trÃªn há»‡ thá»‘ng vnpt

tag <hashValue>: chuá»—i hash

tag <pattern>: máº«u sá»‘

tag <serial>: kÃ½ hiá»‡u

### PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n sá»­ dá»¥ng token (bÆ°á»›c 2)

URL

string **publishInvWithToken** (string Account, string ACpass, string xmlInvData, string username, string password, string pattern = "", string serial = "").

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng token, sau khi thá»±c hiá»‡n gá»i hÃ m Láº¥y giÃ¡ trá»‹ Hash á»Ÿ bÆ°á»›c 1 (**2.1.4**)

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml dá»¯ liá»‡u kÃ½ hash hÃ³a
*   **pattern**: máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **serial**: kÃ½ hiá»‡u hÃ³a Ä‘Æ¡n
*   **convert:** Máº·c Ä‘á»‹nh lÃ  0 (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode / 1- Cáº§n convert tá»« TCVN3 sang Unicode)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y dáº£i hÃ³a Ä‘Æ¡n | KhÃ´ng tÃ¬m tháº¥y dáº£i hÃ³a Ä‘Æ¡n hoáº·c tÃ i khoáº£n phÃ¡t hÃ nh khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n trÃªn dáº£i hÃ³a Ä‘Æ¡n truyá»n lÃªn. |
| ERR:6 | KhÃ´ng cÃ²n Ä‘á»§ sá»‘ lÆ°á»£ng hÃ³a Ä‘Æ¡n Ä‘á»ƒ phÃ¡t hÃ nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ max cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i hÃ³a Ä‘Æ¡n cÃ³ lá»—i |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhSerial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhinvNumber: sá»‘ hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh |  |

**Cáº¥u trÃºc chuá»—i xmlData truyá»n lÃªn:**

<Invoices>

<SerialCert>540171AA56FDB2F8476BBD781251C83D</SerialCert>

<Inv>

<key>789</key>

<idInv>10</idInv>

<signValue>J2k7CsSN9Gb6PmsHD9yDJS1/j3s=</signValue>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <SerialCert>: serial chá»©ng thÆ° cá»§a cÃ´ng ty

tag <key>: fkey

tag <idInv>: id hÃ³a Ä‘Æ¡n trÃªn há»‡ thá»‘ng vnpt

tag <signValue>: chuá»—i kÃ½

### Thay tháº¿, Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n sá»­ dá»¥ng token

URL

string **AdjustReplaceInvWithToken**(string Account, string ACpass, string xmlInvData, string username, string password, int type, string pattern = "", string serial = "")

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p thay tháº¿ , Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cho cÃ¡c khÃ¡ch hÃ ng sá»­ dá»¥ng token

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml hÃ³a Ä‘Æ¡n ( theo mÃ´ táº£)
*   **type**: thay tháº¿ = 1, Ä‘iá»u chá»‰nh tÄƒng = 2, Ä‘iá»u chá»‰nh giáº£m = 3, Ä‘iá»u chá»‰nh thÃ´ng tin = 4
*   **pattern**: máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **serial**: kÃ½ hiá»‡u hÃ³a Ä‘Æ¡n

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y dáº£i hÃ³a Ä‘Æ¡n | KhÃ´ng tÃ¬m tháº¥y dáº£i hÃ³a Ä‘Æ¡n hoáº·c tÃ i khoáº£n phÃ¡t hÃ nh khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n trÃªn dáº£i hÃ³a Ä‘Æ¡n truyá»n lÃªn. |
| ERR:6 | KhÃ´ng cÃ²n Ä‘á»§ sá»‘ lÆ°á»£ng hÃ³a Ä‘Æ¡n Ä‘á»ƒ phÃ¡t hÃ nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ max cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i hÃ³a Ä‘Æ¡n cÃ³ lá»—i |  |
| ERR:35 | CÃ´ng ty Ä‘Äƒng kÃ½ DK01 cáº£ cÃ³ mÃ£, khÃ´ng mÃ£. Táº¡o cáº£ kÃ½ hiá»‡u cáº£ 2 dáº£i cÃ³ mÃ£ vÃ  khÃ´ng mÃ£ sáº½ yÃªu cáº§u báº¯t buá»™c truyá»n pattern, serial |  |
| ERR:60 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (CÃ³ mÃ£ / KhÃ´ng mÃ£). |  |
| ERR:61 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (HD GTGT / HD bÃ¡n hÃ ng...). |  |
| ERR:62 | KhÃ´ng Ä‘Æ°á»£c dÃ¹ng khÃ´ng mÃ£ Ä‘Äƒng kÃ½ gá»­i báº£ng tá»•ng há»£p thay tháº¿, Ä‘iá»u chá»‰nh cÃ¡c hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i thÃ´ng tin chi tiáº¿t. |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhSerial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhinvNumber: sá»‘ hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh |  |

**Cáº¥u trÃºc xmlInvData**:

<Invoices>

<SerialCert> **serial chá»©ng thÆ° cá»§a cÃ´ng ty** </SerialCert>

<PatternOld> **máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n bá»‹ Ä‘iá»u chá»‰nh, thay tháº¿** </PatternOld>

<SerialOld> **kÃ½ hiá»‡u cá»§a hÃ³a Ä‘Æ¡n bá»‹ Ä‘iá»u chá»‰nh, thay tháº¿** </SerialOld>

<NoOlde> **sá»‘ hÃ³a Ä‘Æ¡n cá»§a hÃ³a Ä‘Æ¡n bá»‹ Ä‘iá»u chá»‰nh, thay tháº¿** </NoOlde>

<Inv>

<key> **fkey hÃ³a Ä‘Æ¡n má»›i** </key>

<idInv> **id hÃ³a Ä‘Æ¡n má»›i trÃªn há»‡ thá»‘ng vnpt** </idInv>

<signValue> **chuá»—i kÃ½** </signValue>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <SerialCert>: serial chá»©ng thÆ° cá»§a cÃ´ng ty

tag <PatternOld>: máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n bá»‹ Ä‘iá»u chá»‰nh, thay tháº¿

tag <SerialOld>: kÃ½ hiá»‡u cá»§a hÃ³a Ä‘Æ¡n bá»‹ Ä‘iá»u chá»‰nh, thay tháº¿

tag <NoOlde>: sá»‘ hÃ³a Ä‘Æ¡n cá»§a hÃ³a Ä‘Æ¡n bá»‹ Ä‘iá»u chá»‰nh, thay tháº¿

tag <key>: fkey hÃ³a Ä‘Æ¡n má»›i

tag <idInv>: id hÃ³a Ä‘Æ¡n má»›i trÃªn há»‡ thá»‘ng vnpt

tag <signValue>: giÃ¡ trá»‹ kÃ½ sá»‘ cá»§a hÃ³a Ä‘Æ¡n má»›i

### ThÃªm má»›i hÃ³a Ä‘Æ¡n theo máº«u sá»‘, kÃ½ hiá»‡u

URL

string **ImportInvByPattern**(string Account, string ACpass, string xmlInvData, string username, string password, string pattern = "", string serial = "", int convert = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p thÃªm má»›i hÃ³a Ä‘Æ¡n tá»« dá»¯ liá»‡u XML gá»­i lÃªn

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml hÃ³a Ä‘Æ¡n ( theo mÃ´ táº£)
*   **pattern**: máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **serial**: kÃ½ hiá»‡u hÃ³a Ä‘Æ¡n
*   **convert:** Máº·c Ä‘á»‹nh lÃ  0, 0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm má»›i hÃ³a Ä‘Æ¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:6 | KhÃ´ng Ä‘á»§ sá»‘ lÆ°á»£ng hÃ³a Ä‘Æ¡n cho lÃ´ thÃªm má»›i |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:13 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i hÃ³a Ä‘Æ¡n trÃ¹ng Fkey |  |
| ERR:22 | TrÃ¹ng sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:7 | Pattern vÃ  serial khÃ´ng phÃ¹ há»£p, hoáº·c khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Äƒng kÃ½ cÃ³ sá»­ dá»¥ng Pattern vÃ  Serial truyá»n vÃ o | Chá»‰ cháº¥p nháº­n Ä‘á»“ng thá»i nháº­p cáº£ Pattern vÃ  serial hoáº·c Ä‘á»“ng thá»i Ä‘á»ƒ trá»‘ng cáº£ pattern vÃ  serial |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh. DB roll back |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ max cho phÃ©p | Máº·c Ä‘á»‹nh lÃ  5000, hoáº·c Ä‘Æ°á»£c cáº¥u hÃ¬nh theo tá»«ng app |
| ERR:35 | CÃ´ng ty Ä‘Äƒng kÃ½ DK01 cáº£ cÃ³ mÃ£, khÃ´ng mÃ£. Táº¡o cáº£ kÃ½ hiá»‡u cáº£ 2 dáº£i cÃ³ mÃ£ vÃ  khÃ´ng mÃ£ sáº½ yÃªu cáº§u báº¯t buá»™c truyá»n pattern, serial |  |
| OK: pattern;serial1-key1_num1,key2_num12,key3_num3â€¦(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E-key1_1,key2_2,key3_3,key4_4,key5_5) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPattern ğŸ¡ª Máº«u sá»‘ cá»§a cÃ¡c hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nhSerial1 ğŸ¡ª serial cá»§a dÃ£y cÃ¡c hÃ³a Ä‘Æ¡n phÃ¡t hÃ nhnum1, num2â€¦ lÃ  cÃ¡c sá»‘ hÃ³a Ä‘Æ¡nkey1,key2â€¦ lÃ  khÃ³a Ä‘á»ƒ nháº­n biáº¿t hÃ³a Ä‘Æ¡n phÃ¡t hÃ nh cho khÃ¡ch hÃ ng nÃ o(láº¥y tá»« Ä‘áº§u vÃ o) | CÃ¡ch hÃ³a Ä‘Æ¡n cÃ³ serial khÃ¡c nhau phÃ¢n cÃ¡ch bá»Ÿi dáº¥u â€œ;â€CÃ¡c sá»‘ hÃ³a Ä‘Æ¡n phÃ¢n cÃ¡ch bá»Ÿi â€œ,â€ |

_Ghi chÃº:_

Káº¿t quáº£ tráº£ vá» : Tiá»n tá»‘ ERR ğŸ¡ª cÃ³ lá»—i khi thá»±c hiá»‡n hÃ m

Tiá»n tá»‘ OK ğŸ¡ª thá»±c hiá»‡n phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ng

Chá»‰ cháº¥p nháº­n phÃ¡t hÃ nh lÃ´ tá»‘i Ä‘a 5000 hÃ³a Ä‘Æ¡n, hoáº·c cáº¥u hÃ¬nh theo tá»«ng app.

**Cáº¥u trÃºc XMLData, trÆ°á»ng há»£p khÃ´ng cÃ³ cÃ¡c trÆ°á»ng má»Ÿ rá»™ng** ( cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c)

<Invoices>

<Inv>

<key>**GiÃ¡ trá»‹ khÃ³a Ä‘á»ƒ phÃ¢n biá»‡t hÃ³a Ä‘Æ¡n xuáº¥t cho khÃ¡ch hÃ ng nÃ o**</key>

<Invoice>

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod>**PhÆ°Æ¡ng thá»©c thanh toÃ¡n**</PaymentMethod>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<Products>

<Product>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n\***</Amount>

</Product>

</Products>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

</Invoice>

</Inv>

<Inv>**...**</Inv>

</Invoices>

**Cáº¥u trÃºc XMLData, trÆ°á»ng há»£p cÃ³ cÃ¡c trÆ°á»ng má»Ÿ rá»™ng** ( cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c)

<Invoices>

<Inv>

<key>**GiÃ¡ trá»‹ khÃ³a Ä‘á»ƒ phÃ¢n biá»‡t hÃ³a Ä‘Æ¡n xuáº¥t cho khÃ¡ch hÃ ng nÃ o**</key>

<Invoice>

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod>**PhÆ°Æ¡ng thá»©c thanh toÃ¡n**</PaymentMethod>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<Products>

<Product>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n\***</Amount>

</Product>

</Products>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

<Extras>

<Extra\_item>

<Extra\_Name>**Nameâ€™s Extra**</Extra\_Name>

<Extra\_Value>**valueâ€™s Extra** </Extra\_Value>

</Extra\_item>

</Extras>

</Invoice>

</Inv>

<Inv>**...**</Inv>

</Invoices>

### Cáº­p nháº­t dá»¯ liá»‡u khÃ¡ch hÃ ng

URL

Int **UpdateCus** (string xmlCusData, string username, string pass, int? convert)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p cáº­p nháº­t thÃ´ng tin khÃ¡ch hÃ ng

HTTP METHOD

POST

REQUEST BODY

*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlCusData**: chuá»—i xml dá»¯ liá»‡u khÃ¡ch hÃ ng ( theo mÃ´ táº£)
*   **convert:** Máº·c Ä‘á»‹nh lÃ  0, 0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| -1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm khÃ¡ch hÃ ng |  |
| -2 | KhÃ´ng import Ä‘Æ°á»£c khÃ¡ch hÃ ng vÃ o db | CÃ³ rollback db |
| -3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh | Chá»‰ cáº§n 1 customer trong chuá»—i xml khÃ´ng há»£p lá»‡, khÃ´ng thá»±c hiá»‡n update trÃªn táº¥t cáº£ dá»¯ liá»‡u Ä‘Æ°a vÃ o |
| N | Sá»‘ lÆ°á»£ng khÃ¡ch hÃ ng Ä‘Ã£ import vÃ  update | N>0, N lÃ  kiá»ƒu integer |

**Cáº¥u trÃºc cá»§a xmlCusData (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<Customers>

<Customer>

<Name>**TÃªn khÃ¡ch hÃ ng\***</Name>

<Code>**MÃ£ khÃ¡ch hÃ ng\***</Code>

<Account>**TÃ i khoáº£n Ä‘Äƒng nháº­p**</Account>

<TaxCode>**MÃ£ sá»‘ thuáº¿ (báº¯t buá»™c vá»›i khÃ¡ch hÃ ng lÃ  doanh nghiá»‡p)**</TaxCode>

<Address>**Äá»‹a chá»‰thanh toÃ¡n\***</Address>

<BankAccountName>**TÃªn tÃ i khoáº£n ngÃ¢n hÃ ng**</BankAccountName>

<BankName>**TÃªn ngÃ¢n hÃ ng**</BankName>

<BankNumber>**Sá»‘ tÃ i khoáº£n**</BankNumber>

<Email>**Email**</Email>

<Fax>**Sá»‘ fax**</Fax>

<Phone>**Äiá»‡n thoáº¡i**</Phone>

<ContactPerson>**LiÃªn há»‡**</ContactPerson>

<RepresentPerson>**NgÆ°á»i Ä‘áº¡i diá»‡n**</RepresentPerson>

<CusType>**Loáº¡i khÃ¡ch hÃ ng (1: Doanh nghiá»‡p/0: CÃ¡ nhÃ¢n)\***</CusType>

<IsEmail>**KhÃ¡ch hÃ ng nháº­n gá»­i mail khi phÃ¡t hÃ nh hay khÃ´ng, 1: CÃ³ nháº­n/0: khÃ´ng nháº­n (Náº¿u khÃ´ng cÃ³ tháº» nÃ y máº·c Ä‘á»‹nh cÃ³ nháº­n mail)**</IsEmail >

</Customer>

<Customer>**...**</Customer>

</Customers>

### XÃ³a hÃ³a Ä‘Æ¡n chÆ°a phÃ¡t hÃ nh theo danh sÃ¡ch fkey

URL

string **deleteInvoiceByFkey**(string lstFkey, string username, string password, string Account, string ACpass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p xÃ³a 1 hoáº·c nhiá»u hÃ³a Ä‘Æ¡n chÆ°a phÃ¡t hÃ nh theo danh sÃ¡ch fkey truyá»n vÃ o.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **lstFkey**: danh sÃ¡ch fkey cáº§n xÃ³a bá», cÃ¡c Fkey phÃ¢n biá»‡t nhau báº±ng â€œ\_â€)

**VD:**012013\_022013\_032013

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai, hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty |  |
| ERR:10 | Sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng cho phÃ©p | Máº·c Ä‘á»‹nh 5000 hoáº·c theo cáº¥u hÃ¬nh tá»«ng app |
| ERR:20 | Pattern vÃ  Serial khÃ´ng há»£p lá»‡ |  |
| ERR:5 | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |  |
| OK:fkey1,fkey2 | XÃ³a hÃ³a Ä‘Æ¡n thÃ nh cÃ´ng | Tráº£ vá» danh sÃ¡ch fkey cÃ¡c hÃ³a Ä‘Æ¡n xÃ³a thÃ nh cÃ´ng |

### ThÃªm má»›i hÃ³a Ä‘Æ¡n

URL

string string **ImportInv**(string xmlInvData, string username, string password, int convert = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº¡o má»›i hÃ³a Ä‘Æ¡n tá»« chuá»—i xml Ä‘áº§u vÃ o theo chuáº©n mÃ´ táº£

HTTP METHOD

POST

REQUEST BODY

*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData:** Chuá»—i xml chá»©a thÃ´ng tin hÃ³a Ä‘Æ¡n

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai |  |
| ERR:3 | Äá»‹nh dáº¡ng xml cá»§a hÃ³a Ä‘Æ¡n sai cáº¥u trÃºc |  |
| ERR:5 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty | Máº·c Ä‘á»‹nh 5000 hoáº·c theo cáº¥u hÃ¬nh tá»«ng app |
| ERR:20 | Pattern vÃ  serial khÃ´ng há»£p lá»‡ |  |
| ERR:6 | KhÃ´ng cÃ²n dÆ° sá»‘ hÃ³a Ä‘Æ¡n Ä‘á»ƒ phÃ¡t hÃ nh |  |
| ERR:10 | VÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng hÃ³a Ä‘Æ¡n táº¡o cho phÃ©p (khÃ´ng Ä‘Æ°á»£c vÆ°á»£t quÃ¡ 5000HÄ) |  |
| ERR:5 | Lá»—i há»‡ thá»‘ng |  |
| ERR:35 | CÃ´ng ty Ä‘Äƒng kÃ½ DK01 cáº£ cÃ³ mÃ£, khÃ´ng mÃ£. Táº¡o cáº£ kÃ½ hiá»‡u cáº£ 2 dáº£i cÃ³ mÃ£ vÃ  khÃ´ng mÃ£ sáº½ yÃªu cáº§u báº¯t buá»™c truyá»n pattern, serial |  |
| "OK:" + pattern + ";" + serial + "-" + invKeyList | Táº¡o hÃ³a Ä‘Æ¡n thÃ nh cÃ´ng | Tráº£ vá» message OK kÃ¨m theo Pattern, Serial vÃ  danh sÃ¡ch fkey hÃ³a Ä‘Æ¡n táº¡o má»›i thÃ nh cÃ´ng |

**Äá»‹nh dáº¡ng chuá»—i xml Ä‘áº§u vÃ o, trÆ°á»ng há»£p khÃ´ng dÃ¹ng cÃ¡c trÆ°á»ng má»Ÿ rá»™ng**

<Invoices>

<Inv>

<key>**Fkey cua hoa don**</key>

<Invoice>

<CusCode>**MÃ£ khÃ¡ch hÃ ng**</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng**</CusName>

<CusAddress>**Äá»‹a chá»‰ KH**</CusAddress>

<CusPhone>**01678567028**</CusPhone>

<CusTaxCode>**0105762069-001**</CusTaxCode>

<PaymentMethod>**TM**</PaymentMethod>

<KindOfService>**072020**</KindOfService>

<Products>

<Product>

<ProdName>**TÃªn sáº£n pháº©m**</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**1**</ProdQuantity>

<ProdPrice>**2**</ProdPrice>

<Amount>**3**</Amount>

<Remark>**Remark**</Remark>

<Total>**4**</Total>

<VATRate>**50**</VATRate>

<VATAmount>**6**</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**7**</Discount>

<DiscountAmount>**8**</DiscountAmount>

<IsSum> **TÃ­nh cháº¥t \* (0-HÃ ng hÃ³a, dá»‹ch vá»¥; 1-Khuyáº¿n máº¡i; 2-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)**</IsSum>

</Product>

</Products>

<Total>**9**</Total>

<DiscountAmount>**10**</DiscountAmount>

<VATRate>**11**</VATRate>

<VATAmount>**12**</VATAmount>

<Amount>**13**</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯**</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**15/07/2020**</ArisingDate>

<PaymentStatus>**1**</PaymentStatus>

<EmailDeliver>**kimnganhoa123@gmail.com**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**0105762069-002**</ComTaxCode>

<ComFax>**0462952034**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue0>**15**</GrossValue0>

<VatAmount0>**16**</VatAmount0>

<GrossValue5>**17**</GrossValue5>

<VatAmount5>**18**</VatAmount5>

<GrossValue10>**19**</GrossValue10>

<VatAmount10>**20**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**0462952033**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<GrossValue>**14**</GrossValue>

<CreateDate>**30/07/2020**</CreateDate>

<DiscountRate>**21**</DiscountRate>

<CusSignStatus>**1.1**</CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax>**22**</GrossValue\_NonTax>

<CurrencyUnit>**USD**</CurrencyUnit>

<ExchangeRate>**23**</ExchangeRate>

<ConvertedAmount>**24**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

</Invoice>

</Inv>

<key></key>

<Invoice>

<CusCode></CusCode>

<CusName></CusName>

<CusAddress></CusAddress>

<CusPhone>**01678567028**</CusPhone>

<CusTaxCode>**0105762069-001**</CusTaxCode>

<PaymentMethod>**TM**</PaymentMethod>

<KindOfService>**072020**</KindOfService>

<Products>

<Product>

<ProdName>**TÃªn sáº£n pháº©m**</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**1**</ProdQuantity>

<ProdPrice>**2**</ProdPrice>

<Amount>**3**</Amount>

<Remark>**Remark**</Remark>

<Total>**4**</Total>

<VATRate>**50**</VATRate>

<VATAmount>**6**</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**7**</Discount>

<DiscountAmount>**8**</DiscountAmount>

<IsSum>**1**</IsSum>

</Product>

</Products>

<Total>**9**</Total>

<DiscountAmount>**10**</DiscountAmount>

<VATRate>**11**</VATRate>

<VATAmount>**12**</VATAmount>

<Amount>**13**</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯**</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**15/07/2020**</ArisingDate>

<PaymentStatus>**1**</PaymentStatus>

<EmailDeliver>**kimnganhoa123@gmail.com**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**0105762069-002**</ComTaxCode>

<ComFax>**0462952034**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue>**14**</GrossValue>

<GrossValue0>**15**</GrossValue0>

<VatAmount0>**16**</VatAmount0>

<GrossValue5>**17**</GrossValue5>

<VatAmount5>**18**</VatAmount5>

<GrossValue10>**19**</GrossValue10>

<VatAmount10>**20**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**0462952033**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**30/07/2020**</CreateDate>

<DiscountRate>**21**</DiscountRate>

<CusSignStatus>**1.1**</CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax>**22**</GrossValue\_NonTax>

<CurrencyUnit>**USD**</CurrencyUnit>

<ExchangeRate>**23**</ExchangeRate>

<ConvertedAmount>**24**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

</Invoice>

</Inv>

</Invoices>

**Äá»‹nh dáº¡ng chuá»—i xml Ä‘áº§u vÃ o, trÆ°á»ng há»£p cÃ³ dÃ¹ng thÃªm cÃ¡c trÆ°á»ng má»Ÿ rá»™ng**

<Invoices>

<Inv>

<key>**Fkey cua hoa don**</key>

<Invoice>

<CusCode>**MÃ£ khÃ¡ch hÃ ng**</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng**</CusName>

<CusAddress>**Äá»‹a chá»‰ KH**</CusAddress>

<CusPhone>**01678567028**</CusPhone>

<CusTaxCode>**0105762069-001**</CusTaxCode>

<PaymentMethod>**TM**</PaymentMethod>

<KindOfService>**072020**</KindOfService>

<Products>

<Product>

<ProdName>**TÃªn sáº£n pháº©m**</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**1**</ProdQuantity>

<ProdPrice>**2**</ProdPrice>

<Amount>**3**</Amount>

<Remark>**Remark**</Remark>

<Total>**4**</Total>

<VATRate>**50**</VATRate>

<VATAmount>**6**</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**7**</Discount>

<DiscountAmount>**8**</DiscountAmount>

<IsSum>**1**</IsSum>

</Product>

</Products>

<Total>**9**</Total>

<DiscountAmount>**10**</DiscountAmount>

<VATRate>**11**</VATRate>

<VATAmount>**12**</VATAmount>

<Amount>**13**</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯**</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<Extras>

<Extra\_item>

<Extra\_Name>**Nameâ€™s Extra**</Extra\_Name>

<Extra\_Value>**100**</Extra\_Value>

</Extra\_item>

</Extras>

<ArisingDate>**15/07/2020**</ArisingDate>

<PaymentStatus>**1**</PaymentStatus>

<EmailDeliver>**kimnganhoa123@gmail.com**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**0105762069-002**</ComTaxCode>

<ComFax>**0462952034**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue0>**15**</GrossValue0>

<VatAmount0>**16**</VatAmount0>

<GrossValue5>**17**</GrossValue5>

<VatAmount5>**18**</VatAmount5>

<GrossValue10>**19**</GrossValue10>

<VatAmount10>**20**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**0462952033**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<GrossValue>**14**</GrossValue>

<CreateDate>**30/07/2020**</CreateDate>

<DiscountRate>**21**</DiscountRate>

<CusSignStatus>**1.1**</CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax>**22**</GrossValue\_NonTax>

<CurrencyUnit>**USD**</CurrencyUnit>

<ExchangeRate>**23**</ExchangeRate>

<ConvertedAmount>**24**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

</Invoice>

</Inv>

<key></key>

<Invoice>

<CusCode></CusCode>

<CusName></CusName>

<CusAddress></CusAddress>

<CusPhone>**01678567028**</CusPhone>

<CusTaxCode>**0105762069-001**</CusTaxCode>

<PaymentMethod>**TM**</PaymentMethod>

<KindOfService>**072020**</KindOfService>

<Products>

<Product>

<ProdName>**TÃªn sáº£n pháº©m**</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**1**</ProdQuantity>

<ProdPrice>**2**</ProdPrice>

<Amount>**3**</Amount>

<Remark>**Remark**</Remark>

<Total>**4**</Total>

<VATRate>**50**</VATRate>

<VATAmount>**6**</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**7**</Discount>

<DiscountAmount>**8**</DiscountAmount>

<IsSum>**1**</IsSum>

</Product>

</Products>

<Total>**9**</Total>

<DiscountAmount>**10**</DiscountAmount>

<VATRate>**11**</VATRate>

<VATAmount>**12**</VATAmount>

<Amount>**13**</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯**</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**15/07/2020**</ArisingDate>

<PaymentStatus>**1**</PaymentStatus>

<EmailDeliver>**kimnganhoa123@gmail.com**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**0105762069-002**</ComTaxCode>

<ComFax>**0462952034**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue>**14**</GrossValue>

<GrossValue0>**15**</GrossValue0>

<VatAmount0>**16**</VatAmount0>

<GrossValue5>**17**</GrossValue5>

<VatAmount5>**18**</VatAmount5>

<GrossValue10>**19**</GrossValue10>

<VatAmount10>**20**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**0462952033**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**30/07/2020**</CreateDate>

<DiscountRate>**21**</DiscountRate>

<CusSignStatus>**1.1**</CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax>**22**</GrossValue\_NonTax>

<CurrencyUnit>**USD**</CurrencyUnit>

<ExchangeRate>**23**</ExchangeRate>

<ConvertedAmount>**24**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

</Invoice>

</Inv>

</Invoices>

### Gá»­i láº¡i email thÃ´ng bÃ¡o hÃ³a Ä‘Æ¡n phÃ¡t hÃ nh

URL

public string **SendAgainEmailServ**(string Account, string ACpass, string username, string password, string xmlDataInvoiceEmail, string hdPattern, string Serial)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p gá»­i láº¡i email thÃ´ng bÃ¡o phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n tá»›i khÃ¡ch hÃ ng

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn cÃ³ quyá»n gá»­i mail
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlDataInvoiceEmail:** ThÃ´ng tin hÃ³a Ä‘Æ¡n cho ná»™i dung gá»­i mail
*   **hdPattern**: Máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **Serial:** KÃ½ hiá»‡u hÃ³a Ä‘Æ¡n

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai | TÃ i khoáº£n Ä‘Äƒng nháº­p sau hoáº·c khÃ´ng cÃ³ quyá»n thá»±c hiá»‡n tÃ¡c vá»¥ |
| ERR:21 | KhÃ´ng tÃ¬m Ä‘Æ°á»£c cÃ´ng ty, tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:3 | Dá»¯ liá»‡u Pattern Ä‘á»ƒ trá»‘ng |  |
| ERR:9 | Dá»¯ liá»‡u Serial Ä‘á»ƒ trá»‘ng |  |
| ERR:8 | Dá»¯ liá»‡u Fkey Ä‘á»ƒ trá»‘ng trong chuá»—i xml gá»­i lÃªn |  |
| ERR:10 | Sá»‘ lÆ°á»£ng fkey truyá»n vÃ o lá»›n hÆ¡n giá»›i háº¡n tá»‘i Ä‘a cho phÃ©p | Máº·c Ä‘á»‹nh lÃ  5000 hoáº·c theo cáº¥u hÃ¬nh cho tá»«ng app |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng bÃ¡o phÃ¡t hÃ nh há»£p lá»‡ |  |
| ERR:4 | KhÃ´ng tÃ¬m Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n Ä‘á»ƒ táº¡o vÃ  gá»­i láº¡i mail |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y cÃ¢u hÃ¬nh IDeliver Ä‘á»ƒ táº¡o vÃ  gá»­i láº¡i gá»­i mail |  |
| ERR:7 | KhÃ´ng gá»­i Ä‘Æ°á»£c email nÃ o thÃ nh cÃ´ng |  |
| ERR:5 | Lá»—i há»‡ thá»‘ng |  |
| OK | Gá»­i thÃ nh cÃ´ng |  |

**Cáº¥u trÃºc chuá»—i xml gá»­i lÃªn:**

<Invoices>

<Inv>

<Fkey>**Fkey1(\*)**</Fkey><EmailDeliver>**Email1 (\*)**</EmailDeliver>

<Fkey>**Fkey2(\*)**</Fkey><EmailDeliver>**Email2 (\*)**</EmailDeliver>

</Inv>

</Invoices>

### Láº¥y thÃ´ng tin chá»©ng thÆ° sá»‘ hiá»‡n táº¡i cá»§a Ä‘Æ¡n vá»‹

URL

String **GetCertInfo** (string userName, string password)

DESCRIPTION

ÄÃ¢y lÃ  web service láº¥y thÃ´ng tin chá»©ng thÆ° sá»‘ hiá»‡n táº¡i cá»§a Ä‘Æ¡n vá»‹.

HTTP METHOD

POST

REQUEST BODY

*   **userName/password**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| Chuá»—i base64 | Chuá»—i base64 tráº£ vá» cá»§a chuá»—i XML thÃ´ng tin chá»©ng thÆ° |  |

Cáº¥u trÃºc chuá»—i XML tráº£ vá»:

<Certificate>

<OwnCA><!\[CDATA\[\]\]></OwnCA>

<SerialNumber></SerialNumber>

<ValidFrom>**dd/MM/yyyy**</ValidFrom>

<ValidTo>**dd/MM/yyyy**</ValidTo>

<OrganizationCA><!\[CDATA\[\]\]></OrganizationCA>

</Certificate>

Trong Ä‘Ã³: tag <OwnCA>: TÃªn tá»• chá»©c sá»Ÿ há»¯u

tag <SerialNumber>: Serial chá»©ng thÆ°

tag <ValidFrom>: NgÃ y hiá»‡u lá»±c cá»§a chá»©ng thÆ°

tag <ValidTo>: NgÃ y háº¿t háº¡n cá»§a chá»©ng thÆ°

tag <OrganizationCA>: NhÃ  cung cáº¥p chá»©ng thÆ°

### Cáº­p nháº­t loáº¡i hÃ¬nh kÃ½ sá»‘ vÃ  chá»©ng thÆ° sá»‘

URL

String **UpdateCertificate**(string Account, string ACpass,Â  string certinfo, string serialCert, int certType, int id = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service Ä‘Äƒng kÃ½/cáº­p nháº­t loáº¡i hÃ¬nh kÃ½ sá»‘ vÃ  chá»©ng thÆ° sá»‘ cá»§a Ä‘Æ¡n vá»‹.

HTTP METHOD

POST

REQUEST BODY

*   **Account / ACpass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).Â 
*   **Certinfo**: Chuá»—i thÃ´ng tin chá»©ng thÆ° sá»‘
*   **serialCert**: Serial chá»©ng thÆ° sá»‘
*   **certType**: loáº¡i hÃ¬nh kÃ½ sá»‘ (4-token; 6-SmartCA)
*   **id**: giÃ¡ trá»‹ id chá»©ng thÆ° sá»‘ (=0 náº¿u lÃ  thÃªm má»›i)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:41 | ÄÃ£ tá»“n táº¡i chá»©ng thÆ° nÃ y trong há»‡ thá»‘ng |  |
| ERR:42 | Chá»©ng thÆ° Ä‘Ã£ Ä‘Äƒng kÃ½ vá»›i thuáº¿, khÃ´ng thá»ƒ thay Ä‘á»•i. HÃ£y Ä‘Äƒng kÃ½ tá» khai thay Ä‘á»•i thÃ´ng tin. |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| int | GiÃ¡ trá»‹ id chá»©ng thÆ° sá»‘ tráº£ vá» sau khi thá»±c hiá»‡n thÃ nh cÃ´ng |  |

### XÃ³a chá»©ng thÆ° sá»‘

URL

String **DeleteCertificate**(string Account, string ACpass, int id = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service xÃ³a thÃ´ng tin chá»©ng thÆ° sá»‘ cá»§a Ä‘Æ¡n vá»‹.

HTTP METHOD

POST

REQUEST BODY

*   **Account / ACpass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).Â Â 
*   **id**: giÃ¡ trá»‹ id chá»©ng thÆ° sá»‘ cáº§n xÃ³a.

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:41 | ÄÃ£ tá»“n táº¡i chá»©ng thÆ° nÃ y trong há»‡ thá»‘ng |  |
| ERR:42 | Chá»©ng thÆ° Ä‘Ã£ Ä‘Äƒng kÃ½ vá»›i thuáº¿, khÃ´ng thá»ƒ thay Ä‘á»•i. HÃ£y Ä‘Äƒng kÃ½ tá» khai thay Ä‘á»•i thÃ´ng tin. |  |
| ERR:43 | Chá»©ng thÆ° khÃ´ng pháº£i cá»§a cÃ´ng ty |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| OK | Thá»±c hiá»‡n xÃ³a thÃ nh cÃ´ng |  |

### Danh sÃ¡ch chá»©ng thÆ° sá»‘ cá»§a Ä‘Æ¡n vá»‹

URL

String **GetCertificates** (string userName, string password)

DESCRIPTION

ÄÃ¢y lÃ  web service láº¥y thÃ´ng tin chá»©ng thÆ° sá»‘ hiá»‡n táº¡i cá»§a Ä‘Æ¡n vá»‹.

HTTP METHOD

POST

REQUEST BODY

*   **userName/password**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).Â 

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| Chuá»—i base64 | Chuá»—i base64 tráº£ vá» cá»§a chuá»—i XML thÃ´ng tin danh sÃ¡ch chá»©ng thÆ° |  |

Cáº¥u trÃºc chuá»—i XML tráº£ vá»:Â 

**<Certificates>**

**<Certificate>**

**<OwnCA>**

**<!\[CDATA\[\]\]>**

**</OwnCA>**

**<SerialNumber></SerialNumber>**

**<ValidFrom> dd/MM/yyyy </ValidFrom>**

**<ValidTo> dd/MM/yyyy </ValidTo>**

**<OrganizationCA>**

**<!\[CDATA\[\]\]>**

**</OrganizationCA>**

**<Status></Status>**

**<CertType></CertType>**

**</Certificate>**

**</Certificates>**

Trong Ä‘Ã³: Â  Â  Â  Â  Â  Â  tag <OwnCA>: TÃªn tá»• chá»©c sá»Ÿ há»¯u

tag <SerialNumber>: Serial chá»©ng thÆ°

tag <ValidFrom>: NgÃ y hiá»‡u lá»±c cá»§a chá»©ng thÆ°

tag <ValidTo>:Â  NgÃ y háº¿t háº¡n cá»§a chá»©ng thÆ°

tag <OrganizationCA>: NhÃ  cung cáº¥p chá»©ng thÆ°

tag <Status>: Tráº¡ng thÃ¡i chá»©ng thÆ° (0-chÆ°a sá»­ dá»¥ng, 1-Ä‘ang sá»­ dá»¥ng)

tag <CertType>: Loáº¡i chá»©ng thÆ° (1-token; 6-SmartCA)

### Thay Ä‘á»•i máº­t kháº©u

URL

String **resetPassword**(string Account, string oldPass, string newPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thay Ä‘á»•i máº­t kháº©u.

HTTP METHOD

POST

REQUEST BODY

*   **Account**: TÃªn tÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ Ä‘Äƒng nháº­p vÃ o há»‡ thá»‘ng.Â Â 
*   **oldPass**: máº­t kháº©u cÅ©.
*   **newPass**: máº­t kháº©u má»›i.

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| MSG_Update_006 | Máº­t kháº©u khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng. |  |
| MSG_Update_001 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin tÃ i khoáº£n. |  |
| MSG_Update_004 | Máº­t kháº©u cÅ© khÃ´ng chÃ­nh xÃ¡c. |  |
| MSG_Update_003 | Máº­t kháº©u má»›i khÃ´ng Ä‘Æ°á»£c trÃ¹ng vá»›i máº­t kháº©u cÅ©. |  |
| MSG_Update_005 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| MSG_Update_002 | Thay Ä‘á»•i máº­t kháº©u thÃ nh cÃ´ng. |  |

## NhÃ³m cÃ¡c hÃ m webservice liÃªn quan Ä‘áº¿n tra cá»©u hÃ³a Ä‘Æ¡n ( PortalService)

### Download hÃ³a Ä‘Æ¡n

URL

String **downloadInv**(string invToken, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» chuá»—i xml cá»§a hÃ³a Ä‘Æ¡n

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **invToken :** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y Pattern |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:11 | HÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n nÃªn khÃ´ng xem Ä‘Æ°á»£c |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| chuá»—i_Xml_tráº£_vá» | Tráº£ vá» chuá»—i Xml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng string Xml |

### Download hÃ³a Ä‘Æ¡n vá»›i cáº£ cÃ¡c hÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n

URL

String **downloadInvNoPay** (string invToken, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» chuá»—i xml cá»§a hÃ³a Ä‘Æ¡n, cho phÃ©p táº£i cÃ¡c hÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **invToken :** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y Pattern |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:11 | HÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n nÃªn khÃ´ng xem Ä‘Æ°á»£c |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| chuá»—i_Xml_tráº£_vá» | Tráº£ vá» chuá»—i Xml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng string Xml |

### Download hÃ³a Ä‘Æ¡n theo Fkey

URL

String **downloadInvFkey** (string fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» chuá»—i xml cá»§a hÃ³a Ä‘Æ¡n theo fkey truyá»n lÃªn

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **fkey :** Chuá»—i fkey xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y dáº£i thÃ´ng bÃ¡o phÃ¡t hÃ nh |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:11 | HÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n nÃªn khÃ´ng xem Ä‘Æ°á»£c |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| chuá»—i_Xml_tráº£_vá» | Tráº£ vá» chuá»—i Xml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng string Xml |

### Download hÃ³a Ä‘Æ¡n theo fkey, khÃ´ng kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n

URL

String **downloadInvFkeyNoPay** (string fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» chuá»—i xml cá»§a hÃ³a Ä‘Æ¡n theo fkey truyá»n lÃªn, cho phÃ©p táº£i cáº£ hÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **fkey :** Chuá»—i fkey xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y dáº£i thÃ´ng bÃ¡o phÃ¡t hÃ nh |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| chuá»—i_Xml_tráº£_vá» | Tráº£ vá» chuá»—i Xml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng string Xml |

### Download hÃ³a Ä‘Æ¡n má»›i táº¡o theo Fkey Ä‘á»‹nh dáº¡ng Pdf

URL

String **downloadNewInvPDFFkey**(string fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» dáº¡ng pdf cá»§a hÃ³a Ä‘Æ¡n má»›i táº¡o theo Fkey truyá»n lÃªn.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **fkey:** Chuá»—i fkey xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Fkey truyá»n lÃªn rá»—ng |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y dáº£i thÃ´ng bÃ¡o phÃ¡t hÃ nh |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| Chuá»—i base64 | Tráº£ vá» chuá»—i base64 tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n. LÆ°u chuá»—i nÃ y thÃ nh file .pdf Ä‘á»ƒ Ä‘Æ°á»£c file PDF |  |

### Download hÃ³a Ä‘Æ¡n Ä‘á»‹nh dáº¡ng Pdf

URL

String **downloadInvPDF**(string invToken, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» dáº¡ng pdf cá»§a hÃ³a Ä‘Æ¡n theo token truyá»n lÃªn.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **invToken:** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y dáº£i thÃ´ng bÃ¡o phÃ¡t hÃ nh |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:11 | HÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n nÃªn khÃ´ng xem Ä‘Æ°á»£c |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| Chuá»—i base64 | Tráº£ vá» chuá»—i base64 tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n. LÆ°u chuá»—i nÃ y thÃ nh file .pdf Ä‘á»ƒ Ä‘Æ°á»£c file PDF |  |

### Download hÃ³a Ä‘Æ¡n Ä‘á»‹nh dáº¡ng Pdf, khÃ´ng kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n

URL

String **downloadInvPDFFkeyNoPay** (string fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» dáº¡ng pdf cá»§a hÃ³a Ä‘Æ¡n theo fkey truyá»n lÃªn, cho phÃ©p táº£i cáº£ hÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **fkey:** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y dáº£i thÃ´ng bÃ¡o phÃ¡t hÃ nh |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| Chuá»—i base64 | Tráº£ vá» chuá»—i base64 tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n. LÆ°u chuá»—i nÃ y thÃ nh file .pdf Ä‘á»ƒ Ä‘Æ°á»£c file PDF |  |

### Láº¥y danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»« sá»‘, Ä‘áº¿n sá»‘

URL

string **listInvFromNoToNo (**string invFromNo, string invToNo, string invPattern, string invSerial, string userName, string userPass**)**

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p tráº£ vá» thÃ´ng tin cÆ¡ báº£n cá»§a hÃ³a Ä‘Æ¡n dáº¡ng chuá»—i xml tá»« sá»‘ hÃ³a Ä‘Æ¡n Ä‘áº¿n sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o.

_ChÃº Ã½_: tá»‘i Ä‘a láº¥y ra 100 hÃ³a Ä‘Æ¡n hoáº·c theo cáº¥u hÃ¬nh trÃªn tá»«ng app

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **invFromNo:** Sá»‘ báº¯t Ä‘áº§u
*   **invToNo:** Sá»‘ káº¿t thÃºc
*   **invPattern**: Máº«u sá»‘
*   **invSerial**: KÃ½ hiá»‡u

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty |  |
| ERR: | CÃ³ lá»—i xáº£y ra |  |
| chuá»—i_xml_tráº£_vá» | Tráº£ vá» chuá»—i xml theo cáº¥u trÃºc |  |

**Cáº¥u trÃºc cá»§a chuá»—i xml tráº£ vá»**

<Data>

<Item >**//tÆ°Æ¡ng á»©ng vá»›i 1 hÃ³a Ä‘Æ¡n**

<index>**ThÃ¡ng xuáº¥t hÃ³a Ä‘Æ¡n** </index>

<invToken>**Chuá»—i token Ä‘á»ƒ xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n(pattern;Serial;Sá»‘ hÃ³a Ä‘Æ¡n)** </invToken>

<fkey>**Fkey cá»§a hÃ³a Ä‘Æ¡n**</fkey>

<name>**TÃªn hÃ³a Ä‘Æ¡n**</name>

<publishDate>**NgÃ y phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n**</publishDate>

<signStatus>**Tráº¡ng thÃ¡i kÃ­ khÃ¡ch hÃ ng**</signStatus>

<total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿**</total>

<amount>**Tá»•ng tiá»n cá»§a hÃ³a Ä‘Æ¡n** </amount>

<pattern>**Máº«u hÃ³a Ä‘Æ¡n**<pattern>

<serial>**Serial hÃ³a Ä‘Æ¡n**</serial>

<invNum>**Sá»‘ hÃ³a Ä‘Æ¡n**</invNum>

<status>**Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n**</status>

<cusname>**TÃªn ngÆ°á»i mua hÃ ng**</cusname>

<payment>**Tráº¡ng thÃ¡i thanh toÃ¡n**</payment >

</Item >

<Item >â€¦</Item > **//HÃ³a Ä‘Æ¡n khÃ¡c**

</Data>

### TÃ¬m kiáº¿m hÃ³a Ä‘Æ¡n theo khÃ¡ch hÃ ng

URL

string **listInvByCus**(string cusCode, string fromDate, string toDate, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p tráº£ vá» thÃ´ng tin cÆ¡ báº£n cá»§a hÃ³a Ä‘Æ¡n dáº¡ng chuá»—i xml theo fkey truyá»n vÃ o

HTTP METHOD

POST

REQUEST BODY

*   **cusCode**\*: MÃ£ Ä‘Æ¡n vá»‹ cáº§n láº¥y hÃ³a Ä‘Æ¡n vá»
*   **fromDate:** ngÃ y báº¯t Ä‘áº§u tÃ¬m kiáº¿m. String theo Ä‘á»‹nh dáº¡ng dd/MM/yyyy (20/05/2013). Náº¿u truyá»n vÃ o null tÃ¬m kiáº¿m theo táº¥t cáº£ cÃ¡c ngÃ y
*   **toDate:** ngÃ y káº¿t thÃºc tÃ¬m kiáº¿m. String theo Ä‘á»‹nh dáº¡ng dd/MM/yyyy. Náº¿u truyá»n vÃ o null tÃ¬m kiáº¿m theo táº¥t cáº£ cÃ¡c ngÃ y
*   **userName/userPass**\***:** account/password Ä‘á»ƒ gá»i web services. Do Há»‡ thá»‘ng HÄÄT cung cáº¥p.

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:3 | KhÃ´ng tá»“n tÃ i khÃ¡ch hÃ ng tÆ°Æ¡ng á»©ng vá»›i cusCode |  |
| ERR:4 | CÃ´ng ty chÆ°a Ä‘Æ°á»£c Ä‘Äƒng kÃ­ máº«u hÃ³a Ä‘Æ¡n nÃ o |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty |  |
| ERR: | CÃ³ lá»—i xáº£y ra |  |
| OK: chuá»—i_xml_tráº£_vá» | thÃ´ng tin cÃ¡c hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh, Ä‘Ã£ sá»­a Ä‘á»•i, Ä‘Ã£ thay tháº¿, Ä‘Ã£ sá»­ dá»¥ng cá»§a cÃ´ng ty, cáº¥u trÃºc dÆ°á»›i dáº¡ng chuá»—i xml. Má»—i tháº» <Inv> tÆ°Æ¡ng á»©ng vá»›i má»™t hÃ³a Ä‘Æ¡nTháº» <status> chá»©a tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n: 1- hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh, 3- hÃ³a Ä‘Æ¡n bá»‹ thay tháº¿, 4- hÃ³a Ä‘Æ¡n bá»‹ Ä‘iá»u chá»‰nh |  |

**Cáº¥u trÃºc cá»§a chuá»—i xml tráº£ vá»**

<Data>

<Item > **//tÆ°Æ¡ng á»©ng vá»›i 1 hÃ³a Ä‘Æ¡n**

<index>**ThÃ¡ng xuáº¥t hÃ³a Ä‘Æ¡n** </index>

<invToken>**Pattern;Serial;So hoa don** </invToken >

<fkey>**Fkey Ä‘á»ƒ xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n** </fkey >

<name>**TÃªn hÃ³a Ä‘Æ¡n**</name>

<publishDate>**NgÃ y phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n**</publishDate>

<signStatus>**Tráº¡ng thÃ¡i kÃ­ khÃ¡ch hÃ ng**</signStatus>

<total>**Tá»•ng tiá»n**</total>

<amount>**Tá»•ng tiá»n sau thuáº¿ cá»§a hÃ³a Ä‘Æ¡n**</amount>

<pattern>**Máº«u hÃ³a Ä‘Æ¡n**<pattern>

<serial>**Serial hÃ³a Ä‘Æ¡n**</serial>

<invNum>**Sá»‘ hÃ³a Ä‘Æ¡n**</invNum>

<status>**Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n(1,3,4)**</status >

<payment>**Tráº¡ng thÃ¡i thanh toÃ¡n (0/1)**</payment>

</Item >

<Item ></Item >**â€¦.HÃ³a Ä‘Æ¡n khÃ¡c**

</Data>

### TÃ¬m kiáº¿m hÃ³a Ä‘Æ¡n theo fkey

URL

string **listInvByCusFkey**(string fkey, string fromDate, string toDate, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p tráº£ vá» thÃ´ng tin cÆ¡ báº£n cá»§a hÃ³a Ä‘Æ¡n dáº¡ng chuá»—i xml theo fkey truyá»n vÃ o

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **fromDate:** ngÃ y báº¯t Ä‘áº§u tÃ¬m kiáº¿m. String theo Ä‘á»‹nh dáº¡ng dd/MM/yyyy (20/05/2020). Náº¿u truyá»n vÃ o null tÃ¬m kiáº¿m theo táº¥t cáº£ cÃ¡c ngÃ y
*   **toDate:** ngÃ y káº¿t thÃºc tÃ¬m kiáº¿m. String theo Ä‘á»‹nh dáº¡ng dd/MM/yyyy. Náº¿u truyá»n vÃ o null tÃ¬m kiáº¿m theo táº¥t cáº£ cÃ¡c ngÃ y
*   **fkey**\*: MÃ£ xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:4 | CÃ´ng ty chÆ°a Ä‘Æ°á»£c Ä‘Äƒng kÃ­ máº«u hÃ³a Ä‘Æ¡n nÃ o |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty |  |
| ERR: | CÃ³ lá»—i xáº£y ra |  |
| OK: chuá»—i_xml_tráº£_vá» | ThÃ´ng tin cÃ¡c hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh, Ä‘Ã£ sá»­a Ä‘á»•i, Ä‘Ã£ thay tháº¿, Ä‘Ã£ sá»­ dá»¥ng cá»§a cÃ´ng ty, cáº¥u trÃºc dÆ°á»›i dáº¡ng chuá»—i xml. Má»—i tháº» <Inv> tÆ°Æ¡ng á»©ng vá»›i má»™t hÃ³a Ä‘Æ¡nTháº» <status> chá»©a tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n: 1- hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh, 3- hÃ³a Ä‘Æ¡n bá»‹ thay tháº¿, 4- hÃ³a Ä‘Æ¡n bá»‹ Ä‘iá»u chá»‰nh |  |

**Cáº¥u trÃºc cá»§a chuá»—i xml tráº£ vá»**

<Data>

<Item > **//tÆ°Æ¡ng á»©ng vá»›i 1 hÃ³a Ä‘Æ¡n**

<index>**ThÃ¡ng xuáº¥t hÃ³a Ä‘Æ¡n** </index>

<cusCode>**MÃ£ khÃ¡ch hÃ ng**</cusCode>

<month></month>

<name>**TÃªn hÃ³a Ä‘Æ¡n**</name>

<publishDate>**NgÃ y phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n**</publishDate>

<signStatus>**Tráº¡ng thÃ¡i kÃ­ khÃ¡ch hÃ ng**</signStatus>

<pattern>**Máº«u hÃ³a Ä‘Æ¡n**<pattern>

<serial>**Serial hÃ³a Ä‘Æ¡n**</serial>

<invNum>**Sá»‘ hÃ³a Ä‘Æ¡n**</invNum>

<amount>**Tá»•ng tiá»n cá»§a hÃ³a Ä‘Æ¡n** </amount>

<status>**Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n**</status>

<cusname>**TÃªn ngÆ°á»i mua hÃ ng**</cusname>

<payment>**Tráº¡ng thÃ¡i thanh toÃ¡n**</payment >

<converted>**1: Ä‘Ã£ chuyá»ƒn Ä‘á»•i / 0: chÆ°a chuyá»ƒn Ä‘á»•i**</payment >

</Item >

<Item ></Item >**â€¦.HÃ³a Ä‘Æ¡n khÃ¡c**

</Data>

### Láº¥y thÃ´ng tin chi tiáº¿t hÃ³a Ä‘Æ¡n

URL

string **getInvView**(string invToken, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p tráº£ vá» Ä‘á»‹nh dáº¡ng html cá»§a hÃ³a Ä‘Æ¡n theo chuá»—i token truyá»n vÃ o

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **invToken :** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | CÃ´ng ty chÆ°a Ä‘Æ°á»£c Ä‘Äƒng kÃ­ máº«u hÃ³a Ä‘Æ¡n nÃ o |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty |  |
| ERR:11 | HÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n nÃªn khÃ´ng xem Ä‘Æ°á»£c |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| chuá»—i_hml_tráº£_vá» | Tráº£ vá» chuá»—i hml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng html |

### Láº¥y thÃ´ng tin chi tiáº¿t hÃ³a Ä‘Æ¡n, khÃ´ng kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n

URL

string **getInvViewNoPay** (string invToken, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p tráº£ vá» Ä‘á»‹nh dáº¡ng html cá»§a hÃ³a Ä‘Æ¡n theo chuá»—i token truyá»n vÃ o, khÃ´ng kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **invToken :** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | CÃ´ng ty chÆ°a Ä‘Æ°á»£c Ä‘Äƒng kÃ­ máº«u hÃ³a Ä‘Æ¡n nÃ o |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty |  |
| ERR:11 | HÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n nÃªn khÃ´ng xem Ä‘Æ°á»£c |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| chuá»—i_hml_tráº£_vá» | Tráº£ vá» chuá»—i hml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng html |

### Láº¥y thÃ´ng tin chi tiáº¿t hÃ³a Ä‘Æ¡n theo fkey

URL

string **getInvViewFkey** (string fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p tráº£ vá» Ä‘á»‹nh dáº¡ng html cá»§a hÃ³a Ä‘Æ¡n theo fkey truyá»n vÃ o

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **fkey :** Chuá»—i key xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:4 | CÃ´ng ty chÆ°a Ä‘Æ°á»£c Ä‘Äƒng kÃ­ máº«u hÃ³a Ä‘Æ¡n nÃ o |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty |  |
| ERR:11 | HÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n nÃªn khÃ´ng xem Ä‘Æ°á»£c |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| chuá»—i_hml_tráº£_vá» | Tráº£ vá» chuá»—i hml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng html |

### Láº¥y thÃ´ng tin chi tiáº¿t hÃ³a Ä‘Æ¡n táº¡o má»›i theo fkey

URL

string **getNewInvViewFkey**(string fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p tráº£ vá» Ä‘á»‹nh dáº¡ng html cá»§a hÃ³a Ä‘Æ¡n má»›i táº¡o theo fkey truyá»n vÃ o

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **fkey :** Chuá»—i key xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | Fkey truyá»n vÃ o rá»—ng |  |
| ERR:4 | CÃ´ng ty chÆ°a Ä‘Æ°á»£c Ä‘Äƒng kÃ­ máº«u hÃ³a Ä‘Æ¡n nÃ o |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| chuá»—i_html_tráº£_vá» | Tráº£ vá» chuá»—i html tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng html |

### Láº¥y thÃ´ng tin chi tiáº¿t cá»§a hÃ³a Ä‘Æ¡n theo fkey, khÃ´ng kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n

URL

string **getInvViewFkeyNoPay** (string fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p tráº£ vá» Ä‘á»‹nh dáº¡ng html cá»§a hÃ³a Ä‘Æ¡n theo fkey truyá»n vÃ o, khÃ´ng kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **fkey :** Chuá»—i key xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:4 | CÃ´ng ty chÆ°a Ä‘Æ°á»£c Ä‘Äƒng kÃ­ máº«u hÃ³a Ä‘Æ¡n nÃ o |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| chuá»—i_hml_tráº£_vá» | Tráº£ vá» chuá»—i hml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng html |

### Chuyá»ƒn Ä‘á»•i hÃ³a Ä‘Æ¡n chá»©ng minh nguá»“n gá»‘c, xuáº¥t xá»©

URL

string **convertForVerify** (string invToken, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n chuyá»ƒn Ä‘á»•i vá»›i má»¥c Ä‘Ã­ch chá»©ng minh nguá»“n gá»‘c xuáº¥t xá»© cho hÃ³a Ä‘Æ¡n. Má»—i hÃ³a Ä‘Æ¡n sáº½ chá»‰ Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i 1 láº§n duy nháº¥t.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **invToken :** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| chuá»—i_hml_tráº£_vá» | Tráº£ vá» chuá»—i hml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n Ä‘Ã£ chuyá»ƒn Ä‘á»•i | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng html |

### Chuyá»ƒn Ä‘á»•i hÃ³a Ä‘Æ¡n chá»©ng minh nguá»“n gá»‘c, xuáº¥t xá»­ theo fkey

URL

string **convertForVerifyFkey** (string fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n chuyá»ƒn Ä‘á»•i vá»›i má»¥c Ä‘Ã­ch chá»©ng minh nguá»“n gá»‘c xuáº¥t xá»© cho hÃ³a Ä‘Æ¡n. Má»—i hÃ³a Ä‘Æ¡n sáº½ chá»‰ Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i 1 láº§n duy nháº¥t.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng)
*   **fkey :** Chuá»—i key xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| chuá»—i_hml_tráº£_vá» | Tráº£ vá» chuá»—i hml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n Ä‘Ã£ chuyá»ƒn Ä‘á»•i | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng html |

### Chuyá»ƒn Ä‘á»•i lÆ°u trá»¯ hÃ³a Ä‘Æ¡n

URL

string **convertForStore** (string invToken, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n chuyá»ƒn Ä‘á»•i vá»›i má»¥c Ä‘Ã­ch lÆ°u trá»¯, má»—i hÃ³a Ä‘Æ¡n sáº½ Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i nhiá»u láº§n.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **invToken :** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | Chuá»—i token khÃ´ng chÃ­nh xÃ¡c |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘Ã£ chuyá»ƒn Ä‘á»•i |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| chuá»—i_hml_tráº£_vá» | Tráº£ vá» chuá»—i hml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n Ä‘Ã£ chuyá»ƒn Ä‘á»•i | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng html |

### Láº¥y thÃ´ng tin khÃ¡ch hÃ ng

URL

string **getCus(**string cusCode, string userName, string userPass**)**

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n láº¥y thÃ´ng tin khÃ¡ch hÃ ng dá»±a vÃ o mÃ£ khÃ¡ch hÃ ng truyá»n vÃ o

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **cusCode:** MÃ£ khÃ¡ch hÃ ng

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y khÃ¡ch hÃ ng hoáº·c cÃ´ng ty tÆ°Æ¡ng á»©ng | Kiá»ƒu string |
| ERR:3 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin khÃ¡ch hÃ ng |  |
| ERR: | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |  |
| Chuá»—i xml tráº£ vá» | Chuá»—i xml thÃ´ng tin khÃ¡ch hÃ ng | Kiá»ƒu string |

**Cáº¥u trÃºc chuá»—i XML tráº£ vá»:**

<Data>

<code>**{0}**</code>

<name><!\[CDATA\[{0}\]\]></name>

<address><!\[CDATA\[{0}\]\]></address>

<phone>**{0}**</phone>

<taxcode>**{0}**</taxcode>

<email>**{0}**</email>

</Data>

### Chuyá»ƒn Ä‘á»•i lÆ°u trá»¯ hÃ³a Ä‘Æ¡n theo Fkey

URL

string **convertForStoreFkey** (string fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n chuyá»ƒn Ä‘á»•i vá»›i má»¥c Ä‘Ã­ch lÆ°u trá»¯ PDF, má»—i hÃ³a Ä‘Æ¡n sáº½ Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i nhiá»u láº§n.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **fkey:** Chuá»—i fkey xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | Chuá»—i token khÃ´ng chÃ­nh xÃ¡c |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘Ã£ chuyá»ƒn Ä‘á»•i |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| chuá»—i_base64_tráº£_vá» | Tráº£ vá» chuá»—i base64 tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng string base64 |

### Download hÃ³a Ä‘Æ¡n lá»—i gá»­i thuáº¿ theo Fkey

URL

String **downloadInvErrorFkey** (string fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» chuá»—i xml cá»§a hÃ³a Ä‘Æ¡n lá»—i gá»­i cÆ¡ quan thuáº¿ theo fkey truyá»n lÃªn

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **fkey :** Chuá»—i fkey xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y dáº£i thÃ´ng bÃ¡o phÃ¡t hÃ nh |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:11 | HÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n nÃªn khÃ´ng xem Ä‘Æ°á»£c |  |
| chuá»—i_Xml_tráº£_vá» | Tráº£ vá» chuá»—i Xml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng string Xml |

### Download hÃ³a Ä‘Æ¡n lá»—i gá»­i cÆ¡ quan thuáº¿ Ä‘á»‹nh dáº¡ng Pdf theo token

URL

String **downloadInvErrorPDF**(string token, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» dáº¡ng pdf cá»§a hÃ³a Ä‘Æ¡n lá»—i gá»­i cÆ¡ quan thuáº¿ theo token truyá»n lÃªn.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   token**:** Chuá»—i fkey xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y dáº£i thÃ´ng bÃ¡o phÃ¡t hÃ nh |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:11 | HÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n nÃªn khÃ´ng xem Ä‘Æ°á»£c |  |
| Chuá»—i base64 | Tráº£ vá» chuá»—i base64 tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n. LÆ°u chuá»—i nÃ y thÃ nh file .pdf Ä‘á»ƒ Ä‘Æ°á»£c file PDF |  |

### Download hÃ³a Ä‘Æ¡n lá»—i gá»­i cÆ¡ quan thuáº¿ Ä‘á»‹nh dáº¡ng HTML

URL

String **GetInvErrorViewFkey** (string fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» dáº¡ng HTML cá»§a hÃ³a Ä‘Æ¡n lá»—i gá»­i cÆ¡ quan thuáº¿ theo token truyá»n lÃªn.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   fkey**:** Chuá»—i fkey xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | CÃ´ng ty chÆ°a cÃ³ máº«u hÃ³a Ä‘Æ¡n nÃ o |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:11 | HÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n nÃªn khÃ´ng xem Ä‘Æ°á»£c |  |
| Chuá»—i base64 | Tráº£ vá» chuá»—i base64 tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n. LÆ°u chuá»—i nÃ y thÃ nh file .html Ä‘á»ƒ Ä‘Æ°á»£c file HTML |  |

### Download hÃ³a Ä‘Æ¡n lá»—i gá»­i thuáº¿ Ä‘á»‹nh dáº¡ng Pdf theo Fkey

URL

String **downloadInvPDFFkeyError** (string invToken, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» dáº¡ng pdf cá»§a hÃ³a Ä‘Æ¡n theo token truyá»n lÃªn.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **invToken:** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y dáº£i thÃ´ng bÃ¡o phÃ¡t hÃ nh |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:11 | HÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n nÃªn khÃ´ng xem Ä‘Æ°á»£c |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| Chuá»—i base64 | Tráº£ vá» chuá»—i base64 tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n. LÆ°u chuá»—i nÃ y thÃ nh file .pdf Ä‘á»ƒ Ä‘Æ°á»£c file PDF |  |

### Download hÃ³a Ä‘Æ¡n lá»—i gá»­i cÆ¡ quan thuáº¿ theo invtoken

URL

String **downloadInvError**(string invToken, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» chuá»—i xml cá»§a hÃ³a Ä‘Æ¡n

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **invToken :** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y Pattern |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:11 | HÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n nÃªn khÃ´ng xem Ä‘Æ°á»£c |  |
| chuá»—i_Xml_tráº£_vá» | Tráº£ vá» chuá»—i Xml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng string Xml |

### Download hÃ³a Ä‘Æ¡n lá»—i gá»­i cÆ¡ quan thuáº¿ vá»›i cáº£ cÃ¡c hÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n theo invtoken

URL

String **downloadInvNoPayError** (string invToken, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» chuá»—i xml cá»§a hÃ³a Ä‘Æ¡n, cho phÃ©p táº£i cÃ¡c hÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **invToken :** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y Pattern |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| chuá»—i_Xml_tráº£_vá» | Tráº£ vá» chuá»—i Xml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng string Xml |

### Download hÃ³a Ä‘Æ¡n lá»—i gá»­i thuáº¿ Ä‘á»‹nh dáº¡ng Pdf, khÃ´ng kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n theo fkey

URL

String **downloadInvPDFFkeyNoPayError** (string fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» dáº¡ng pdf cá»§a hÃ³a Ä‘Æ¡n theo fkey truyá»n lÃªn, cho phÃ©p táº£i cáº£ hÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **fkey:** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y dáº£i thÃ´ng bÃ¡o phÃ¡t hÃ nh |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| Chuá»—i base64 | Tráº£ vá» chuá»—i base64 tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n. LÆ°u chuá»—i nÃ y thÃ nh file .pdf Ä‘á»ƒ Ä‘Æ°á»£c file PDF |  |

### Download hÃ³a Ä‘Æ¡n lá»—i gá»­i thuáº¿ Ä‘á»‹nh dáº¡ng Pdf, khÃ´ng kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n theo Token

URL

String **downloadInvPDFNoPayError** (string token, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» dáº¡ng pdf cá»§a hÃ³a Ä‘Æ¡n theo token truyá»n lÃªn.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **token:** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y dáº£i thÃ´ng bÃ¡o phÃ¡t hÃ nh |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| Chuá»—i base64 | Tráº£ vá» chuá»—i base64 tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n. LÆ°u chuá»—i nÃ y thÃ nh file .pdf Ä‘á»ƒ Ä‘Æ°á»£c file PDF |  |

### Láº¥y danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»« ngÃ y Ä‘áº¿n ngÃ y theo máº«u sá»‘, kÃ½ hiá»‡u

URL

String **GetInvViewByDate**(string userName, string userPass, string pattern, string serial, string fromDate, string toDate)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p láº¥y danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»« ngÃ y Ä‘áº¿n ngÃ y theo máº«u sá»‘, kÃ½ hiá»‡u.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **pattern:** máº«u sá»‘
*   **serial**: kÃ½ hiá»‡u
*   **fromDate**: tá»« ngÃ y
*   **toDate**: Ä‘áº¿n ngÃ y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:3 | Sai Ä‘á»‹nh dáº¡ng ngÃ y thÃ¡ng |  |
| ERR:4 | KhÃ´ng láº¥y Ä‘Æ°á»£c báº£ng hÃ³a Ä‘Æ¡n (sai máº«u sá»‘) |  |
| ERR:6 | VÆ°á»£t quÃ¡ giá»›i háº¡n sá»‘ lÆ°á»£ng hÃ³a Ä‘Æ¡n Ä‘Æ°á»£c phÃ©p láº¥y (500 hÃ³a Ä‘Æ¡n) |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra |  |
| ERR:7 | VÆ°á»£t quÃ¡ giá»›i háº¡n 7 ngÃ y |  |
| Chuá»—i base64 | Tráº£ vá» chuá»—i base64 cá»§a xml danh sÃ¡ch hÃ³a Ä‘Æ¡n |  |

Cáº¥u trÃºc xml tráº£ vá» (Ä‘Æ°á»£c base64):

<DSHDon>

<HDon>

<DLieu>XML hÃ³a Ä‘Æ¡n Ä‘Ã£ base64</DLieu>

<Loai>Loáº¡i hÃ³a Ä‘Æ¡n(0: hÃ³a Ä‘Æ¡n gá»‘c; 1: hÃ³a Ä‘Æ¡n thay tháº¿; 2,3,4,5: hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh)</Loai>

<TThai>Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n(0: hÃ³a Ä‘Æ¡n má»›i; 1: hÃ³a Ä‘Æ¡n phÃ¡t hÃ nh; 3: hÃ³a Ä‘Æ¡n thay tháº¿; 4: hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh; 5: hÃ³a Ä‘Æ¡n há»§y)</TThai>

</HDon>

</DSHDon>

### Download file .zip hÃ³a Ä‘Æ¡n theo Fkey

URL

String **downloadInvZipFkey**(string fkey, string userName, string userPass, bool checkPayment)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» file .zip chá»©a 2 file .xml vÃ  .html cá»§a hÃ³a Ä‘Æ¡n

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **fkey :** Chuá»—i fkey xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n
*   **checkPayment**: â€œtrueâ€: Chá»‰ cho táº£i hÃ³a Ä‘Æ¡n cÃ³ tráº¡ng thÃ¡i lÃ  Ä‘Ã£ thanh toÃ¡n; â€œfalseâ€: Táº£i hÃ³a Ä‘Æ¡n khÃ´ng cáº§n kiá»ƒm tra hÃ³a Ä‘Æ¡n Ä‘Ã£ thanh toÃ¡n hay chÆ°a

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y dáº£i thÃ´ng bÃ¡o phÃ¡t hÃ nh |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:11 | HÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n nÃªn khÃ´ng xem Ä‘Æ°á»£c |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| Chuá»—i Base64 | Tráº£ vá» chuá»—i Base64. LÆ°u chuá»—i Base64 nÃ y thÃ nh file .zip chá»©a 2 file .xml vÃ  .html cá»§a hÃ³a Ä‘Æ¡n |  |

### Download file .zip hÃ³a Ä‘Æ¡n theo Token

URL

String **downloadInvZipToken**(string invToken, string userName, string userPass, bool checkPayment)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº£i vá» file .zip chá»©a 2 file .xml vÃ  .html cá»§a hÃ³a Ä‘Æ¡n

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **invToken :** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y (theo cáº¥u trÃºc pattern;serial;sá»‘ hÃ³a Ä‘Æ¡n. VD: 1/001;K22TAA;1)
*   **checkPayment**: â€œtrueâ€: Chá»‰ cho táº£i hÃ³a Ä‘Æ¡n cÃ³ tráº¡ng thÃ¡i lÃ  Ä‘Ã£ thanh toÃ¡n; â€œfalseâ€: Táº£i hÃ³a Ä‘Æ¡n khÃ´ng cáº§n kiá»ƒm tra hÃ³a Ä‘Æ¡n Ä‘Ã£ thanh toÃ¡n hay chÆ°a

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n ServiceRole |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y Pattern |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:11 | HÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n nÃªn khÃ´ng xem Ä‘Æ°á»£c |  |
| ERR:12 | BiÃªn lai Ä‘iá»‡n tá»­ cÃ³ mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| ERR:13 | BiÃªn lai Ä‘iá»‡n tá»­ khÃ´ng mÃ£ chÆ°a Ä‘Æ°á»£c thuáº¿ cháº¥p nháº­n |  |
| Chuá»—i Base64 | Tráº£ vá» chuá»—i Base64. LÆ°u chuá»—i Base64 nÃ y thÃ nh file .zip chá»©a 2 file .xml vÃ  .html cá»§a hÃ³a Ä‘Æ¡n |  |

## NhÃ³m cÃ¡c hÃ m webservice xá»­ lÃ½ hÃ³a Ä‘Æ¡n ( BussinessService)

### Gáº¡ch ná»£ hÃ³a Ä‘Æ¡n theo fkey

URL

String **confirmPaymentFkey**(string lstFkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n gáº¡ch ná»£ hÃ³a Ä‘Æ¡n theo danh sÃ¡ch fkey truyá»n vÃ o.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **lstFkey:** Chuá»—i Fkey xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y(cÃ¡c Fkey phÃ¢n biá»‡t nhau báº±ng â€œ\_â€)

**VD:** 012013\_022013\_032013

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n tÆ°Æ¡ng á»©ng chuá»—i Ä‘Æ°a vÃ o |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng, hoáº·c lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |  |
| ERR:13 | HÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Æ°á»£c gáº¡ch ná»£ trÆ°á»›c Ä‘Ã³ |  |
| OK | ÄÃ¡nh dáº¥u hÃ³a Ä‘Æ¡n trong list Ä‘Ã£ Ä‘Æ°á»£c gáº¡ch ná»£ |  |

### Gáº¡ch ná»£ hÃ³a Ä‘Æ¡n

URL

String **confirmPayment** (string lstInvToken, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n gáº¡ch ná»£ hÃ³a Ä‘Æ¡n theo danh sÃ¡ch chuá»—i invtoken truyá»n vÃ o.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **lstInvToken:** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n (theo cáº¥u trÃºc patternt;serial;sá»‘hÃ³aÄ‘Æ¡n)

**VD:** 01GTKT2/001;AA/13E;10\_01GTKT2/001;AA/13E;11

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n tÆ°Æ¡ng á»©ng chuá»—i Ä‘Æ°a vÃ o |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng, hoáº·c lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |  |
| ERR:13 | HÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Æ°á»£c gáº¡ch ná»£ trÆ°á»›c Ä‘Ã³ |  |
| OK | ÄÃ¡nh dáº¥u hÃ³a Ä‘Æ¡n trong list Ä‘Ã£ Ä‘Æ°á»£c gáº¡ch ná»£ |  |

### Bá» gáº¡ch ná»£ hÃ³a Ä‘Æ¡n theo fkey

URL

string **UnconfirmPaymentFkey**(string lstFkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n bá» gáº¡ch ná»£ hÃ³a Ä‘Æ¡n theo danh sÃ¡ch chuá»—i fkey truyá»n vÃ o.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **lstFkey:** Chuá»—i Fkey xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y(cÃ¡c Fkey phÃ¢n biá»‡t nhau báº±ng â€œ\_â€)

**VD:** 012013\_022013\_032013

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n tÆ°Æ¡ng á»©ng chuá»—i Ä‘Æ°a vÃ o |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng, hoáº·c lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |  |
| ERR:13 | HÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Æ°á»£c bá» gáº¡ch ná»£ trÆ°á»›c Ä‘Ã³ |  |
| OK | ÄÃ¡nh dáº¥u hÃ³a Ä‘Æ¡n trong list Ä‘Ã£ Ä‘Æ°á»£c bá» gáº¡ch ná»£ |  |

### Bá» gáº¡ch ná»£ hÃ³a Ä‘Æ¡n

URL

string **unConfirmPayment** (string lstInvToken, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n bá» gáº¡ch ná»£ hÃ³a Ä‘Æ¡n theo danh sÃ¡ch chuá»—i invtoken truyá»n vÃ o.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **lstInvToken:** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n (theo cáº¥u trÃºc patternt;serial;sá»‘hÃ³aÄ‘Æ¡n)

**VD:** 01GTKT2/001;AA/13E;10\_01GTKT2/001;AA/13E;11

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | Chuá»—i token khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n tÆ°Æ¡ng á»©ng chuá»—i Ä‘Æ°a vÃ o |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng, hoáº·c lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |  |
| ERR:13 | HÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Æ°á»£c bá» gáº¡ch ná»£ trÆ°á»›c Ä‘Ã³ |  |
| OK | ÄÃ¡nh dáº¥u hÃ³a Ä‘Æ¡n trong list Ä‘Ã£ Ä‘Æ°á»£c bá» gáº¡ch ná»£ |  |

### Äiá»u chá»‰nh hÃ³a Ä‘Æ¡n

URL

string **AdjustInvoiceAction**(string Account, string ACpass, string xmlInvData, string username, string pass, string fkey, string AttachFile, int? convert, string pattern = null, string serial = null).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cÅ© vÃ  hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh
*   **fkey:** Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh
*   **Convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ½ hiá»‡u
*   **AttachFile:** ÄÆ°á»ng dáº«n file biÃªn báº£n hoáº·c key Ä‘á»ƒ sinh biÃªn báº£n tá»± Ä‘á»™ng (=10: sinh biÃªn báº£n tá»± Ä‘á»™ng, =11: sinh vÃ  kÃ½ biÃªn báº£n tá»± Ä‘á»™ng, != 10 vÃ  !=11: ÄÆ°á»ng dáº«n file biÃªn báº£n)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | HÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh khÃ´ng tá»“n táº¡i |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh Ä‘Ã£ bá»‹ thay tháº¿. KhÃ´ng thá»ƒ Ä‘iá»u chá»‰nh Ä‘Æ°á»£c ná»¯a. |  |
| ERR:9 | Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘Æ°á»£c Ä‘iá»u chá»‰nh |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | Fkey cá»§a hÃ³a Ä‘Æ¡n má»›i Ä‘Ã£ tá»“n táº¡i trÃªn há»‡ thá»‘ng |
| ERR:14 | Lá»—i trong quÃ¡ trÃ¬nh thá»±c hiá»‡n cáº¥p sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:21 | TrÃ¹ng Fkey truyá»n vÃ o |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| ERR:60 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (CÃ³ mÃ£ / KhÃ´ng mÃ£). |  |
| ERR:61 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (HD GTGT / HD bÃ¡n hÃ ng...). |  |
| ERR:62 | KhÃ´ng Ä‘Æ°á»£c dÃ¹ng khÃ´ng mÃ£ Ä‘Äƒng kÃ½ gá»­i báº£ng tá»•ng há»£p thay tháº¿, Ä‘iá»u chá»‰nh cÃ¡c hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i thÃ´ng tin chi tiáº¿t. |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhSerial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhinvNumber: sá»‘ hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh |  |

**Cáº¥u trÃºc cá»§a xmlInvData trÆ°á»ng há»£p khÃ´ng cÃ³ trÆ°á»ng má»Ÿ rá»™ng (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<AdjustInv>

<key> **GiÃ¡ trá»‹ khÃ³a Ä‘á»ƒ phÃ¢n biá»‡t hÃ³a Ä‘Æ¡n xuáº¥t cho khÃ¡ch hÃ ng nÃ o** </key>

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod> **PhÆ°Æ¡ng thá»©c thanh toÃ¡n** </PaymentMethod>

<CusBankName>**TÃªn ngÃ¢n hÃ ng**</CusBankName>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<CusBankNo>**Sá»‘ tÃ i khoáº£n**</CusBankNo>

<Products>

<Product>

<Code>**MÃ£ sáº£n pháº©m\***</Code>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n\***</Amount>

<Remark>**Remark**</Remark>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tá»•ng tiá»n thuáº¿\***</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**Chiáº¿t kháº¥u**</Discount>

<DiscountAmount>**Tá»•ng tiá»n chiáº¿t kháº¥u**</DiscountAmount>

<IsSum> **TÃ­nh cháº¥t \* (0-HÃ ng hÃ³a, dá»‹ch vá»¥; 1-Khuyáº¿n máº¡i; 2-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)**</IsSum>

</Product>

</Products>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**NgÃ y dá»‹ch vá»¥**</ArisingDate>

<PaymentStatus>**Tráº¡ng thÃ¡i thanh toÃ¡n**</PaymentStatus>

<EmailDeliver>**EmailDeliver**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**MÃ£ sá»‘ thuáº¿**</ComTaxCode>

<ComFax>**Company Fax**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue> **GrossValue** </GrossValue>

<GrossValue0> **GrossValue0**</GrossValue0>

<VatAmount0> **VatAmount0**</VatAmount0>

<GrossValue5> **GrossValue5**</GrossValue5>

<VatAmount5> **VatAmount5**</VatAmount5>

<GrossValue10> **GrossValue10**</GrossValue10>

<VatAmount10> **VatAmount10**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**Äiá»‡n thoáº¡i cÃ´ng ty**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**CreateDate**</CreateDate>

<DiscountRate>**Chiáº¿t kháº¥u**</DiscountRate>

<CusSignStatus>**1.1**</CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax></GrossValue\_NonTax>

<CurrencyUnit>**ÄÆ¡n vá»‹ tiá»n tá»‡**</CurrencyUnit>

<ExchangeRate>**Tá»· giÃ¡**</ExchangeRate>

<ConvertedAmount>**Tá»•ng tiá»n quy Ä‘á»•i**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

<Type>**Loáº¡i hÃ³a Ä‘Æ¡n chá»‰nh sá»­a(int-máº·c Ä‘á»‹nh láº¥y lÃ  2) 2-Äiá»u chá»‰nh tÄƒng, 3-Äiá»u chá»‰nh giáº£m, 4- HÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh thÃ´ng tin**</Type>

<LDDNBo>**LDDNBO**</LDDNBo>

<HDSo>**HDSO**</HDSo>

<HVTNXHang>**HVTNXHANG**</HVTNXHang>

<TNVChuyen>**TNVCHUYEN**</TNVChuyen>

<PTVChuyen>**PTVCHUYEN**</PTVChuyen>

<HDKTSo>**HDKTSO**</HDKTSo>

<HDKTNgay>**HDKTNgay**</HDKTNgay>

</AdjustInv>

**Cáº¥u trÃºc cá»§a xmlInvData trÆ°á»ng há»£p CÃ³ trÆ°á»ng má»Ÿ rá»™ng (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<AdjustInv>

<key> **GiÃ¡ trá»‹ khÃ³a Ä‘á»ƒ phÃ¢n biá»‡t hÃ³a Ä‘Æ¡n xuáº¥t cho khÃ¡ch hÃ ng nÃ o** </key>

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod> **PhÆ°Æ¡ng thá»©c thanh toÃ¡n** </PaymentMethod>

<CusBankName>**TÃªn ngÃ¢n hÃ ng**</CusBankName>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<CusBankNo>**Sá»‘ tÃ i khoáº£n**</CusBankNo>

<Products>

<Product>

<Code>**MÃ£ sáº£n pháº©m\***</Code>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n\***</Amount>

<Remark>**Remark**</Remark>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tá»•ng tiá»n thuáº¿\***</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**Chiáº¿t kháº¥u**</Discount>

<DiscountAmount>**Tá»•ng tiá»n chiáº¿t kháº¥u**</DiscountAmount>

<IsSum> **TÃ­nh cháº¥t \* (0-HÃ ng hÃ³a, dá»‹ch vá»¥; 1-Khuyáº¿n máº¡i; 2-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)**</IsSum>

</Product>

</Products>

<Extras>

<Extra\_item>

<Extra\_Name>**Extra\_Name**</Extra\_Name>

<Extra\_Value>**Extra\_Value**</Extra\_Value>

</Extra\_item>

</Extras>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**NgÃ y dá»‹ch vá»¥**</ArisingDate>

<PaymentStatus>**Tráº¡ng thÃ¡i thanh toÃ¡n**</PaymentStatus>

<EmailDeliver>**EmailDeliver**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**MÃ£ sá»‘ thuáº¿**</ComTaxCode>

<ComFax>**Company Fax**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue> **GrossValue** </GrossValue>

<GrossValue0> **GrossValue0**</GrossValue0>

<VatAmount0> **VatAmount0**</VatAmount0>

<GrossValue5> **GrossValue5**</GrossValue5>

<VatAmount5> **VatAmount5**</VatAmount5>

<GrossValue10> **GrossValue10**</GrossValue10>

<VatAmount10> **VatAmount10**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**Äiá»‡n thoáº¡i cÃ´ng ty**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**CreateDate**</CreateDate>

<DiscountRate>**Chiáº¿t kháº¥u**</DiscountRate>

<CusSignStatus>**1.1**</CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax></GrossValue\_NonTax>

<CurrencyUnit>**ÄÆ¡n vá»‹ tiá»n tá»‡**</CurrencyUnit>

<ExchangeRate>**Tá»· giÃ¡**</ExchangeRate>

<ConvertedAmount>**Tá»•ng tiá»n quy Ä‘á»•i**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

<Type>**Loáº¡i hÃ³a Ä‘Æ¡n chá»‰nh sá»­a(int-máº·c Ä‘á»‹nh láº¥y lÃ  2) 2-Äiá»u chá»‰nh tÄƒng, 3-Äiá»u chá»‰nh giáº£m, 4- HÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh thÃ´ng tin**</Type>

<LDDNBo>**LDDNBO**</LDDNBo>

<HDSo>**HDSO**</HDSo>

<HVTNXHang>**HVTNXHANG**</HVTNXHang>

<TNVChuyen>**TNVCHUYEN**</TNVChuyen>

<PTVChuyen>**PTVCHUYEN**</PTVChuyen>

<HDKTSo>**HDKTSO**</HDKTSo>

<HDKTNgay>**HDKTNgay**</HDKTNgay>

</AdjustInv>

### Äiá»u chá»‰nh hÃ³a Ä‘Æ¡n theo sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o

URL

string **AdjustActionAssignedNo**(string Account, string ACpass, string xmlInvData, string username, string pass, string fkey, string AttachFile, int? convert, string pattern = null, string serial = null).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cho phÃ©p truyá»n sá»‘ hÃ³a Ä‘Æ¡n

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass :** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cÅ© vÃ  hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh
*   **fkey:**Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh
*   **Convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ½ hiá»‡u

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | HÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh khÃ´ng tá»“n táº¡i |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh Ä‘Ã£ bá»‹ thay tháº¿. KhÃ´ng thá»ƒ Ä‘iá»u chá»‰nh Ä‘Æ°á»£c ná»¯a. |  |
| ERR:9 | Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘Æ°á»£c Ä‘iá»u chá»‰nh |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | Fkey cá»§a hÃ³a Ä‘Æ¡n má»›i Ä‘Ã£ tá»“n táº¡i trÃªn há»‡ thá»‘ng |
| ERR:14 | Lá»—i trong quÃ¡ trÃ¬nh thá»±c hiá»‡n cáº¥p sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| ERR:31 | Sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o khÃ´ng há»£p lá»‡ |  |
| ERR:60 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (CÃ³ mÃ£ / KhÃ´ng mÃ£). |  |
| ERR:61 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (HD GTGT / HD bÃ¡n hÃ ng...). |  |
| ERR:62 | KhÃ´ng Ä‘Æ°á»£c dÃ¹ng khÃ´ng mÃ£ Ä‘Äƒng kÃ½ gá»­i báº£ng tá»•ng há»£p thay tháº¿, Ä‘iá»u chá»‰nh cÃ¡c hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i thÃ´ng tin chi tiáº¿t. |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhSerial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhinvNumber: sá»‘ hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh |  |

**Cáº¥u trÃºc cá»§a xmlInvData trÆ°á»ng há»£p khÃ´ng cÃ³ trÆ°á»ng má»Ÿ rá»™ng (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<AdjustInv>

<key> **GiÃ¡ trá»‹ khÃ³a Ä‘á»ƒ phÃ¢n biá»‡t hÃ³a Ä‘Æ¡n xuáº¥t cho khÃ¡ch hÃ ng nÃ o** </key>

**<**InvoiceNo**\>Sá»‘ hÃ³a Ä‘Æ¡n</**InvoiceNo**\>**

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod> **PhÆ°Æ¡ng thá»©c thanh toÃ¡n** </PaymentMethod>

<CusBankName>**TÃªn ngÃ¢n hÃ ng**</CusBankName>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<CusBankNo>**Sá»‘ tÃ i khoáº£n**</CusBankNo>

<Products>

<Product>

<Code>**MÃ£ sáº£n pháº©m\***</Code>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n\***</Amount>

<Remark>**Remark**</Remark>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tá»•ng tiá»n thuáº¿\***</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**Chiáº¿t kháº¥u**</Discount>

<DiscountAmount>**Tá»•ng tiá»n chiáº¿t kháº¥u**</DiscountAmount>

<IsSum> **TÃ­nh cháº¥t \* (0-HÃ ng hÃ³a, dá»‹ch vá»¥; 1-Khuyáº¿n máº¡i; 2-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)**</IsSum>

</Product>

</Products>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**NgÃ y dá»‹ch vá»¥**</ArisingDate>

<PaymentStatus>**Tráº¡ng thÃ¡i thanh toÃ¡n**</PaymentStatus>

<EmailDeliver>**EmailDeliver**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**MÃ£ sá»‘ thuáº¿**</ComTaxCode>

<ComFax>**Company Fax**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue> **GrossValue** </GrossValue>

<GrossValue0> **GrossValue0**</GrossValue0>

<VatAmount0> **VatAmount0**</VatAmount0>

<GrossValue5> **GrossValue5**</GrossValue5>

<VatAmount5> **VatAmount5**</VatAmount5>

<GrossValue10> **GrossValue10**</GrossValue10>

<VatAmount10> **VatAmount10**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**Äiá»‡n thoáº¡i cÃ´ng ty**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**CreateDate**</CreateDate>

<DiscountRate>**Chiáº¿t kháº¥u**</DiscountRate>

<CusSignStatus>**1.1**</CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax></GrossValue\_NonTax>

<CurrencyUnit>**ÄÆ¡n vá»‹ tiá»n tá»‡**</CurrencyUnit>

<ExchangeRate>**Tá»· giÃ¡**</ExchangeRate>

<ConvertedAmount>**Tá»•ng tiá»n quy Ä‘á»•i**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

<Type>**Loáº¡i hÃ³a Ä‘Æ¡n chá»‰nh sá»­a(int-máº·c Ä‘á»‹nh láº¥y lÃ  2) 2-Äiá»u chá»‰nh tÄƒng, 3-Äiá»u chá»‰nh giáº£m, 4- HÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh thÃ´ng tin**</Type>

<LDDNBo>**LDDNBO**</LDDNBo>

<HDSo>**HDSO**</HDSo>

<HVTNXHang>**HVTNXHANG**</HVTNXHang>

<TNVChuyen>**TNVCHUYEN**</TNVChuyen>

<PTVChuyen>**PTVCHUYEN**</PTVChuyen>

<HDKTSo>**HDKTSO**</HDKTSo>

<HDKTNgay>**HDKTNgay**</HDKTNgay>

</AdjustInv>

**Cáº¥u trÃºc cá»§a xmlInvData trÆ°á»ng há»£p CÃ³ trÆ°á»ng má»Ÿ rá»™ng (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<AdjustInv>

<key> **GiÃ¡ trá»‹ khÃ³a Ä‘á»ƒ phÃ¢n biá»‡t hÃ³a Ä‘Æ¡n xuáº¥t cho khÃ¡ch hÃ ng nÃ o** </key>

**<**InvoiceNo**\>Sá»‘ hÃ³a Ä‘Æ¡n</**InvoiceNo**\>**

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod> **PhÆ°Æ¡ng thá»©c thanh toÃ¡n** </PaymentMethod>

<CusBankName>**TÃªn ngÃ¢n hÃ ng**</CusBankName>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<CusBankNo>**Sá»‘ tÃ i khoáº£n**</CusBankNo>

<Products>

<Product>

<Code>**MÃ£ sáº£n pháº©m\***</Code>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n\***</Amount>

<Remark>**Remark**</Remark>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tá»•ng tiá»n thuáº¿\***</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**Chiáº¿t kháº¥u**</Discount>

<DiscountAmount>**Tá»•ng tiá»n chiáº¿t kháº¥u**</DiscountAmount>

<IsSum> **TÃ­nh cháº¥t \* (0-HÃ ng hÃ³a, dá»‹ch vá»¥; 1-Khuyáº¿n máº¡i; 2-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)**</IsSum>

</Product>

</Products>

<Extras>

<Extra\_item>

<Extra\_Name>**Extra\_Name**</Extra\_Name>

<Extra\_Value>**Extra\_Value**</Extra\_Value>

</Extra\_item>

</Extras>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</ DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**NgÃ y dá»‹ch vá»¥**</ArisingDate>

<PaymentStatus>**Tráº¡ng thÃ¡i thanh toÃ¡n**</PaymentStatus>

<EmailDeliver>**EmailDeliver**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**MÃ£ sá»‘ thuáº¿**</ComTaxCode>

<ComFax>**Company Fax**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue> **GrossValue** </GrossValue>

<GrossValue0> **GrossValue0**</GrossValue0>

<VatAmount0> **VatAmount0**</VatAmount0>

<GrossValue5> **GrossValue5**</GrossValue5>

<VatAmount5> **VatAmount5**</VatAmount5>

<GrossValue10> **GrossValue10**</GrossValue10>

<VatAmount10> **VatAmount10**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**Äiá»‡n thoáº¡i cÃ´ng ty**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**CreateDate**</CreateDate>

<DiscountRate>**Chiáº¿t kháº¥u**</DiscountRate>

<CusSignStatus>**1.1**</CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax></GrossValue\_NonTax>

<CurrencyUnit>**ÄÆ¡n vá»‹ tiá»n tá»‡**</CurrencyUnit>

<ExchangeRate>**Tá»· giÃ¡**</ExchangeRate>

<ConvertedAmount>**Tá»•ng tiá»n quy Ä‘á»•i**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

<Type>**Loáº¡i hÃ³a Ä‘Æ¡n chá»‰nh sá»­a(int-máº·c Ä‘á»‹nh láº¥y lÃ  2) 2-Äiá»u chá»‰nh tÄƒng, 3-Äiá»u chá»‰nh giáº£m, 4- HÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh thÃ´ng tin**</Type>

</AdjustInv>

### Html xem trÆ°á»›c khi Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n

URL

string **AdjustInvoiceNoPublish**(string Account, string ACpass, string xmlInvData, string username, string pass, string fkey, int? convert, string pattern = null, string serial = null).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n láº¥y dá»¯ liá»‡u html hÃ³a Ä‘Æ¡n má»›i cá»§a Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n trÆ°á»›c khi kÃ½ sá»‘ phÃ¡t hÃ nh

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cÅ© vÃ  hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh
*   **fkey:** Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh
*   **Convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ½ hiá»‡u

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | HÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh khÃ´ng tá»“n táº¡i |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | CÃ³ lá»—i trong quÃ¡ trÃ¬nh táº¡o má»›i hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh Ä‘Ã£ bá»‹ thay tháº¿. KhÃ´ng thá»ƒ Ä‘iá»u chá»‰nh Ä‘Æ°á»£c ná»¯a. |  |
| ERR:9 | Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘Æ°á»£c Ä‘iá»u chá»‰nh |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| chuá»—i_hml_tráº£_vá» | Tráº£ vá» chuá»—i hml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh nhÆ°ng chÆ°a phÃ¡t hÃ nh, kÃ½ sá»‘ | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng html |

**Cáº¥u trÃºc cá»§a xmlInvData trÆ°á»ng há»£p khÃ´ng cÃ³ trÆ°á»ng má»Ÿ rá»™ng (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<AdjustInv>

<key> **GiÃ¡ trá»‹ khÃ³a Ä‘á»ƒ phÃ¢n biá»‡t hÃ³a Ä‘Æ¡n xuáº¥t cho khÃ¡ch hÃ ng nÃ o** </key>

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod> **PhÆ°Æ¡ng thá»©c thanh toÃ¡n** </PaymentMethod>

<CusBankName>**TÃªn ngÃ¢n hÃ ng**</CusBankName>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<CusBankNo>**Sá»‘ tÃ i khoáº£n**</CusBankNo>

<Products>

<Product>

<Code>**MÃ£ sáº£n pháº©m\***</Code>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n\***</Amount>

<Remark>**Remark**</Remark>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tá»•ng tiá»n thuáº¿\***</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**Chiáº¿t kháº¥u**</Discount>

<DiscountAmount>**Tá»•ng tiá»n chiáº¿t kháº¥u**</DiscountAmount>

<IsSum> **TÃ­nh cháº¥t \* (0-HÃ ng hÃ³a, dá»‹ch vá»¥; 1-Khuyáº¿n máº¡i; 2-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)**</IsSum>

</Product>

</Products>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**NgÃ y dá»‹ch vá»¥**</ArisingDate>

<PaymentStatus>**Tráº¡ng thÃ¡i thanh toÃ¡n**</PaymentStatus>

<EmailDeliver>**EmailDeliver**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**MÃ£ sá»‘ thuáº¿**</ComTaxCode>

<ComFax>**Company Fax**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue> **GrossValue** </GrossValue>

<GrossValue0> **GrossValue0**</GrossValue0>

<VatAmount0> **VatAmount0**</VatAmount0>

<GrossValue5> **GrossValue5**</GrossValue5>

<VatAmount5> **VatAmount5**</VatAmount5>

<GrossValue10> **GrossValue10**</GrossValue10>

<VatAmount10> **VatAmount10**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**Äiá»‡n thoáº¡i cÃ´ng ty**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**CreateDate**</CreateDate>

<DiscountRate>**Chiáº¿t kháº¥u**</DiscountRate>

<CusSignStatus>**1.1**</CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax></GrossValue\_NonTax>

<CurrencyUnit>**ÄÆ¡n vá»‹ tiá»n tá»‡**</CurrencyUnit>

<ExchangeRate>**Tá»· giÃ¡**</ExchangeRate>

<ConvertedAmount>**Tá»•ng tiá»n quy Ä‘á»•i**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

<Type>**Loáº¡i hÃ³a Ä‘Æ¡n chá»‰nh sá»­a(int-máº·c Ä‘á»‹nh láº¥y lÃ  2) 2-Äiá»u chá»‰nh tÄƒng, 3-Äiá»u chá»‰nh giáº£m, 4- HÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh thÃ´ng tin**</Type>

<LDDNBo>**LDDNBO**</LDDNBo>

<HDSo>**HDSO**</HDSo>

<HVTNXHang>**HVTNXHANG**</HVTNXHang>

<TNVChuyen>**TNVCHUYEN**</TNVChuyen>

<PTVChuyen>**PTVCHUYEN**</PTVChuyen>

<HDKTSo>**HDKTSO**</HDKTSo>

<HDKTNgay>**HDKTNgay**</HDKTNgay>

</AdjustInv>

**Cáº¥u trÃºc cá»§a xmlInvData trÆ°á»ng há»£p CÃ³ trÆ°á»ng má»Ÿ rá»™ng (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<AdjustInv>

<key> **GiÃ¡ trá»‹ khÃ³a Ä‘á»ƒ phÃ¢n biá»‡t hÃ³a Ä‘Æ¡n xuáº¥t cho khÃ¡ch hÃ ng nÃ o** </key>

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod> **PhÆ°Æ¡ng thá»©c thanh toÃ¡n** </PaymentMethod>

<CusBankName>**TÃªn ngÃ¢n hÃ ng**</CusBankName>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<CusBankNo>**Sá»‘ tÃ i khoáº£n**</CusBankNo>

<Products>

<Product>

<Code>**MÃ£ sáº£n pháº©m\***</Code>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n\***</Amount>

<Remark>**Remark**</Remark>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tá»•ng tiá»n thuáº¿\***</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**Chiáº¿t kháº¥u**</Discount>

<DiscountAmount>**Tá»•ng tiá»n chiáº¿t kháº¥u**</DiscountAmount>

<IsSum> **TÃ­nh cháº¥t \* (0-HÃ ng hÃ³a, dá»‹ch vá»¥; 1-Khuyáº¿n máº¡i; 2-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)**</IsSum>

</Product>

</Products>

<Extras>

<Extra\_item>

<Extra\_Name>**Extra\_Name**</Extra\_Name>

<Extra\_Value>**Extra\_Value**</Extra\_Value>

</Extra\_item>

</Extras>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**NgÃ y dá»‹ch vá»¥**</ArisingDate>

<PaymentStatus>**Tráº¡ng thÃ¡i thanh toÃ¡n**</PaymentStatus>

<EmailDeliver>**EmailDeliver**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**MÃ£ sá»‘ thuáº¿**</ComTaxCode>

<ComFax>**Company Fax**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue> **GrossValue** </GrossValue>

<GrossValue0> **GrossValue0**</GrossValue0>

<VatAmount0> **VatAmount0**</VatAmount0>

<GrossValue5> **GrossValue5**</GrossValue5>

<VatAmount5> **VatAmount5**</VatAmount5>

<GrossValue10> **GrossValue10**</GrossValue10>

<VatAmount10> **VatAmount10**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**Äiá»‡n thoáº¡i cÃ´ng ty**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**CreateDate**</CreateDate>

<DiscountRate>**Chiáº¿t kháº¥u**</DiscountRate>

<CusSignStatus>**1.1**</CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax></GrossValue\_NonTax>

<CurrencyUnit>**ÄÆ¡n vá»‹ tiá»n tá»‡**</CurrencyUnit>

<ExchangeRate>**Tá»· giÃ¡**</ExchangeRate>

<ConvertedAmount>**Tá»•ng tiá»n quy Ä‘á»•i**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

<Type>**Loáº¡i hÃ³a Ä‘Æ¡n chá»‰nh sá»­a(int-máº·c Ä‘á»‹nh láº¥y lÃ  2) 2-Äiá»u chá»‰nh tÄƒng, 3-Äiá»u chá»‰nh giáº£m, 4- HÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh thÃ´ng tin**</Type>

<LDDNBo>**LDDNBO**</LDDNBo>

<HDSo>**HDSO**</HDSo>

<HVTNXHang>**HVTNXHANG**</HVTNXHang>

<TNVChuyen>**TNVCHUYEN**</TNVChuyen>

<PTVChuyen>**PTVCHUYEN**</PTVChuyen>

<HDKTSo>**HDKTSO**</HDKTSo>

<HDKTNgay>**HDKTNgay**</HDKTNgay>

</AdjustInv>

### Há»§y hÃ³a Ä‘Æ¡n theo fkey

URL

string **cancelInv**(string Account, string ACpass, string Fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n há»§y hÃ³a Ä‘Æ¡n theo giÃ¡ trá»‹ fkey truyá»n vÃ o

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass :** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **fkey:**Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n há»§y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:6 | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng, hoáº·c lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘Ã£ bá»‹ Ä‘iá»u chá»‰nh / há»§y / hÃ³a Ä‘Æ¡n má»›i táº¡o khÃ´ng thá»ƒ há»§y Ä‘Æ°á»£c |  |
| ERR:9 | HÃ³a Ä‘Æ¡n Ä‘Ã£ thanh toÃ¡n, khÃ´ng cho phÃ©p há»§y |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| OK: | Há»§y hÃ³a Ä‘Æ¡n thÃ nh cÃ´ng |  |

### Thay tháº¿ hÃ³a Ä‘Æ¡n

URL

string **ReplaceInvoiceAction**(string Account, string ACpass, string xmlInvData, string username, string pass, string fkey, string Attachfile, int? convert, string pattern = null, string serial = null).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n thay tháº¿ hÃ³a Ä‘Æ¡n

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cÅ© vÃ  hÃ³a Ä‘Æ¡n thay tháº¿
*   **fkey:** Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n thay tháº¿
*   **Convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ½ hiá»‡u
*   **AttachFile:** ÄÆ°á»ng dáº«n file biÃªn báº£n hoáº·c key Ä‘á»ƒ sinh biÃªn báº£n tá»± Ä‘á»™ng (=10: sinh biÃªn báº£n tá»± Ä‘á»™ng, =11: sinh vÃ  kÃ½ biÃªn báº£n tá»± Ä‘á»™ng, != 10 vÃ  !=11: ÄÆ°á»ng dáº«n file biÃªn báº£n)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cáº§n thay tháº¿ |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | CÃ³ lá»—i trong quÃ¡ trÃ¬nh thay tháº¿ hÃ³a Ä‘Æ¡n |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Æ°á»£c thay tháº¿ rá»“i. KhÃ´ng thá»ƒ thay tháº¿ ná»¯a. |  |
| ERR:9 | Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘Æ°á»£c thay tháº¿ |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | Fkey cá»§a hÃ³a Ä‘Æ¡n má»›i Ä‘Ã£ tá»“n táº¡i trÃªn há»‡ thá»‘ng |
| ERR:14 | Lá»—i trong quÃ¡ trÃ¬nh thá»±c hiá»‡n cáº¥p sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:21 | TrÃ¹ng Fkey truyá»n vÃ o |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| ERR:60 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (CÃ³ mÃ£ / KhÃ´ng mÃ£). |  |
| ERR:61 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (HD GTGT / HD bÃ¡n hÃ ng...). |  |
| ERR:62 | KhÃ´ng Ä‘Æ°á»£c dÃ¹ng khÃ´ng mÃ£ Ä‘Äƒng kÃ½ gá»­i báº£ng tá»•ng há»£p thay tháº¿, Ä‘iá»u chá»‰nh cÃ¡c hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i thÃ´ng tin chi tiáº¿t. |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thay tháº¿PatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n thay tháº¿Serial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n thay tháº¿invNumber: sá»‘ hÃ³a Ä‘Æ¡n thay tháº¿ |  |

**Cáº¥u trÃºc cá»§a xmlInvData trÆ°á»ng há»£p khÃ´ng cÃ³ trÆ°á»ng má»Ÿ rá»™ng (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<ReplaceInv>

<key>**fkey hÃ³a Ä‘Æ¡n\***</key>

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod>**PhÆ°Æ¡ng thá»©c thanh toÃ¡n**</PaymentMethod>

<CusBankName>**TÃªn ngÃ¢n hÃ ng**</CusBankName>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<CusBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</CusBankNo>

<Products>

<Product>

<Code>**MÃ£ sáº£n pháº©m\***</Code>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n\***</Amount>

<Remark>**Remark**</Remark>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tá»•ng tiá»n thuáº¿\***</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**Chiáº¿t kháº¥u**</Discount>

<DiscountAmount>**Tá»•ng tiá»n chiáº¿t kháº¥u**</DiscountAmount>

<IsSum> **TÃ­nh cháº¥t \* (0-HÃ ng hÃ³a, dá»‹ch vá»¥; 1-Khuyáº¿n máº¡i; 2-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)**</IsSum>

</Product>

</Products>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**NgÃ y dá»‹ch vá»¥**</ArisingDate>

<PaymentStatus>**Tráº¡ng thÃ¡i thanh toÃ¡n**</PaymentStatus>

<EmailDeliver>**EmailDeliver**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**MÃ£ sá»‘ thuáº¿**</ComTaxCode>

<ComFax>**Company Fax**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue>**GrossValue**</GrossValue>

<GrossValue0>**GrossValue0**</GrossValue0>

<VatAmount0>**VatAmount0**</VatAmount0>

<GrossValue5>**GrossValue5**</GrossValue5>

<VatAmount5>**VatAmount5**</VatAmount5>

<GrossValue10>**GrossValue10**</GrossValue10>

<VatAmount10>**VatAmount10**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**Äiá»‡n thoáº¡i cÃ´ng ty**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**CreateDate**</CreateDate>

<DiscountRate>**Chiáº¿t kháº¥u**</DiscountRate>

<CusSignStatus></CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax></GrossValue\_NonTax>

<CurrencyUnit>**ÄÆ¡n vá»‹ tiá»n tá»‡**</CurrencyUnit>

<ExchangeRate>**Tá»· giÃ¡**</ExchangeRate>

<ConvertedAmount>**Tá»•ng tiá»n quy Ä‘á»•i**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

<LDDNBo>**LDDNBO**</LDDNBo>

<HDSo>**HDSO**</HDSo>

<HVTNXHang>**HVTNXHANG**</HVTNXHang>

<TNVChuyen>**TNVCHUYEN**</TNVChuyen>

<PTVChuyen>**PTVCHUYEN**</PTVChuyen>

<HDKTSo>**HDKTSO**</HDKTSo>

<HDKTNgay>**HDKTNgay**</HDKTNgay>

</ReplaceInv>

**Cáº¥u trÃºc cá»§a xmlInvData trÆ°á»ng há»£p CÃ³ trÆ°á»ng má»Ÿ rá»™ng (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<ReplaceInv>

<key>**fkey hÃ³a Ä‘Æ¡n\***</key>

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod>**PhÆ°Æ¡ng thá»©c thanh toÃ¡n**</PaymentMethod>

<CusBankName>**TÃªn ngÃ¢n hÃ ng**</CusBankName>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<CusBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</CusBankNo>

<Products>

<Product>

<Code>**MÃ£ sáº£n pháº©m\***</Code>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n\***</Amount>

<Remark>**Remark**</Remark>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tá»•ng tiá»n thuáº¿\***</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**Chiáº¿t kháº¥u**</Discount>

<DiscountAmount>**Tá»•ng tiá»n chiáº¿t kháº¥u**</DiscountAmount>

<IsSum> **TÃ­nh cháº¥t \* (0-HÃ ng hÃ³a, dá»‹ch vá»¥; 1-Khuyáº¿n máº¡i; 2-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)**</IsSum>

</Product>

</Products>

<Extras>

<Extra\_item>

<Extra\_Name>**Extra\_Name**</Extra\_Name>

<Extra\_Value>**Extra\_Value**</Extra\_Value>

</Extra\_item>

</Extras>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**NgÃ y dá»‹ch vá»¥**</ArisingDate>

<PaymentStatus>**Tráº¡ng thÃ¡i thanh toÃ¡n**</PaymentStatus>

<EmailDeliver>**EmailDeliver**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**MÃ£ sá»‘ thuáº¿**</ComTaxCode>

<ComFax>**Company Fax**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue>**GrossValue**</GrossValue>

<GrossValue0>**GrossValue0**</GrossValue0>

<VatAmount0>**VatAmount0**</VatAmount0>

<GrossValue5>**GrossValue5**</GrossValue5>

<VatAmount5>**VatAmount5**</VatAmount5>

<GrossValue10>**GrossValue10**</GrossValue10>

<VatAmount10>**VatAmount10**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**Äiá»‡n thoáº¡i cÃ´ng ty**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**CreateDate**</CreateDate>

<DiscountRate>**Chiáº¿t kháº¥u**</DiscountRate>

<CusSignStatus></CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax></GrossValue\_NonTax>

<CurrencyUnit>**ÄÆ¡n vá»‹ tiá»n tá»‡**</CurrencyUnit>

<ExchangeRate>**Tá»· giÃ¡**</ExchangeRate>

<ConvertedAmount>**Tá»•ng tiá»n quy Ä‘á»•i**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

<LDDNBo>**LDDNBO**</LDDNBo>

<HDSo>**HDSO**</HDSo>

<HVTNXHang>**HVTNXHANG**</HVTNXHang>

<TNVChuyen>**TNVCHUYEN**</TNVChuyen>

<PTVChuyen>**PTVCHUYEN**</PTVChuyen>

<HDKTSo>**HDKTSO**</HDKTSo>

<HDKTNgay>**HDKTNgay**</HDKTNgay>

</ReplaceInv>

### Thay tháº¿ hÃ³a Ä‘Æ¡n theo sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o

URL

string **ReplaceActionAssignedNo**(string Account, string ACpass, string xmlInvData, string username, string pass, string fkey, string Attachfile, int? convert, string pattern = null, string serial = null).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n thay tháº¿ hÃ³a Ä‘Æ¡n cho phÃ©p truyá»n sá»‘ hÃ³a Ä‘Æ¡n

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cÅ© vÃ  hÃ³a Ä‘Æ¡n thay tháº¿
*   **fkey:** Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n thay tháº¿
*   **Convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ½ hiá»‡u

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cáº§n thay tháº¿ |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | CÃ³ lá»—i trong quÃ¡ trÃ¬nh thay tháº¿ hÃ³a Ä‘Æ¡n |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Æ°á»£c thay tháº¿ rá»“i. KhÃ´ng thá»ƒ thay tháº¿ ná»¯a. |  |
| ERR:9 | Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘Æ°á»£c thay tháº¿ |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | Fkey cá»§a hÃ³a Ä‘Æ¡n má»›i Ä‘Ã£ tá»“n táº¡i trÃªn há»‡ thá»‘ng |
| ERR:14 | Lá»—i trong quÃ¡ trÃ¬nh thá»±c hiá»‡n cáº¥p sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| ERR:31 | Sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o khÃ´ng há»£p lá»‡ |  |
| ERR:60 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (CÃ³ mÃ£ / KhÃ´ng mÃ£). |  |
| ERR:61 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (HD GTGT / HD bÃ¡n hÃ ng...). |  |
| ERR:62 | KhÃ´ng Ä‘Æ°á»£c dÃ¹ng khÃ´ng mÃ£ Ä‘Äƒng kÃ½ gá»­i báº£ng tá»•ng há»£p thay tháº¿, Ä‘iá»u chá»‰nh cÃ¡c hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i thÃ´ng tin chi tiáº¿t. |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thay tháº¿PatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n thay tháº¿Serial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n thay tháº¿invNumber: sá»‘ hÃ³a Ä‘Æ¡n thay tháº¿ |  |

**Cáº¥u trÃºc cá»§a xmlInvData trÆ°á»ng há»£p khÃ´ng cÃ³ trÆ°á»ng má»Ÿ rá»™ng (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<ReplaceInv>

<key>**fkey hÃ³a Ä‘Æ¡n\***</key>

**<**InvoiceNo**\>Sá»‘ hÃ³a Ä‘Æ¡n</**InvoiceNo**\>**

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod>**PhÆ°Æ¡ng thá»©c thanh toÃ¡n**</PaymentMethod>

<CusBankName>**TÃªn ngÃ¢n hÃ ng**</CusBankName>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<CusBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</CusBankNo>

<Products>

<Product>

<Code>**MÃ£ sáº£n pháº©m\***</Code>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n\***</Amount>

<Remark>**Remark**</Remark>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tá»•ng tiá»n thuáº¿\***</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**Chiáº¿t kháº¥u**</Discount>

<DiscountAmount>**Tá»•ng tiá»n chiáº¿t kháº¥u**</DiscountAmount>

<IsSum> **TÃ­nh cháº¥t \* (0-HÃ ng hÃ³a, dá»‹ch vá»¥; 1-Khuyáº¿n máº¡i; 2-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)**</IsSum>

</Product>

</Products>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**NgÃ y dá»‹ch vá»¥**</ArisingDate>

<PaymentStatus>**Tráº¡ng thÃ¡i thanh toÃ¡n**</PaymentStatus>

<EmailDeliver>**EmailDeliver**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**MÃ£ sá»‘ thuáº¿**</ComTaxCode>

<ComFax>**Company Fax**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue>**GrossValue**</GrossValue>

<GrossValue0>**GrossValue0**</GrossValue0>

<VatAmount0>**VatAmount0**</VatAmount0>

<GrossValue5>**GrossValue5**</GrossValue5>

<VatAmount5>**VatAmount5**</VatAmount5>

<GrossValue10>**GrossValue10**</GrossValue10>

<VatAmount10>**VatAmount10**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**Äiá»‡n thoáº¡i cÃ´ng ty**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**CreateDate**</CreateDate>

<DiscountRate>**Chiáº¿t kháº¥u**</DiscountRate>

<CusSignStatus></CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax></GrossValue\_NonTax>

<CurrencyUnit>**ÄÆ¡n vá»‹ tiá»n tá»‡**</CurrencyUnit>

<ExchangeRate>**Tá»· giÃ¡**</ExchangeRate>

<ConvertedAmount>**Tá»•ng tiá»n quy Ä‘á»•i**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

<LDDNBo>**LDDNBO**</LDDNBo>

<HDSo>**HDSO**</HDSo>

<HVTNXHang>**HVTNXHANG**</HVTNXHang>

<TNVChuyen>**TNVCHUYEN**</TNVChuyen>

<PTVChuyen>**PTVCHUYEN**</PTVChuyen>

<HDKTSo>**HDKTSO**</HDKTSo>

<HDKTNgay>**HDKTNgay**</HDKTNgay>

</ReplaceInv>

**Cáº¥u trÃºc cá»§a xmlInvData trÆ°á»ng há»£p CÃ³ trÆ°á»ng má»Ÿ rá»™ng (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<ReplaceInv>

<key>**fkey hÃ³a Ä‘Æ¡n\***</key>

**<**InvoiceNo**\>Sá»‘ hÃ³a Ä‘Æ¡n</**InvoiceNo**\>**

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod>**PhÆ°Æ¡ng thá»©c thanh toÃ¡n**</PaymentMethod>

<CusBankName>**TÃªn ngÃ¢n hÃ ng**</CusBankName>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<CusBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</CusBankNo>

<Products>

<Product>

<Code>**MÃ£ sáº£n pháº©m\***</Code>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n\***</Amount>

<Remark>**Remark**</Remark>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tá»•ng tiá»n thuáº¿\***</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**Chiáº¿t kháº¥u**</Discount>

<DiscountAmount>**Tá»•ng tiá»n chiáº¿t kháº¥u**</DiscountAmount>

<IsSum> **TÃ­nh cháº¥t \* (0-HÃ ng hÃ³a, dá»‹ch vá»¥; 1-Khuyáº¿n máº¡i; 2-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)**</IsSum>

</Product>

</Products>

<Extras>

<Extra\_item>

<Extra\_Name>**Extra\_Name**</Extra\_Name>

<Extra\_Value>**Extra\_Value**</Extra\_Value>

</Extra\_item>

</Extras>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**NgÃ y dá»‹ch vá»¥**</ArisingDate>

<PaymentStatus>**Tráº¡ng thÃ¡i thanh toÃ¡n**</PaymentStatus>

<EmailDeliver>**EmailDeliver**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**MÃ£ sá»‘ thuáº¿**</ComTaxCode>

<ComFax>**Company Fax**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue>**GrossValue**</GrossValue>

<GrossValue0>**GrossValue0**</GrossValue0>

<VatAmount0>**VatAmount0**</VatAmount0>

<GrossValue5>**GrossValue5**</GrossValue5>

<VatAmount5>**VatAmount5**</VatAmount5>

<GrossValue10>**GrossValue10**</GrossValue10>

<VatAmount10>**VatAmount10**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**Äiá»‡n thoáº¡i cÃ´ng ty**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**CreateDate**</CreateDate>

<DiscountRate>**Chiáº¿t kháº¥u**</DiscountRate>

<CusSignStatus></CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax></GrossValue\_NonTax>

<CurrencyUnit>**ÄÆ¡n vá»‹ tiá»n tá»‡**</CurrencyUnit>

<ExchangeRate>**Tá»· giÃ¡**</ExchangeRate>

<ConvertedAmount>**Tá»•ng tiá»n quy Ä‘á»•i**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

<LDDNBo>**LDDNBO**</LDDNBo>

<HDSo>**HDSO**</HDSo>

<HVTNXHang>**HVTNXHANG**</HVTNXHang>

<TNVChuyen>**TNVCHUYEN**</TNVChuyen>

<PTVChuyen>**PTVCHUYEN**</PTVChuyen>

<HDKTSo>**HDKTSO**</HDKTSo>

<HDKTNgay>**HDKTNgay**</HDKTNgay>

</ReplaceInv>

### Html xem trÆ°á»›c khi thay tháº¿ hÃ³a Ä‘Æ¡n

URL

string **ReplaceInvoiceNoPublish**(string Account, string ACpass, string xmlInvData, string username, string pass, string fkey, int? convert, string pattern = null, string serial = null).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n láº¥y dá»¯ liá»‡u html hÃ³a Ä‘Æ¡n má»›i cá»§a thay tháº¿ hÃ³a Ä‘Æ¡n trÆ°á»›c khi kÃ½ sá»‘ phÃ¡t hÃ nh

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cÅ© vÃ  hÃ³a Ä‘Æ¡n thay tháº¿
*   **fkey:** Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n thay tháº¿
*   **Convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ½ hiá»‡u

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cáº§n thay tháº¿ |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | CÃ³ lá»—i trong quÃ¡ trÃ¬nh táº¡o má»›i hÃ³a Ä‘Æ¡n thay tháº¿ |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Æ°á»£c thay tháº¿ rá»“i. KhÃ´ng thá»ƒ thay tháº¿ ná»¯a. |  |
| ERR:9 | Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘Æ°á»£c thay tháº¿ |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:60 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (CÃ³ mÃ£ / KhÃ´ng mÃ£). |  |
| ERR:61 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (HD GTGT / HD bÃ¡n hÃ ng...). |  |
| ERR:62 | KhÃ´ng Ä‘Æ°á»£c dÃ¹ng khÃ´ng mÃ£ Ä‘Äƒng kÃ½ gá»­i báº£ng tá»•ng há»£p thay tháº¿, Ä‘iá»u chá»‰nh cÃ¡c hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i thÃ´ng tin chi tiáº¿t. |  |
| chuá»—i_hml_tráº£_vá» | Tráº£ vá» chuá»—i hml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n thay tháº¿ nhÆ°ng chÆ°a phÃ¡t hÃ nh, kÃ½ sá»‘ | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng html |

**Cáº¥u trÃºc cá»§a xmlInvData trÆ°á»ng há»£p khÃ´ng cÃ³ trÆ°á»ng má»Ÿ rá»™ng (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<ReplaceInv>

<key>**fkey hÃ³a Ä‘Æ¡n\***</key>

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod>**PhÆ°Æ¡ng thá»©c thanh toÃ¡n**</PaymentMethod>

<CusBankName>**TÃªn ngÃ¢n hÃ ng**</CusBankName>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<CusBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</CusBankNo>

<Products>

<Product>

<Code>**MÃ£ sáº£n pháº©m\***</Code>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n\***</Amount>

<Remark>**Remark**</Remark>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tá»•ng tiá»n thuáº¿\***</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**Chiáº¿t kháº¥u**</Discount>

<DiscountAmount>**Tá»•ng tiá»n chiáº¿t kháº¥u**</DiscountAmount>

<IsSum> **TÃ­nh cháº¥t \* (0-HÃ ng hÃ³a, dá»‹ch vá»¥; 1-Khuyáº¿n máº¡i; 2-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)**</IsSum>

</Product>

</Products>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**NgÃ y dá»‹ch vá»¥**</ArisingDate>

<PaymentStatus>**Tráº¡ng thÃ¡i thanh toÃ¡n**</PaymentStatus>

<EmailDeliver>**EmailDeliver**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**MÃ£ sá»‘ thuáº¿**</ComTaxCode>

<ComFax>**Company Fax**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue>**GrossValue**</GrossValue>

<GrossValue0>**GrossValue0**</GrossValue0>

<VatAmount0>**VatAmount0**</VatAmount0>

<GrossValue5>**GrossValue5**</GrossValue5>

<VatAmount5>**VatAmount5**</VatAmount5>

<GrossValue10>**GrossValue10**</GrossValue10>

<VatAmount10>**VatAmount10**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**Äiá»‡n thoáº¡i cÃ´ng ty**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**CreateDate**</CreateDate>

<DiscountRate>**Chiáº¿t kháº¥u**</DiscountRate>

<CusSignStatus></CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax></GrossValue\_NonTax>

<CurrencyUnit>**ÄÆ¡n vá»‹ tiá»n tá»‡**</CurrencyUnit>

<ExchangeRate>**Tá»· giÃ¡**</ExchangeRate>

<ConvertedAmount>**Tá»•ng tiá»n quy Ä‘á»•i**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>**SMSDeliver**</SMSDeliver>

<LDDNBo>**LDDNBO**</LDDNBo>

<HDSo>**HDSO**</HDSo>

<HVTNXHang>**HVTNXHANG**</HVTNXHang>

<TNVChuyen>**TNVCHUYEN**</TNVChuyen>

<PTVChuyen>**PTVCHUYEN**</PTVChuyen>

<HDKTSo>**HDKTSO**</HDKTSo>

<HDKTNgay>**HDKTNgay**</HDKTNgay>

</ReplaceInv>

**Cáº¥u trÃºc cá»§a xmlInvData trÆ°á»ng há»£p CÃ³ trÆ°á»ng má»Ÿ rá»™ng (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<ReplaceInv>

<key>**fkey hÃ³a Ä‘Æ¡n\***</key>

<CusCode>**MÃ£ khÃ¡ch hÃ ng\***</CusCode>

<CusName>**TÃªn khÃ¡ch hÃ ng\***</CusName>

<CusAddress>**Äá»‹a chá»‰ khÃ¡ch hÃ ng\***</CusAddress>

<CusPhone>**Äiá»‡n thoáº¡i khÃ¡ch hÃ ng**</CusPhone>

<CusTaxCode>**MÃ£ sá»‘ thuáº¿ KH (Báº¯t buá»™c vá»›i KH lÃ  Doanh nghiá»‡p)**</CusTaxCode>

<PaymentMethod>**PhÆ°Æ¡ng thá»©c thanh toÃ¡n**</PaymentMethod>

<CusBankName>**TÃªn ngÃ¢n hÃ ng**</CusBankName>

<KindOfService>**ThÃ¡ng hÃ³a Ä‘Æ¡n**</KindOfService>

<CusBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</CusBankNo>

<Products>

<Product>

<Code>**MÃ£ sáº£n pháº©m\***</Code>

<ProdName>**TÃªn sáº£n pháº©m\***</ProdName>

<ProdUnit>**ÄÆ¡n vá»‹ tÃ­nh**</ProdUnit>

<ProdQuantity>**Sá»‘ lÆ°á»£ng**</ProdQuantity>

<ProdPrice>**ÄÆ¡n giÃ¡**</ProdPrice>

<Amount>**Tá»•ng tiá»n\***</Amount>

<Remark>**Remark**</Remark>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tá»•ng tiá»n thuáº¿\***</VATAmount>

<Extra1>**Má»Ÿ rá»™ng 1**</Extra1>

<Extra2>**Má»Ÿ rá»™ng 2**</Extra2>

<Discount>**Chiáº¿t kháº¥u**</Discount>

<DiscountAmount>**Tá»•ng tiá»n chiáº¿t kháº¥u**</DiscountAmount>

<IsSum> **TÃ­nh cháº¥t \* (0-HÃ ng hÃ³a, dá»‹ch vá»¥; 1-Khuyáº¿n máº¡i; 2-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)**</IsSum>

</Product>

</Products>

<Extras>

<Extra\_item>

<Extra\_Name>**Extra\_Name**</Extra\_Name>

<Extra\_Value>**Extra\_Value**</Extra\_Value>

</Extra\_item>

</Extras>

<Total>**Tá»•ng tiá»n trÆ°á»›c thuáº¿\***</Total>

<DiscountAmount>**Tiá»n giáº£m trá»«**</DiscountAmount>

<VATRate>**Thuáº¿ GTGT\***</VATRate>

<VATAmount>**Tiá»n thuáº¿ GTGT\***</VATAmount>

<Amount>**Tá»•ng tiá»n\***</Amount>

<AmountInWords>**Sá»‘ tiá»n viáº¿t báº±ng chá»¯\***</AmountInWords>

<Extra>**TrÆ°á»ng má»Ÿ rá»™ng**</Extra>

<ArisingDate>**NgÃ y dá»‹ch vá»¥**</ArisingDate>

<PaymentStatus>**Tráº¡ng thÃ¡i thanh toÃ¡n**</PaymentStatus>

<EmailDeliver>**EmailDeliver**</EmailDeliver>

<ComName>**TÃªn cÃ´ng ty**</ComName>

<ComAddress>**Äá»‹a chá»‰ cÃ´ng ty**</ComAddress>

<ComTaxCode>**MÃ£ sá»‘ thuáº¿**</ComTaxCode>

<ComFax>**Company Fax**</ComFax>

<ResourceCode>**ResourceCode**</ResourceCode>

<GrossValue>**GrossValue**</GrossValue>

<GrossValue0>**GrossValue0**</GrossValue0>

<VatAmount0>**VatAmount0**</VatAmount0>

<GrossValue5>**GrossValue5**</GrossValue5>

<VatAmount5>**VatAmount5**</VatAmount5>

<GrossValue10>**GrossValue10**</GrossValue10>

<VatAmount10>**VatAmount10**</VatAmount10>

<Buyer>**TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng**</Buyer>

<Name>**TÃªn hÃ³a Ä‘Æ¡n**</Name>

<ComPhone>**Äiá»‡n thoáº¡i cÃ´ng ty**</ComPhone>

<ComBankName>**TÃªn ngÃ¢n hÃ ng**</ComBankName>

<ComBankNo>**Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng**</ComBankNo>

<CreateDate>**CreateDate**</CreateDate>

<DiscountRate>**Chiáº¿t kháº¥u**</DiscountRate>

<CusSignStatus></CusSignStatus>

<CreateBy>**CreateBy**</CreateBy>

<PublishBy>**PublishBy**</PublishBy>

<Note>**Note**</Note>

<ProcessInvNote>**ProcessInvNote**</ProcessInvNote>

<Fkey>**Fkey**</Fkey>

<GrossValue\_NonTax></GrossValue\_NonTax>

<CurrencyUnit>**ÄÆ¡n vá»‹ tiá»n tá»‡**</CurrencyUnit>

<ExchangeRate>**Tá»· giÃ¡**</ExchangeRate>

<ConvertedAmount>**Tá»•ng tiá»n quy Ä‘á»•i**</ConvertedAmount>

<Extra1>**Extra1**</Extra1>

<Extra2>**Extra2**</Extra2>

<SMSDeliver>SMSDeliver</SMSDeliver>

<LDDNBo>**LDDNBO**</LDDNBo>

<HDSo>**HDSO**</HDSo>

<HVTNXHang>**HVTNXHANG**</HVTNXHang>

<TNVChuyen>**TNVCHUYEN**</TNVChuyen>

<PTVChuyen>**PTVCHUYEN**</PTVChuyen>

<HDKTSo>**HDKTSO**</HDKTSo>

<HDKTNgay>**HDKTNgay**</HDKTNgay>

</ReplaceInv>

### Há»§y hÃ³a Ä‘Æ¡n theo fkey

URL

string **cancelInv**(string Account, string ACpass, string Fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n há»§y hÃ³a Ä‘Æ¡n theo giÃ¡ trá»‹ fkey truyá»n vÃ o

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass :** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **fkey:**Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n há»§y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:6 | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng, hoáº·c lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘Ã£ bá»‹ Ä‘iá»u chá»‰nh / há»§y / hÃ³a Ä‘Æ¡n má»›i táº¡o khÃ´ng thá»ƒ há»§y Ä‘Æ°á»£c |  |
| ERR:9 | HÃ³a Ä‘Æ¡n Ä‘Ã£ thanh toÃ¡n, khÃ´ng cho phÃ©p há»§y |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| OK: | Há»§y hÃ³a Ä‘Æ¡n thÃ nh cÃ´ng |  |

### Há»§y hÃ³a Ä‘Æ¡n khÃ´ng check tráº¡ng thÃ¡i thanh toÃ¡n

URL

string **cancelInvNoPay**(string Account, string ACpass, string Fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n há»§y hÃ³a Ä‘Æ¡n theo giÃ¡ trá»‹ fkey truyá»n vÃ o

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass :** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **fkey:**Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n há»§y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:6 | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng, hoáº·c lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘Ã£ bá»‹ Ä‘iá»u chá»‰nh / há»§y / hÃ³a Ä‘Æ¡n má»›i táº¡o khÃ´ng thá»ƒ há»§y Ä‘Æ°á»£c |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| OK: | Há»§y hÃ³a Ä‘Æ¡n thÃ nh cÃ´ng |  |

### Gáº¡ch ná»£ hÃ³a Ä‘Æ¡n theo fkey

URL

string **confirmPaymentFkey**(string lstFkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n gáº¡ch ná»£ hÃ³a Ä‘Æ¡n theo fkey truyá»n vÃ o

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **lstFkey:** Chuá»—i Fkey xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y(cÃ¡c Fkey phÃ¢n biá»‡t nhau báº±ng â€œ\_â€)

**VD:**012013\_022013\_032013

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n tÆ°Æ¡ng á»©ng chuá»—i Ä‘Æ°a vÃ o |  |
| ERR:7 | KhÃ´ng thá»±c hiá»‡n gáº¡ch ná»£ Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n | KhÃ´n tÃ¬m tháº¥y thÃ´ng tin cÃ´ng tyKhÃ´ng thá»±c hiá»‡n Ä‘Æ°á»£c cÃ¡c nghiá»‡p vá»¥ deliverLá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:13 | HÃ³a Ä‘Æ¡n Ä‘Ã£ thanh toÃ¡n trÆ°á»›c Ä‘Ã³ |  |
| OK | HÃ³a Ä‘Æ¡n gáº¡ch ná»£ thÃ nh cÃ´ng |  |

### PhÃ¢n phá»‘i hÃ³a Ä‘Æ¡n

URL

string **deliverInv**(string lstInvToken, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n táº¡o báº£n ghi deliver cho viá»‡c phÃ¢n phá»‘i hÃ³a Ä‘Æ¡n

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **lstInvToken:** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y(theo cáº¥u trÃºc patternt;serial;sá»‘hÃ³aÄ‘Æ¡n)

**VD:** 01GTKT2/001;AA/13E;10\_01GTKT2/001;AA/13E;11

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | Chuá»—i token khÃ´ng há»£p lá»‡ |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n tÆ°Æ¡ng á»©ng chuá»—i Ä‘Æ°a vÃ o |  |
| ERR:11 | Chuá»—i token Ä‘Ãºng Ä‘á»‹nh dáº¡ng nhÆ°ng khÃ´ng tá»“n táº¡i, hoáº·c lÃ  cá»§a hÃ³a Ä‘Æ¡n Ä‘Ã£ bá»‹ há»§y, bá»‹ thay tháº¿ |  |
| ERR: | CÃ³ lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |  |
| OK | HÃ³a Ä‘Æ¡n gáº¡ch ná»£ thÃ nh cÃ´ng |  |

### ÄÃ­nh kÃ¨m file báº£ng kÃª cho hÃ³a Ä‘Æ¡n theo sá»‘ hÃ³a Ä‘Æ¡n

URL

string **ImportAttachmentByNo** (string Account, string ACpass, string username, string pass, byte\[\] bytes, string pattern, string serial, int no)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n Ä‘Ã­nh kÃ¨m file báº£ng kÃª cho hÃ³a Ä‘Æ¡n theo sá»‘ hÃ³a Ä‘Æ¡n.

HTTP METHOD

POST

REQUEST BODY

*   **username /** **pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **pattern**: Máº«u sá»‘
*   **serial**: KÃ½ hiá»‡u
*   **no:** Sá»‘ hÃ³a Ä‘Æ¡n
*   **bytes:** file dáº¡ng byte

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | Sai Ä‘á»‹nh dáº¡ng file |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty |  |
| ERR:4 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n |  |
| ERR:3 | File vÆ°á»£t quÃ¡ 10MB |  |
| ERR:6 | Lá»—i táº¡o folder |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra |  |
| OK:MD5_file | Tráº£ vá» OK: Chá»—i MD5 cá»§a file |  |

### Dowload file báº£ng kÃª cá»§a hÃ³a Ä‘Æ¡n theo Fkey

URL

string GetFile(string userName, string userPass, string fkey, string pattern)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n táº£i file báº£ng kÃª cá»§a hÃ³a Ä‘Æ¡n theo fkey.

HTTP METHOD

POST

REQUEST BODY

*   **userName/userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **fkey:** Fkey cá»§a hÃ³a Ä‘Æ¡n
*   **pattern**: Máº«u sá»‘

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n vá»›i Fkey truyá»n vÃ o |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty |  |
| ERR:8 | HÃ³a Ä‘Æ¡n khÃ´ng cÃ³ file Ä‘Ã­nh kÃ¨m |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra khi thá»±c hiá»‡n táº£i file |  |
| Chuá»—i base64 | Tráº£ vá» chuá»—i base64 tÆ°Æ¡ng á»©ng vá»›i file. |  |

### Äiá»u chá»‰nh nhiá»u hÃ³a Ä‘Æ¡n

URL

string **AdjustInvoiceMulti** (string Account, string ACpass, string xmlInvData, string username, string pass, string fkeys, string AttachFile, int? convert, string pattern = null, string serial = null)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n Ä‘iá»u chá»‰nh nhiá»u hÃ³a Ä‘Æ¡n cÃ¹ng lÃºc.

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh
*   **fkeys:** Danh sÃ¡ch chuá»—i fkey xÃ¡c Ä‘á»‹nh cÃ¡c hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh
*   **Convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ½ hiá»‡u

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | HÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh khÃ´ng tá»“n táº¡i |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh Ä‘Ã£ bá»‹ thay tháº¿. KhÃ´ng thá»ƒ Ä‘iá»u chá»‰nh Ä‘Æ°á»£c ná»¯a. |  |
| ERR:9 | Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘Æ°á»£c Ä‘iá»u chá»‰nh |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | Fkey cá»§a hÃ³a Ä‘Æ¡n má»›i Ä‘Ã£ tá»“n táº¡i trÃªn há»‡ thá»‘ng |
| ERR:14 | Lá»—i trong quÃ¡ trÃ¬nh thá»±c hiá»‡n cáº¥p sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhSerial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhinvNumber: sá»‘ hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh |  |

### KhÃ´i phá»¥c hÃ³a Ä‘Æ¡n Ä‘Ã£ há»§y Fkey

URL

string **restoreCancelInvFkey** (string Account, string ACpass, string fkey, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n khÃ´i phá»¥c hÃ³a Ä‘Æ¡n Ä‘Ã£ há»§y vá» tráº¡ng thÃ¡i Ä‘ang sá»­ dá»¥ng báº±ng Fkey

HTTP METHOD

POST

REQUEST BODY

*   **Account/** **ACpass**: TÃ i khoáº£n truy cáº­p CAdmin.
*   **fkey:** Fkey cá»§a hÃ³a Ä‘Æ¡n cáº§n khÃ´i phá»¥c.
*   **userName/userPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n hoáº·c cÃ³ nhiá»u hÆ¡n 1 hÃ³a Ä‘Æ¡n vá»›i tham sá»‘ Ä‘Ã£ truyá»n |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘ang khÃ´ng á»Ÿ tráº¡ng thÃ¡i Ä‘Ã£ há»§y |  |
| ERR:7 | TÃ i khoáº£n khÃ´ng phÃ¹ há»£p hoáº·c khÃ´ng tÃ¬m tháº¥y company á»©ng vá»›i tÃ i khoáº£n Ä‘Ã£ khai bÃ¡o |  |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin PublishInvoice |  |
| ERR:6 | Lá»—i Exception |  |
| OK | KhÃ´i phá»¥c hÃ³a Ä‘Æ¡n thÃ nh cÃ´ng |  |

### KhÃ´i phá»¥c hÃ³a Ä‘Æ¡n Ä‘Ã£ há»§y Token

URL

string **restoreCancelInvFkey** (string Account, string ACpass, string token, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n khÃ´i phá»¥c hÃ³a Ä‘Æ¡n Ä‘Ã£ há»§y vá» tráº¡ng thÃ¡i Ä‘ang sá»­ dá»¥ng báº±ng Token

HTTP METHOD

POST

REQUEST BODY

*   **Account/** **ACpass**: TÃ i khoáº£n truy cáº­p CAdmin.
*   **token:** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y(theo cáº¥u trÃºc patternt;serial;sá»‘hÃ³aÄ‘Æ¡n).
*   **userName/userPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n hoáº·c cÃ³ nhiá»u hÆ¡n 1 hÃ³a Ä‘Æ¡n vá»›i tham sá»‘ Ä‘Ã£ truyá»n |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘ang khÃ´ng á»Ÿ tráº¡ng thÃ¡i Ä‘Ã£ há»§y |  |
| ERR:7 | TÃ i khoáº£n khÃ´ng phÃ¹ há»£p hoáº·c khÃ´ng tÃ¬m tháº¥y company á»©ng vá»›i tÃ i khoáº£n Ä‘Ã£ khai bÃ¡o |  |
| ERR:10 | VÆ°á»£t quÃ¡ giá»›i háº¡n sá»‘ thÃ´ng tin hÃ³a Ä‘Æ¡n truyá»n lÃªn báº±ng token |  |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin PublishInvoice |  |
| ERR:6 | Lá»—i Exception |  |
| OK | KhÃ´i phá»¥c hÃ³a Ä‘Æ¡n thÃ nh cÃ´ng |  |

### KhÃ´i phá»¥c hÃ³a Ä‘Æ¡n bá»‹ thay tháº¿ báº±ng FKey

URL

string **restoreReplacedInvFkey** (string Account, string ACpass, string fkeyReplaced, string fkeyReplacedOld, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n k khÃ´i phá»¥c hÃ³a Ä‘Æ¡n bá»‹ thay tháº¿ báº±ng Fkey tá»« hÃ³a Ä‘Æ¡n Ä‘Æ°á»£c thay vá» vá» hÃ³a Ä‘Æ¡n bá»‹ thay tháº¿

HTTP METHOD

POST

REQUEST BODY

*   **Account/** **ACpass**: TÃ i khoáº£n truy cáº­p CAdmin.
*   **fkeyReplaced:** FKey hÃ³a Ä‘Æ¡n Ä‘ang sá»­ dá»¥ng (Ä‘Æ°á»£c thay tháº¿, cáº§n khÃ´i phá»¥c vá» hÃ³a Ä‘Æ¡n trÆ°á»›c Ä‘Ã³).
*   **fkeyReplacedOld:** FKey hÃ³a Ä‘Æ¡n Ä‘Ã£ bá»‹ thay tháº¿ cáº§n khÃ´i phá»¥c láº¡i vá» tráº¡ng thÃ¡i sá»­ dá»¥ng
*   **userName/userPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n hoáº·c cÃ³ nhiá»u hÆ¡n 1 hÃ³a Ä‘Æ¡n vá»›i tham sá»‘ Ä‘Ã£ truyá»n |  |
| ERR:7 | TÃ i khoáº£n khÃ´ng phÃ¹ há»£p hoáº·c khÃ´ng tÃ¬m tháº¥y company á»©ng vá»›i tÃ i khoáº£n Ä‘Ã£ khai bÃ¡o |  |
| ERR:8 | HÃ³a Ä‘Æ¡n thay tháº¿ Ä‘ang khÃ´ng á»Ÿ tráº¡ng thÃ¡i cÃ³ chá»© kÃ½ cá»§a nhÃ  phÃ¡t hÃ nh |  |
| ERR:9 | ThÃ´ng tin hÃ³a Ä‘Æ¡n gá»‘c vÃ  hÃ³a Ä‘Æ¡n bá»‹ thay tháº¿ khÃ´ng chÃ­nh xÃ¡c |  |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin PublishInvoice |  |
| ERR:6 | Lá»—i Exception |  |
| OK | KhÃ´i phá»¥c hÃ³a Ä‘Æ¡n thÃ nh cÃ´ng |  |

### KhÃ´i phá»¥c hÃ³a Ä‘Æ¡n bá»‹ thay tháº¿ báº±ng Token

URL

string **restoreReplacedInvFkey** (string Account, string ACpass, string tokenReplaced, string tokenReplacedOld, string userName, string userPass)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n k khÃ´i phá»¥c hÃ³a Ä‘Æ¡n bá»‹ thay tháº¿ báº±ng Token tá»« hÃ³a Ä‘Æ¡n Ä‘Æ°á»£c thay vá» vá» hÃ³a Ä‘Æ¡n bá»‹ thay tháº¿

HTTP METHOD

POST

REQUEST BODY

*   **Account/** **ACpass**: TÃ i khoáº£n truy cáº­p CAdmin.
*   **tokenReplaced:** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y(theo cáº¥u trÃºc patternt;serial;sá»‘hÃ³aÄ‘Æ¡n) cá»§a hÃ³a Ä‘Æ¡n Ä‘ang sá»­ dá»¥ng (Ä‘Æ°á»£c thay tháº¿, cáº§n khÃ´i phá»¥c vá» hÃ³a Ä‘Æ¡n trÆ°á»›c Ä‘Ã³).
*   **tokenReplacedOld:** Chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y(theo cáº¥u trÃºc patternt;serial;sá»‘hÃ³aÄ‘Æ¡n) cá»§a hÃ³a Ä‘Æ¡n Ä‘Ã£ bá»‹ thay tháº¿ cáº§n khÃ´i phá»¥c láº¡i vá» tráº¡ng thÃ¡i sá»­ dá»¥ng
*   **userName/userPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n hoáº·c cÃ³ nhiá»u hÆ¡n 1 hÃ³a Ä‘Æ¡n vá»›i tham sá»‘ Ä‘Ã£ truyá»n |  |
| ERR:7 | TÃ i khoáº£n khÃ´ng phÃ¹ há»£p hoáº·c khÃ´ng tÃ¬m tháº¥y company á»©ng vá»›i tÃ i khoáº£n Ä‘Ã£ khai bÃ¡o |  |
| ERR:8 | HÃ³a Ä‘Æ¡n thay tháº¿ Ä‘ang khÃ´ng á»Ÿ tráº¡ng thÃ¡i cÃ³ chá»© kÃ½ cá»§a nhÃ  phÃ¡t hÃ nh |  |
| ERR:9 | ThÃ´ng tin hÃ³a Ä‘Æ¡n gá»‘c vÃ  hÃ³a Ä‘Æ¡n bá»‹ thay tháº¿ khÃ´ng chÃ­nh xÃ¡c |  |
| ERR:10 | VÆ°á»£t quÃ¡ giá»›i háº¡n sá»‘ thÃ´ng tin hÃ³a Ä‘Æ¡n truyá»n lÃªn báº±ng token |  |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin PublishInvoice |  |
| ERR:6 | Lá»—i Exception |  |
| OK | KhÃ´i phá»¥c hÃ³a Ä‘Æ¡n thÃ nh cÃ´ng |  |

# Danh sÃ¡ch cÃ¡c hÃ m tÃ­ch há»£p thÃ´ng tÆ° 78

## NhÃ³m cÃ¡c hÃ m webservice táº¡o láº­p vÃ  phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n (PublishService)

**MÃ´ táº£: cÃ¡c Ä‘áº§u hÃ m web service náº±m trong PublishService.asmx, thá»±c hiá»‡n cÃ¡c nghiá»‡p vá»¥ liÃªn quan Ä‘áº¿n táº¡o láº­p, phÃ¡t hÃ nh vÃ  xá»­ lÃ½ hÃ³a Ä‘Æ¡n**

### PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n

URL

String **ImportAndPublishInv**(string Account, string ACpass, string xmlInvData, string username, string password, string pattern = "", string serial = "", int convert = 0).

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n vá»›i dá»¯ liá»‡u XML cá»§a khÃ¡ch hÃ ng, tá»‘i Ä‘a cho 5000 hÃ³a Ä‘Æ¡n.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass :** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice ( tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: Chuá»—i XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n ( theo cáº¥u trÃºc mÃ´ táº£)
*   **pattern:** Máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **serial:** KÃ½ hiá»‡u hÃ³a Ä‘Æ¡n
*   **convert:** Máº·c Ä‘á»‹nh lÃ  0 (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode / 1- Cáº§n convert tá»« TCVN3 sang Unicode)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm khÃ¡ch hÃ ng |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh | Há»‡ thá»‘ng sáº½ tráº£ vá» lá»—i náº¿u 1 hÃ³a Ä‘Æ¡n trong chuá»—i XML Ä‘áº§u vÃ o khÃ´ng há»£p lá»‡, cáº£ lÃ´ hÃ³a Ä‘Æ¡n sáº½ khÃ´ng Ä‘Æ°á»£c phÃ¡t hÃ nh. |
| ERR:7 | ThÃ´ng tin vá» Username/pass khÃ´ng há»£p lá»‡ |  |
| ERR:20 | Pattern vÃ  Serial khÃ´ng phÃ¹ há»£p, hoáº·c khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Äƒng kÃ­ cÃ³ sá»­ dá»¥ng Pattern vÃ  Serial truyá»n vÃ o. |  |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, kiá»ƒm tra exception tráº£ vá» (DB roll back) |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng cho phÃ©p |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘á»§ sá»‘ hÃ³a Ä‘Æ¡n cho lÃ´ phÃ¡t hÃ nh |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | 1 hoáº·c nhiá»u hÃ³a Ä‘Æ¡n trong lÃ´ hÃ³a Ä‘Æ¡n cÃ³ Fkey trÃ¹ng vá»›i Fkey cá»§a hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |
| ERR:21 | Lá»—i trÃ¹ng sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| OK:pattern;serial1-key1_num1,key2_num12, â€¦)(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E-key1_1,key2_2,key3_3,key4_4,key5_5) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPattern ğŸ¡ª Máº«u sá»‘ cá»§a cÃ¡c hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nhSerial1 ğŸ¡ª serial cá»§a dÃ£y cÃ¡c hÃ³a Ä‘Æ¡n phÃ¡t hÃ nhnum1, num2â€¦ lÃ  cÃ¡c sá»‘ hÃ³a Ä‘Æ¡nkey1,key2â€¦ lÃ  khÃ³a Ä‘á»ƒ nháº­n biáº¿t hÃ³a Ä‘Æ¡n phÃ¡t hÃ nh cho khÃ¡ch hÃ ng nÃ o(láº¥y tá»« Ä‘áº§u vÃ o) | CÃ¡c hÃ³a Ä‘Æ¡n cÃ³ serial khÃ¡c nhau phÃ¢n cÃ¡ch bá»Ÿi dáº¥u â€œ;â€CÃ¡c sá»‘ hÃ³a Ä‘Æ¡n phÃ¢n cÃ¡ch bá»Ÿi â€œ,â€ |

**Äá»‹nh dáº¡ng chuá»—i xml Ä‘áº§u vÃ o (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<DSHDon>

<HDon>

<key>Fkey cua hoa don</key>

<DLHDon>

<TTChung>

<SHDon>Sá»‘ hÃ³a Ä‘Æ¡n</SHDon>

<MHSo>MÃ£ há»“ sÆ¡</MHSo>

<SBKe>Sá»‘ báº£ng kÃª (Sá»‘ cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</SBKe>

<NBKe>NgÃ y báº£ng kÃª (NgÃ y cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</NBKe>

<DVTTe>ÄÆ¡n vá»‹ tiá»n tá»‡ \*</DVTTe>

<TGia>Tá»· giÃ¡ (Báº¯t buá»™c (Trá»« trÆ°á»ng há»£p ÄÆ¡n vá»‹ tiá»n tá»‡ lÃ  VND))</TGia>

<HTTToan>HÃ¬nh thá»©c thanh toÃ¡n </HTTToan>

</TTChung>

<NDHDon>

<NBan>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ \*</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<Fax>Fax</Fax>

<LDDNBo>Lá»‡nh Ä‘iá»u Ä‘á»™ng ná»™i bá»™ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</LDDNBo>

<HDSo>Há»£p Ä‘á»“ng sá»‘ (Há»£p Ä‘á»“ng váº­n chuyá»ƒn) (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HDSo>

<HVTNXHang>Há» vÃ  tÃªn ngÆ°á»i xuáº¥t hÃ ng (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HVTNXHang>

<TNVChuyen>TÃªn ngÆ°á»i váº­n chuyá»ƒn (phiáº¿u xuáº¥t kho)</TNVChuyen>

<PTVChuyen>PhÆ°Æ¡ng tiá»‡n váº­n chuyá»ƒn (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho)</PTVChuyen>

<HDKTSo>Há»£p Ä‘á»“ng kinh táº¿ sá»‘ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTSo>

<HDKTNgay>Há»£p Ä‘á»“ng kinh táº¿ ngÃ y (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTNgay>

</NBan>

<NMua>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ (Báº¯t buá»™c náº¿u cÃ³)</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<MKHang>MÃ£ khÃ¡ch hÃ ng</MKHang>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<HVTNMHang>Há» vÃ  tÃªn ngÆ°á»i mua hÃ ng</HVTNMHang>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<HVTNNHang>Há» vÃ  tÃªn ngÆ°á»i nháº­n hÃ ng (phiáº¿u xuáº¥t kho)</HVTNNHang>

</NMua>

<DSHHDVu>

<HHDVu>

<TChat>TÃ­nh cháº¥t \* (1-HÃ ng hÃ³a, dá»‹ch vá»¥; 2-Khuyáº¿n máº¡i; 3-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)</TChat>

<STT>Sá»‘ thá»© tá»±</STT>

<MHHDVu>MÃ£ hÃ ng hÃ³a, dá»‹ch vá»¥ (Báº¯t buá»™c náº¿u cÃ³)</MHHDVu>

<THHDVu>TÃªn hÃ ng hÃ³a, dá»‹ch vá»¥ \*</THHDVu>

<DVTinh>ÄÆ¡n vá»‹ tÃ­nh (Báº¯t buá»™c náº¿u cÃ³)</DVTinh>

<SLuong>Sá»‘ lÆ°á»£ng (Báº¯t buá»™c náº¿u cÃ³)</SLuong>

<DGia>ÄÆ¡n giÃ¡ (Báº¯t buá»™c náº¿u cÃ³)</DGia>

<TLCKhau>Tá»· lá»‡ % chiáº¿t kháº¥u</TLCKhau>

<STCKhau>Sá»‘ tiá»n chiáº¿t kháº¥u </STCKhau>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) - Báº¯t buá»™c trá»« trÆ°á»ng há»£p TChat = 4</ThTien>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<TThue>Tiá»n thuáº¿</TThue>

<TSThue>Tiá»n sau thuáº¿</TSThue>

<TTKhac>

<TTin>

<TTruong>TÃªn trÆ°á»ng</TTruong>

<KDLieu>Kiá»ƒu dá»¯ liá»‡u</KDLieu>

<DLieu>Dá»¯ liá»‡u</DLieu>

</TTin>

</TTKhac>

</HHDVu>

</DSHHDVu>

<TToan>

<THTTLTSuat><!--sá»­ dá»¥ng hÃ³a Ä‘Æ¡n GTGT-->

<LTSuat>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT)</ThTien>

<TThue>Tiá»n thuáº¿ (Tiá»n thuáº¿ GTGT)</TThue>

</LTSuat>

</THTTLTSuat>

<TgTCThue>Tá»•ng tiá»n chÆ°a thuáº¿ (Tá»•ng cá»™ng thÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTCThue>

<TgTThue>Tá»•ng tiá»n thuáº¿ (Tá»•ng cá»™ng tiá»n thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTThue>

<TTCKTMai>Tá»•ng tiá»n chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i</TTCKTMai>

<TgTTTBSo>Tá»•ng tiá»n thanh toÃ¡n báº±ng sá»‘ \*</TgTTTBSo>

<TgTTTBChu>Tá»•ng tiá»n thanh toÃ¡n báº±ng chá»¯ \*</TgTTTBChu>

</TToan>

</NDHDon>

</DLHDon>

</HDon>

</DSHDon>

### PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n theo sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o

URL

String **ImportAndPublishAssignedNo**(string Account, string ACpass, string xmlInvData, string username, string password, int convert).

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n vá»›i dá»¯ liá»‡u XML cá»§a khÃ¡ch hÃ ng cho phÃ©p truyá»n sá»‘ hÃ³a Ä‘Æ¡n khi phÃ¡t hÃ nh, tá»‘i Ä‘a cho 5000 hÃ³a Ä‘Æ¡n.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass :** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice ( tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: Chuá»—i XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n ( theo cáº¥u trÃºc mÃ´ táº£)
*   **convert:** Máº·c Ä‘á»‹nh lÃ  0 (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode / 1- Cáº§n convert tá»« TCVN3 sang Unicode)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm khÃ¡ch hÃ ng |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh | Há»‡ thá»‘ng sáº½ tráº£ vá» lá»—i náº¿u 1 hÃ³a Ä‘Æ¡n trong chuá»—i XML Ä‘áº§u vÃ o khÃ´ng há»£p lá»‡, cáº£ lÃ´ hÃ³a Ä‘Æ¡n sáº½ khÃ´ng Ä‘Æ°á»£c phÃ¡t hÃ nh. |
| ERR:7 | ThÃ´ng tin vá» Username/pass khÃ´ng há»£p lá»‡ |  |
| ERR:20 | Pattern vÃ  Serial khÃ´ng phÃ¹ há»£p, hoáº·c khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Äƒng kÃ­ cÃ³ sá»­ dá»¥ng Pattern vÃ  Serial truyá»n vÃ o. |  |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, kiá»ƒm tra exception tráº£ vá» (DB roll back) |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng cho phÃ©p |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘á»§ sá»‘ hÃ³a Ä‘Æ¡n cho lÃ´ phÃ¡t hÃ nh |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | 1 hoáº·c nhiá»u hÃ³a Ä‘Æ¡n trong lÃ´ hÃ³a Ä‘Æ¡n cÃ³ Fkey trÃ¹ng vá»›i Fkey cá»§a hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |
| ERR:21 | Lá»—i trÃ¹ng sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| ERR:31 | Sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o khÃ´ng há»£p lá»‡ |  |
| OK:pattern;serial1-key1_num1,key2_num12, â€¦)(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E-key1_1,key2_2,key3_3,key4_4,key5_5) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPattern ğŸ¡ª Máº«u sá»‘ cá»§a cÃ¡c hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nhSerial1 ğŸ¡ª serial cá»§a dÃ£y cÃ¡c hÃ³a Ä‘Æ¡n phÃ¡t hÃ nhnum1, num2â€¦ lÃ  cÃ¡c sá»‘ hÃ³a Ä‘Æ¡nkey1,key2â€¦ lÃ  khÃ³a Ä‘á»ƒ nháº­n biáº¿t hÃ³a Ä‘Æ¡n phÃ¡t hÃ nh cho khÃ¡ch hÃ ng nÃ o(láº¥y tá»« Ä‘áº§u vÃ o) | CÃ¡c hÃ³a Ä‘Æ¡n cÃ³ serial khÃ¡c nhau phÃ¢n cÃ¡ch bá»Ÿi dáº¥u â€œ;â€CÃ¡c sá»‘ hÃ³a Ä‘Æ¡n phÃ¢n cÃ¡ch bá»Ÿi â€œ,â€ |

**Äá»‹nh dáº¡ng chuá»—i xml Ä‘áº§u vÃ o (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<DSHDon>

<HDon>

<key>Fkey cua hoa don</key>

<DLHDon>

<InvoiceNo>Sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o \*</InvoiceNo>

<TTChung>

<SHDon>Sá»‘ hÃ³a Ä‘Æ¡n</SHDon>

<MHSo>MÃ£ há»“ sÆ¡</MHSo>

<SBKe>Sá»‘ báº£ng kÃª (Sá»‘ cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</SBKe>

<NBKe>NgÃ y báº£ng kÃª (NgÃ y cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</NBKe>

<DVTTe>ÄÆ¡n vá»‹ tiá»n tá»‡ \*</DVTTe>

<TGia>Tá»· giÃ¡ (Báº¯t buá»™c (Trá»« trÆ°á»ng há»£p ÄÆ¡n vá»‹ tiá»n tá»‡ lÃ  VND))</TGia>

<HTTToan>HÃ¬nh thá»©c thanh toÃ¡n </HTTToan>

</TTChung>

<NDHDon>

<NBan>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ \*</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<Fax>Fax</Fax>

<LDDNBo>Lá»‡nh Ä‘iá»u Ä‘á»™ng ná»™i bá»™ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</LDDNBo>

<HDSo>Há»£p Ä‘á»“ng sá»‘ (Há»£p Ä‘á»“ng váº­n chuyá»ƒn) (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HDSo>

<HVTNXHang>Há» vÃ  tÃªn ngÆ°á»i xuáº¥t hÃ ng (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HVTNXHang>

<TNVChuyen>TÃªn ngÆ°á»i váº­n chuyá»ƒn (phiáº¿u xuáº¥t kho)</TNVChuyen>

<PTVChuyen>PhÆ°Æ¡ng tiá»‡n váº­n chuyá»ƒn (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho)</PTVChuyen>

<HDKTSo>Há»£p Ä‘á»“ng kinh táº¿ sá»‘ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTSo>

<HDKTNgay>Há»£p Ä‘á»“ng kinh táº¿ ngÃ y (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTNgay>

</NBan>

<NMua>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ (Báº¯t buá»™c náº¿u cÃ³)</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<MKHang>MÃ£ khÃ¡ch hÃ ng</MKHang>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<HVTNMHang>Há» vÃ  tÃªn ngÆ°á»i mua hÃ ng</HVTNMHang>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<HVTNNHang>Há» vÃ  tÃªn ngÆ°á»i nháº­n hÃ ng (phiáº¿u xuáº¥t kho)</HVTNNHang>

</NMua>

<DSHHDVu>

<HHDVu>

<TChat>TÃ­nh cháº¥t \* (1-HÃ ng hÃ³a, dá»‹ch vá»¥; 2-Khuyáº¿n máº¡i; 3-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)</TChat>

<STT>Sá»‘ thá»© tá»±</STT>

<MHHDVu>MÃ£ hÃ ng hÃ³a, dá»‹ch vá»¥ (Báº¯t buá»™c náº¿u cÃ³)</MHHDVu>

<THHDVu>TÃªn hÃ ng hÃ³a, dá»‹ch vá»¥ \*</THHDVu>

<DVTinh>ÄÆ¡n vá»‹ tÃ­nh (Báº¯t buá»™c náº¿u cÃ³)</DVTinh>

<SLuong>Sá»‘ lÆ°á»£ng (Báº¯t buá»™c náº¿u cÃ³)</SLuong>

<DGia>ÄÆ¡n giÃ¡ (Báº¯t buá»™c náº¿u cÃ³)</DGia>

<TLCKhau>Tá»· lá»‡ % chiáº¿t kháº¥u</TLCKhau>

<STCKhau>Sá»‘ tiá»n chiáº¿t kháº¥u </STCKhau>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) - Báº¯t buá»™c trá»« trÆ°á»ng há»£p TChat = 4</ThTien>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<TThue>Tiá»n thuáº¿</TThue>

<TSThue>Tiá»n sau thuáº¿</TSThue>

<TTKhac>

<TTin>

<TTruong>TÃªn trÆ°á»ng</TTruong>

<KDLieu>Kiá»ƒu dá»¯ liá»‡u</KDLieu>

<DLieu>Dá»¯ liá»‡u</DLieu>

</TTin>

</TTKhac>

</HHDVu>

</DSHHDVu>

<TToan>

<THTTLTSuat><!--sá»­ dá»¥ng hÃ³a Ä‘Æ¡n GTGT-->

<LTSuat>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT)</ThTien>

<TThue>Tiá»n thuáº¿ (Tiá»n thuáº¿ GTGT)</TThue>

</LTSuat>

</THTTLTSuat>

<TgTCThue>Tá»•ng tiá»n chÆ°a thuáº¿ (Tá»•ng cá»™ng thÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTCThue>

<TgTThue>Tá»•ng tiá»n thuáº¿ (Tá»•ng cá»™ng tiá»n thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTThue>

<TTCKTMai>Tá»•ng tiá»n chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i</TTCKTMai>

<TgTTTBSo>Tá»•ng tiá»n thanh toÃ¡n báº±ng sá»‘ \*</TgTTTBSo>

<TgTTTBChu>Tá»•ng tiá»n thanh toÃ¡n báº±ng chá»¯ \*</TgTTTBChu>

</TToan>

</NDHDon>

</DLHDon>

</HDon>

</DSHDon>

### ThÃªm má»›i hÃ³a Ä‘Æ¡n

URL

string string **ImportInv**(string xmlInvData, string username, string password, int convert = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p táº¡o má»›i hÃ³a Ä‘Æ¡n tá»« chuá»—i xml Ä‘áº§u vÃ o theo chuáº©n mÃ´ táº£

HTTP METHOD

POST

REQUEST BODY

*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData:** Chuá»—i xml chá»©a thÃ´ng tin hÃ³a Ä‘Æ¡n

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai |  |
| ERR:3 | Äá»‹nh dáº¡ng xml cá»§a hÃ³a Ä‘Æ¡n sai cáº¥u trÃºc |  |
| ERR:5 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty | Máº·c Ä‘á»‹nh 5000 hoáº·c theo cáº¥u hÃ¬nh tá»«ng app |
| ERR:20 | Pattern vÃ  serial khÃ´ng há»£p lá»‡ |  |
| ERR:6 | KhÃ´ng cÃ²n dÆ° sá»‘ hÃ³a Ä‘Æ¡n Ä‘á»ƒ phÃ¡t hÃ nh |  |
| ERR:10 | VÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng hÃ³a Ä‘Æ¡n táº¡o cho phÃ©p (khÃ´ng Ä‘Æ°á»£c vÆ°á»£t quÃ¡ 5000HÄ) |  |
| ERR:5 | Lá»—i há»‡ thá»‘ng |  |
| "OK:" + pattern + ";" + serial + "-" + invKeyList | Táº¡o hÃ³a Ä‘Æ¡n thÃ nh cÃ´ng | Tráº£ vá» message OK kÃ¨m theo Pattern, Serial vÃ  danh sÃ¡ch fkey hÃ³a Ä‘Æ¡n táº¡o má»›i thÃ nh cÃ´ng |

**Äá»‹nh dáº¡ng chuá»—i xml Ä‘áº§u vÃ o (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<DSHDon>

<HDon>

<key>Fkey cua hoa don</key>

<DLHDon>

<TTChung>

<SHDon>Sá»‘ hÃ³a Ä‘Æ¡n</SHDon>

<MHSo>MÃ£ há»“ sÆ¡</MHSo>

<SBKe>Sá»‘ báº£ng kÃª (Sá»‘ cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</SBKe>

<NBKe>NgÃ y báº£ng kÃª (NgÃ y cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</NBKe>

<DVTTe>ÄÆ¡n vá»‹ tiá»n tá»‡ \*</DVTTe>

<TGia>Tá»· giÃ¡ (Báº¯t buá»™c (Trá»« trÆ°á»ng há»£p ÄÆ¡n vá»‹ tiá»n tá»‡ lÃ  VND))</TGia>

<HTTToan>HÃ¬nh thá»©c thanh toÃ¡n </HTTToan>

</TTChung>

<NDHDon>

<NBan>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ \*</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<Fax>Fax</Fax>

<LDDNBo>Lá»‡nh Ä‘iá»u Ä‘á»™ng ná»™i bá»™ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</LDDNBo>

<HDSo>Há»£p Ä‘á»“ng sá»‘ (Há»£p Ä‘á»“ng váº­n chuyá»ƒn) (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HDSo>

<HVTNXHang>Há» vÃ  tÃªn ngÆ°á»i xuáº¥t hÃ ng (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HVTNXHang>

<TNVChuyen>TÃªn ngÆ°á»i váº­n chuyá»ƒn (phiáº¿u xuáº¥t kho)</TNVChuyen>

<PTVChuyen>PhÆ°Æ¡ng tiá»‡n váº­n chuyá»ƒn (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho)</PTVChuyen>

<HDKTSo>Há»£p Ä‘á»“ng kinh táº¿ sá»‘ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTSo>

<HDKTNgay>Há»£p Ä‘á»“ng kinh táº¿ ngÃ y (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTNgay>

</NBan>

<NMua>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ (Báº¯t buá»™c náº¿u cÃ³)</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<MKHang>MÃ£ khÃ¡ch hÃ ng</MKHang>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<HVTNMHang>Há» vÃ  tÃªn ngÆ°á»i mua hÃ ng</HVTNMHang>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<HVTNNHang>Há» vÃ  tÃªn ngÆ°á»i nháº­n hÃ ng (phiáº¿u xuáº¥t kho)</HVTNNHang>

</NMua>

<DSHHDVu>

<HHDVu>

<TChat>TÃ­nh cháº¥t \* (1-HÃ ng hÃ³a, dá»‹ch vá»¥; 2-Khuyáº¿n máº¡i; 3-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)</TChat>

<STT>Sá»‘ thá»© tá»±</STT>

<MHHDVu>MÃ£ hÃ ng hÃ³a, dá»‹ch vá»¥ (Báº¯t buá»™c náº¿u cÃ³)</MHHDVu>

<THHDVu>TÃªn hÃ ng hÃ³a, dá»‹ch vá»¥ \*</THHDVu>

<DVTinh>ÄÆ¡n vá»‹ tÃ­nh (Báº¯t buá»™c náº¿u cÃ³)</DVTinh>

<SLuong>Sá»‘ lÆ°á»£ng (Báº¯t buá»™c náº¿u cÃ³)</SLuong>

<DGia>ÄÆ¡n giÃ¡ (Báº¯t buá»™c náº¿u cÃ³)</DGia>

<TLCKhau>Tá»· lá»‡ % chiáº¿t kháº¥u</TLCKhau>

<STCKhau>Sá»‘ tiá»n chiáº¿t kháº¥u </STCKhau>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) - Báº¯t buá»™c trá»« trÆ°á»ng há»£p TChat = 4</ThTien>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<TThue>Tiá»n thuáº¿</TThue>

<TSThue>Tiá»n sau thuáº¿</TSThue>

<TTKhac>

<TTin>

<TTruong>TÃªn trÆ°á»ng</TTruong>

<KDLieu>Kiá»ƒu dá»¯ liá»‡u</KDLieu>

<DLieu>Dá»¯ liá»‡u</DLieu>

</TTin>

</TTKhac>

</HHDVu>

</DSHHDVu>

<TToan>

<THTTLTSuat><!--sá»­ dá»¥ng hÃ³a Ä‘Æ¡n GTGT-->

<LTSuat>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT)</ThTien>

<TThue>Tiá»n thuáº¿ (Tiá»n thuáº¿ GTGT)</TThue>

</LTSuat>

</THTTLTSuat>

<TgTCThue>Tá»•ng tiá»n chÆ°a thuáº¿ (Tá»•ng cá»™ng thÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTCThue>

<TgTThue>Tá»•ng tiá»n thuáº¿ (Tá»•ng cá»™ng tiá»n thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTThue>

<TTCKTMai>Tá»•ng tiá»n chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i</TTCKTMai>

<TgTTTBSo>Tá»•ng tiá»n thanh toÃ¡n báº±ng sá»‘ \*</TgTTTBSo>

<TgTTTBChu>Tá»•ng tiá»n thanh toÃ¡n báº±ng chá»¯ \*</TgTTTBChu>

</TToan>

</NDHDon>

</DLHDon>

</HDon>

</DSHDon>

### ThÃªm má»›i hÃ³a Ä‘Æ¡n theo máº«u sá»‘, kÃ½ hiá»‡u

URL

string **ImportInvByPattern**(string Account, string ACpass, string xmlInvData, string username, string password, string pattern = "", string serial = "", int convert = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p thÃªm má»›i hÃ³a Ä‘Æ¡n tá»« dá»¯ liá»‡u XML gá»­i lÃªn

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml hÃ³a Ä‘Æ¡n ( theo mÃ´ táº£)
*   **pattern**: máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **serial**: kÃ½ hiá»‡u hÃ³a Ä‘Æ¡n
*   **convert:** Máº·c Ä‘á»‹nh lÃ  0, 0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm má»›i hÃ³a Ä‘Æ¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:6 | KhÃ´ng Ä‘á»§ sá»‘ lÆ°á»£ng hÃ³a Ä‘Æ¡n cho lÃ´ thÃªm má»›i |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:13 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i hÃ³a Ä‘Æ¡n trÃ¹ng Fkey |  |
| ERR:22 | TrÃ¹ng sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:7 | Pattern vÃ  serial khÃ´ng phÃ¹ há»£p, hoáº·c khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Äƒng kÃ½ cÃ³ sá»­ dá»¥ng Pattern vÃ  Serial truyá»n vÃ o | Chá»‰ cháº¥p nháº­n Ä‘á»“ng thá»i nháº­p cáº£ Pattern vÃ  serial hoáº·c Ä‘á»“ng thá»i Ä‘á»ƒ trá»‘ng cáº£ pattern vÃ  serial |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh. DB roll back |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ max cho phÃ©p | Máº·c Ä‘á»‹nh lÃ  5000, hoáº·c Ä‘Æ°á»£c cáº¥u hÃ¬nh theo tá»«ng app |
| OK: pattern;serial1-key1_num1,key2_num12,key3_num3â€¦(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E-key1_1,key2_2,key3_3,key4_4,key5_5) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPattern ğŸ¡ª Máº«u sá»‘ cá»§a cÃ¡c hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nhSerial1 ğŸ¡ª serial cá»§a dÃ£y cÃ¡c hÃ³a Ä‘Æ¡n phÃ¡t hÃ nhnum1, num2â€¦ lÃ  cÃ¡c sá»‘ hÃ³a Ä‘Æ¡nkey1,key2â€¦ lÃ  khÃ³a Ä‘á»ƒ nháº­n biáº¿t hÃ³a Ä‘Æ¡n phÃ¡t hÃ nh cho khÃ¡ch hÃ ng nÃ o(láº¥y tá»« Ä‘áº§u vÃ o) | CÃ¡ch hÃ³a Ä‘Æ¡n cÃ³ serial khÃ¡c nhau phÃ¢n cÃ¡ch bá»Ÿi dáº¥u â€œ;â€CÃ¡c sá»‘ hÃ³a Ä‘Æ¡n phÃ¢n cÃ¡ch bá»Ÿi â€œ,â€ |

**Äá»‹nh dáº¡ng chuá»—i xml Ä‘áº§u vÃ o (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<DSHDon>

<HDon>

<key>Fkey cua hoa don</key>

<DLHDon>

<TTChung>

<SHDon>Sá»‘ hÃ³a Ä‘Æ¡n</SHDon>

<MHSo>MÃ£ há»“ sÆ¡</MHSo>

<SBKe>Sá»‘ báº£ng kÃª (Sá»‘ cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</SBKe>

<NBKe>NgÃ y báº£ng kÃª (NgÃ y cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</NBKe>

<DVTTe>ÄÆ¡n vá»‹ tiá»n tá»‡ \*</DVTTe>

<TGia>Tá»· giÃ¡ (Báº¯t buá»™c (Trá»« trÆ°á»ng há»£p ÄÆ¡n vá»‹ tiá»n tá»‡ lÃ  VND))</TGia>

<HTTToan>HÃ¬nh thá»©c thanh toÃ¡n </HTTToan>

</TTChung>

<NDHDon>

<NBan>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ \*</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<Fax>Fax</Fax>

<LDDNBo>Lá»‡nh Ä‘iá»u Ä‘á»™ng ná»™i bá»™ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</LDDNBo>

<HDSo>Há»£p Ä‘á»“ng sá»‘ (Há»£p Ä‘á»“ng váº­n chuyá»ƒn) (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HDSo>

<HVTNXHang>Há» vÃ  tÃªn ngÆ°á»i xuáº¥t hÃ ng (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HVTNXHang>

<TNVChuyen>TÃªn ngÆ°á»i váº­n chuyá»ƒn (phiáº¿u xuáº¥t kho)</TNVChuyen>

<PTVChuyen>PhÆ°Æ¡ng tiá»‡n váº­n chuyá»ƒn (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho)</PTVChuyen>

<HDKTSo>Há»£p Ä‘á»“ng kinh táº¿ sá»‘ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTSo>

<HDKTNgay>Há»£p Ä‘á»“ng kinh táº¿ ngÃ y (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTNgay>

</NBan>

<NMua>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ (Báº¯t buá»™c náº¿u cÃ³)</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<MKHang>MÃ£ khÃ¡ch hÃ ng</MKHang>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<HVTNMHang>Há» vÃ  tÃªn ngÆ°á»i mua hÃ ng</HVTNMHang>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<HVTNNHang>Há» vÃ  tÃªn ngÆ°á»i nháº­n hÃ ng (phiáº¿u xuáº¥t kho)</HVTNNHang>

</NMua>

<DSHHDVu>

<HHDVu>

<TChat>TÃ­nh cháº¥t \* (1-HÃ ng hÃ³a, dá»‹ch vá»¥; 2-Khuyáº¿n máº¡i; 3-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)</TChat>

<STT>Sá»‘ thá»© tá»±</STT>

<MHHDVu>MÃ£ hÃ ng hÃ³a, dá»‹ch vá»¥ (Báº¯t buá»™c náº¿u cÃ³)</MHHDVu>

<THHDVu>TÃªn hÃ ng hÃ³a, dá»‹ch vá»¥ \*</THHDVu>

<DVTinh>ÄÆ¡n vá»‹ tÃ­nh (Báº¯t buá»™c náº¿u cÃ³)</DVTinh>

<SLuong>Sá»‘ lÆ°á»£ng (Báº¯t buá»™c náº¿u cÃ³)</SLuong>

<DGia>ÄÆ¡n giÃ¡ (Báº¯t buá»™c náº¿u cÃ³)</DGia>

<TLCKhau>Tá»· lá»‡ % chiáº¿t kháº¥u</TLCKhau>

<STCKhau>Sá»‘ tiá»n chiáº¿t kháº¥u </STCKhau>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) - Báº¯t buá»™c trá»« trÆ°á»ng há»£p TChat = 4</ThTien>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<TThue>Tiá»n thuáº¿</TThue>

<TSThue>Tiá»n sau thuáº¿</TSThue>

<TTKhac>

<TTin>

<TTruong>TÃªn trÆ°á»ng</TTruong>

<KDLieu>Kiá»ƒu dá»¯ liá»‡u</KDLieu>

<DLieu>Dá»¯ liá»‡u</DLieu>

</TTin>

</TTKhac>

</HHDVu>

</DSHHDVu>

<TToan>

<THTTLTSuat><!--sá»­ dá»¥ng hÃ³a Ä‘Æ¡n GTGT-->

<LTSuat>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT)</ThTien>

<TThue>Tiá»n thuáº¿ (Tiá»n thuáº¿ GTGT)</TThue>

</LTSuat>

</THTTLTSuat>

<TgTCThue>Tá»•ng tiá»n chÆ°a thuáº¿ (Tá»•ng cá»™ng thÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTCThue>

<TgTThue>Tá»•ng tiá»n thuáº¿ (Tá»•ng cá»™ng tiá»n thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTThue>

<TTCKTMai>Tá»•ng tiá»n chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i</TTCKTMai>

<TgTTTBSo>Tá»•ng tiá»n thanh toÃ¡n báº±ng sá»‘ \*</TgTTTBSo>

<TgTTTBChu>Tá»•ng tiá»n thanh toÃ¡n báº±ng chá»¯ \*</TgTTTBChu>

</TToan>

</NDHDon>

</DLHDon>

</HDon>

</DSHDon>

### Láº¥y ná»™i dung XMLData HÃ³a Ä‘Æ¡n cÃ³ mÃ£ CQT tráº£ vá»

URL

string **GetInvDataByFkey**(string fkey, string userName, string userPass, string account, string accPass, string pattern = "")

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p láº¥y ná»™i dung xml hÃ³a Ä‘Æ¡n cÃ³ mÃ£ CQT tráº£ vá»

HTTP METHOD

Get

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **fkey**: fkey cá»§a hÃ³a Ä‘Æ¡n
*   **pattern**: máº«u sá»‘ hÃ³a Ä‘Æ¡n

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm má»›i hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:78 | KhÃ¡ch hÃ ng khÃ´ng sá»­ dá»¥ng hÃ³a Ä‘Æ¡n cáº¥p mÃ£ tá»« cÆ¡ quan thuáº¿ hoáº·c khÃ´ng cáº¥u hÃ¬nh sá»­ dá»¥ng theo TT78 |  |
| ERR:21 | KhÃ´ng láº¥y Ä‘Æ°á»£c máº«u máº·c Ä‘á»‹nh cá»§a cÃ´ng ty |  |
| ERR:22 | KhÃ´ng láº¥y Ä‘Æ°á»£c invoice service theo máº«u sá»‘ truyá»n vÃ o |  |
| ERR:23 | Fkey truyá»n vÃ o khÃ´ng Ä‘Ãºng |  |
| ERR:24 | KhÃ´ng láº¥y Ä‘Æ°á»£c InvoiceData theo hÃ³a Ä‘Æ¡n, hÃ³a Ä‘Æ¡n cÃ³ thá»ƒ chÆ°a Ä‘Æ°á»£c cáº¥p mÃ£. |  |
| ERR:25 | TrÆ°á»ng InvoiceData chÆ°a Ä‘Æ°á»£c lÆ°u á»Ÿ hÃ³a Ä‘Æ¡n |  |
| ERR:5 | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, khÃ´ng láº¥y Ä‘Æ°á»£c dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cáº¥p mÃ£ theo dá»¯ liá»‡u truyá»n vÃ o |  |
| DataBase64 | Dá»¯ liá»‡u xml hÃ³a Ä‘Æ¡n cÃ³ mÃ£ CQT dáº¡ng Base64 |  |

### Láº¥y tráº¡ng thÃ¡i vÃ  XMLData hÃ³a Ä‘Æ¡n cÃ³ mÃ£, tráº¡ng thÃ¡i cá»§a hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i CQT tráº£ vá» theo danh sÃ¡ch invToken

URL

string **GetMCCQThueByInvTokens**(string Account, string ACpass, string username, string password, string invTokens)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p láº¥y tráº¡ng thÃ¡i vÃ  ná»™i dung xml hÃ³a Ä‘Æ¡n cÃ³ mÃ£ CQT tráº£ vá» theo invToken

HTTP METHOD

Get

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **invTokens**: danh sÃ¡ch chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm má»›i hÃ³a Ä‘Æ¡n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n tÆ°Æ¡ng á»©ng. |  |
| ERR:10 | VÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng 100 hÃ³a Ä‘Æ¡n cáº§n láº¥y |  |
| ERR:20 | KhÃ´ng láº¥y Ä‘Æ°á»£c thÃ´ng tin ngÆ°á»i dÃ¹ng |  |
| ERR:5 | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, khÃ´ng láº¥y Ä‘Æ°á»£c dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cáº¥p mÃ£ theo dá»¯ liá»‡u truyá»n vÃ o |  |
| DataBase64 | Dá»¯ liá»‡u thÃ´ng tin hÃ³a Ä‘Æ¡n á»Ÿ dáº¡ng XML Ä‘Ã£ base64 bao gá»“m: máº«u sá»‘, kÃ½ hiá»‡u, sá»‘, tráº¡ng thÃ¡i cáº¥p mÃ£, xml hÃ³a Ä‘Æ¡n<DSHDon><HDon><KHMSHDon>Máº«u sá»‘ hÃ³a Ä‘Æ¡n</KHMSHDon><KHHDon>KÃ½ hiá»‡u hÃ³a Ä‘Æ¡n</KHHDon><SHDon>Sá»‘ hÃ³a Ä‘Æ¡n</SHDon><MCCQThue>MÃ£ cÆ¡ quan thuáº¿ cáº¥p (TrÆ°á»ng há»£p hÃ³a Ä‘Æ¡n cÃ³ mÃ£)</MCCQThue><TThai>0: ChÆ°a gá»­i cÆ¡ quan thuáº¿1: ÄÃ£ gá»­i cÆ¡ quan thuáº¿2: ÄÃ£ Ä‘Æ°á»£c CQT cháº¥p nháº­n3: ÄÃ£ bá»‹ CQT tá»« chá»‘i</TThai><MTLoi>thÃ´ng bÃ¡o lá»—i CQT tráº£ vá»</MTLoi><Fkey>Fkey hÃ³a Ä‘Æ¡n</Fkey></HDon></DSHDon> |  |

### Láº¥y tráº¡ng thÃ¡i vÃ  XMLData hÃ³a Ä‘Æ¡n cÃ³ mÃ£, tráº¡ng thÃ¡i cá»§a hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i CQT tráº£ vá» theo danh sÃ¡ch Fkey

URL

string **GetMCCQThueByFkeys** (string Account, string ACpass, string username, string password, string pattern, string fkeys)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p láº¥y tráº¡ng thÃ¡i vÃ  ná»™i dung xml hÃ³a Ä‘Æ¡n cÃ³ mÃ£ CQT tráº£ vá» theo invToken

HTTP METHOD

Get

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Pattern**: máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **fkeys**: danh sÃ¡ch chuá»—i fkey xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm má»›i hÃ³a Ä‘Æ¡n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n tÆ°Æ¡ng á»©ng. |  |
| ERR:10 | VÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng 100 hÃ³a Ä‘Æ¡n cáº§n láº¥y |  |
| ERR:20 | KhÃ´ng láº¥y Ä‘Æ°á»£c thÃ´ng tin ngÆ°á»i dÃ¹ng |  |
| ERR:5 | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, khÃ´ng láº¥y Ä‘Æ°á»£c dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cáº¥p mÃ£ theo dá»¯ liá»‡u truyá»n vÃ o |  |
| DataBase64 | Dá»¯ liá»‡u thÃ´ng tin hÃ³a Ä‘Æ¡n á»Ÿ dáº¡ng XML Ä‘Ã£ base64 bao gá»“m: máº«u sá»‘, kÃ½ hiá»‡u, sá»‘, tráº¡ng thÃ¡i cáº¥p mÃ£, xml hÃ³a Ä‘Æ¡n<DSHDon><HDon><KHMSHDon>Máº«u sá»‘ hÃ³a Ä‘Æ¡n</KHMSHDon><KHHDon>KÃ½ hiá»‡u hÃ³a Ä‘Æ¡n</KHHDon><SHDon>Sá»‘ hÃ³a Ä‘Æ¡n</SHDon><MCCQThue>MÃ£ cÆ¡ quan thuáº¿ cáº¥p (TrÆ°á»ng há»£p hÃ³a Ä‘Æ¡n cÃ³ mÃ£)</MCCQThue><TThai>0: ChÆ°a gá»­i cÆ¡ quan thuáº¿1: ÄÃ£ gá»­i cÆ¡ quan thuáº¿2: ÄÃ£ Ä‘Æ°á»£c CQT cháº¥p nháº­n3: ÄÃ£ bá»‹ CQT tá»« chá»‘i</TThai><MTLoi>thÃ´ng bÃ¡o lá»—i CQT tráº£ vá»</MTLoi><Fkey>Fkey hÃ³a Ä‘Æ¡n</Fkey></HDon></DSHDon> |  |

### Láº¥y tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n cÃ³ mÃ£, hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i CQT tráº£ vá» theo danh sÃ¡ch invToken

URL

string GetMCCQThueByInvTokensNoXMLSign(string Account, string ACpass, string username, string password, string invTokens)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p láº¥y tráº¡ng thÃ¡i vÃ  ná»™i dung xml hÃ³a Ä‘Æ¡n cÃ³ mÃ£ CQT tráº£ vá» theo invToken

HTTP METHOD

Get

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **invTokens**: danh sÃ¡ch chuá»—i token xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm má»›i hÃ³a Ä‘Æ¡n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n tÆ°Æ¡ng á»©ng. |  |
| ERR:10 | VÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng 100 hÃ³a Ä‘Æ¡n cáº§n láº¥y |  |
| ERR:20 | KhÃ´ng láº¥y Ä‘Æ°á»£c thÃ´ng tin ngÆ°á»i dÃ¹ng |  |
| ERR:5 | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, khÃ´ng láº¥y Ä‘Æ°á»£c dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cáº¥p mÃ£ theo dá»¯ liá»‡u truyá»n vÃ o |  |
| DataBase64 | Dá»¯ liá»‡u thÃ´ng tin hÃ³a Ä‘Æ¡n á»Ÿ dáº¡ng XML Ä‘Ã£ base64 bao gá»“m: máº«u sá»‘, kÃ½ hiá»‡u, sá»‘, tráº¡ng thÃ¡i cáº¥p mÃ£, xml hÃ³a Ä‘Æ¡n<DSHDon><HDon><KHMSHDon>Máº«u sá»‘ hÃ³a Ä‘Æ¡n</KHMSHDon><KHHDon>KÃ½ hiá»‡u hÃ³a Ä‘Æ¡n</KHHDon><SHDon>Sá»‘ hÃ³a Ä‘Æ¡n</SHDon><MCCQThue>MÃ£ cÆ¡ quan thuáº¿ cáº¥p (TrÆ°á»ng há»£p hÃ³a Ä‘Æ¡n cÃ³ mÃ£)</MCCQThue><TThai>0: ChÆ°a gá»­i cÆ¡ quan thuáº¿1: ÄÃ£ gá»­i cÆ¡ quan thuáº¿2: ÄÃ£ Ä‘Æ°á»£c CQT cháº¥p nháº­n3: ÄÃ£ bá»‹ CQT tá»« chá»‘i</TThai><MTLoi>thÃ´ng bÃ¡o lá»—i CQT tráº£ vá»</MTLoi><Fkey>Fkey hÃ³a Ä‘Æ¡n</Fkey></HDon></DSHDon> |  |

### Láº¥y tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n cÃ³ mÃ£, hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i CQT tráº£ vá» theo danh sÃ¡ch Fkey

URL

string GetMCCQThueByFkeysNoXMLSign(string Account, string ACpass, string username, string password, string pattern, string fkeys)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p láº¥y tráº¡ng thÃ¡i vÃ  ná»™i dung xml hÃ³a Ä‘Æ¡n cÃ³ mÃ£ CQT tráº£ vá» theo invToken

HTTP METHOD

Get

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Pattern**: máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **fkeys**: danh sÃ¡ch chuá»—i fkey xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n láº¥y

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm má»›i hÃ³a Ä‘Æ¡n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y hÃ³a Ä‘Æ¡n tÆ°Æ¡ng á»©ng. |  |
| ERR:10 | VÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng 100 hÃ³a Ä‘Æ¡n cáº§n láº¥y |  |
| ERR:20 | KhÃ´ng láº¥y Ä‘Æ°á»£c thÃ´ng tin ngÆ°á»i dÃ¹ng |  |
| ERR:5 | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, khÃ´ng láº¥y Ä‘Æ°á»£c dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cáº¥p mÃ£ theo dá»¯ liá»‡u truyá»n vÃ o |  |
| DataBase64 | Dá»¯ liá»‡u thÃ´ng tin hÃ³a Ä‘Æ¡n á»Ÿ dáº¡ng XML Ä‘Ã£ base64 bao gá»“m: máº«u sá»‘, kÃ½ hiá»‡u, sá»‘, tráº¡ng thÃ¡i cáº¥p mÃ£, xml hÃ³a Ä‘Æ¡n.<DSHDon><HDon><KHMSHDon>Máº«u sá»‘ hÃ³a Ä‘Æ¡n</KHMSHDon><KHHDon>KÃ½ hiá»‡u hÃ³a Ä‘Æ¡n</KHHDon><SHDon>Sá»‘ hÃ³a Ä‘Æ¡n</SHDon><MCCQThue>MÃ£ cÆ¡ quan thuáº¿ cáº¥p (TrÆ°á»ng há»£p hÃ³a Ä‘Æ¡n cÃ³ mÃ£)</MCCQThue><TThai>0: ChÆ°a gá»­i cÆ¡ quan thuáº¿1: ÄÃ£ gá»­i cÆ¡ quan thuáº¿2: ÄÃ£ Ä‘Æ°á»£c CQT cháº¥p nháº­n3: ÄÃ£ bá»‹ CQT tá»« chá»‘i</TThai><MTLoi>thÃ´ng bÃ¡o lá»—i CQT tráº£ vá»</MTLoi><Fkey>Fkey hÃ³a Ä‘Æ¡n</Fkey></HDon></DSHDon> |  |

### Gá»­i thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ sai sÃ³t.

URL

string **SendInvNoticeErrors**(string Account, string ACpass, string xml, string username, string password, string pattern = "", int convert = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p gá»­i thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ sai sÃ³t báº±ng hsm hoáº·c p12.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh gá»­i thÃ´ng Ä‘iá»‡p.
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xml**: chuá»—i xml thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ sai sÃ³t (theo máº«u mÃ´ táº£ kÃ¨m theo)
*   **pattern**: máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng tá»‘i Ä‘a cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| OK:mtd | Gá»­i thÃ´ng Ä‘iá»‡p thÃ nh cÃ´ng, tráº£ vá» mÃ£ thÃ´ng Ä‘iá»‡p |  |

Cáº¥u trÃºc chuá»—i XML Ä‘áº§u vÃ o cá»§a thÃ´ng Ä‘iá»‡p: (dáº¥u \* lÃ  báº¯t buá»™c)

<DLTBao>

Â  Â  <TNNT></TNNT>\* //TÃªn ngÆ°á»i ná»™p thuáº¿

Â  Â  <TCQT></TCQT>\*//TÃªn cÆ¡ quan thuáº¿ (TÃªn cÆ¡ quan thuáº¿ ra thÃ´ng bÃ¡o)

Â  Â  <NTBao></NTBao>\*//NgÃ y thÃ´ng bÃ¡o

Â  Â  <DDanh></DDanh>\*//Äá»‹a danh

Â  Â  <Loai> </Loai>\*//Loáº¡i (Loáº¡i thÃ´ng bÃ¡o) (1: ThÃ´ng bÃ¡o há»§y/giáº£i trÃ¬nh cá»§a NNT, 2: ThÃ´ng bÃ¡o há»§y/giáº£i trÃ¬nh cá»§a NNT theo thÃ´ng bÃ¡o cá»§a CQT)

Â  Â  <So></So> //Sá»‘ thÃ´ng bÃ¡o cá»§a CQT. Báº¯t buá»™c (Äá»‘i vá»›i Loáº¡i=2: ThÃ´ng bÃ¡o há»§y/giáº£i trÃ¬nh cá»§a NNT theo thÃ´ng bÃ¡o cá»§a CQT)

Â  Â  <NTBCCQT></NTBCCQT>//NgaÌ€y thÃ´ng baÌo cá»§a CQT. Báº¯t buá»™c (Äá»‘i vá»›i Loáº¡i=2: ThÃ´ng bÃ¡o há»§y/giáº£i trÃ¬nh cá»§a NNT theo thÃ´ng bÃ¡o cá»§a CQT)

Â  Â  <DSHDon>

Â  Â  Â  Â  <HDon>

Â  Â  Â  Â  Â  Â  <STT></STT> //Sá»‘ thá»© tá»±

Â  Â  Â  Â  Â  Â  <MCQTCap> </MCQTCap> //MÃ£ CQT cáº¥p. Báº¯t buá»™c (Trá»« trÆ°á»ng há»£p lÃ  hÃ³a Ä‘Æ¡n khÃ´ng cÃ³ mÃ£ cá»§a CQT)

Â  Â  Â  Â  Â  Â  <KHMSHDon></KHMSHDon>\* //KyÌ hiÃªÌ£u máº«u sá»‘ hoÌa Ä‘Æ¡n

Â  Â  Â  Â  Â  Â  <KHHDon></KHHDon>\*//KÃ½ hiá»‡u hÃ³a Ä‘Æ¡n

Â  Â  Â  Â  Â  Â  <SHDon></SHDon>\*//SÃ´Ì hoÌa Ä‘Æ¡n (SÃ´Ì hoÌa Ä‘Æ¡n Ä‘iá»‡n tá»­)

Â  Â  Â  Â  Â  Â  <Ngay></Ngay>\*//NgaÌ€y (NgaÌ€y láº­p hoÌa Ä‘Æ¡n) - Ä‘á»‹nh dáº¡ng: YYYY-MM-YY

Â  Â  Â  Â  Â  Â  <LADHDDT></LADHDDT>\*//Loáº¡i Ã¡p dá»¥ng hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­

Â  Â  Â  Â  Â  Â  (1:HÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ theo Nghá»‹ Ä‘á»‹nh 123/2020/NÄ-CP;

Â  Â  Â  Â  Â  Â  2: HÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ mÃ£ xÃ¡c thá»±c cá»§a cÆ¡ quan thuáº¿ theo Quyáº¿t Ä‘á»‹nh sá»‘ 1209/QÄ-BTC;

Â  Â  Â  Â  Â  Â  3: HÃ³a Ä‘Æ¡n theo Nghá»‹ Ä‘á»‹nh sá»‘ 51/2010/NÄ-CP vÃ  Nghá»‹ Ä‘á»‹nh sá»‘ 04/2014/NÄ-CP;

Â  Â  Â  Â  Â  Â  4: HÃ³a Ä‘Æ¡n Ä‘áº·t in theo Nghá»‹ Ä‘á»‹nh 123/2020/NÄ-CP)

Â  Â  Â  Â  Â  Â  <TCTBao></TCTBao> \*//TiÌnh chÃ¢Ìt thÃ´ng baÌo (1: Há»§y; 2: Äiá»u chá»‰nh; 3: Thay tháº¿; 4: Giáº£i trÃ¬nh)

Â  Â  Â  Â  Â  Â  <LDo></LDo> //LyÌ do

Â  Â  Â  Â  Â  Â  <Fkey></Fkey>

Â  Â  Â  Â  </HDon>

Â  Â  </DSHDon>

</DLTBao>

### Láº¥y giÃ¡ trá»‹ Hash cho gá»­i thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n cÃ³ sai sÃ³t báº±ng token ( bÆ°á»›c 1)

URL

string **GetHashInvNoticeErrors**(string Account, string ACpass, string xml, string username, string password, string pattern = "", int convert = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p gá»­i thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ sai sÃ³t vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng token, thá»±c hiá»‡n truyá»n dá»¯ liá»‡u hÃ³a Ä‘Æ¡n vÃ  láº¥y giÃ¡ trá»‹ hash value Ä‘á»ƒ kÃ½ sá»‘ báº±ng token á»Ÿ client.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh gá»­i thÃ´ng Ä‘iá»‡p.
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xml**: chuá»—i xml thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ sai sÃ³t (theo máº«u mÃ´ táº£ kÃ¨m theo)
*   **pattern**: máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng tá»‘i Ä‘a cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i hÃ³a Ä‘Æ¡n cÃ³ lá»—i |  |
| Chuá»—i base64Hash | Chuá»—i tráº£ vá» sá»­ dá»¥ng Ä‘á»ƒ kÃ½ sá»‘ token |  |

Cáº¥u trÃºc chuá»—i XML Ä‘áº§u vÃ o cá»§a thÃ´ng Ä‘iá»‡p: (dáº¥u \* lÃ  báº¯t buá»™c)

<DLTBao>

Â  Â  <TNNT></TNNT>\* //TÃªn ngÆ°á»i ná»™p thuáº¿

Â  Â  <TCQT></TCQT>\*//TÃªn cÆ¡ quan thuáº¿ (TÃªn cÆ¡ quan thuáº¿ ra thÃ´ng bÃ¡o)

Â  Â  <NTBao></NTBao>\*//NgÃ y thÃ´ng bÃ¡o

Â  Â  <DDanh></DDanh>\*//Äá»‹a danh

Â  Â  <Loai> </Loai>\*//Loáº¡i (Loáº¡i thÃ´ng bÃ¡o) (1: ThÃ´ng bÃ¡o há»§y/giáº£i trÃ¬nh cá»§a NNT, 2: ThÃ´ng bÃ¡o há»§y/giáº£i trÃ¬nh cá»§a NNT theo thÃ´ng bÃ¡o cá»§a CQT)

Â  Â  <So></So> //Sá»‘ thÃ´ng bÃ¡o cá»§a CQT. Báº¯t buá»™c (Äá»‘i vá»›i Loáº¡i=2: ThÃ´ng bÃ¡o há»§y/giáº£i trÃ¬nh cá»§a NNT theo thÃ´ng bÃ¡o cá»§a CQT)

Â  Â  <NTBCCQT></NTBCCQT>//NgaÌ€y thÃ´ng baÌo cá»§a CQT. Báº¯t buá»™c (Äá»‘i vá»›i Loáº¡i=2: ThÃ´ng bÃ¡o há»§y/giáº£i trÃ¬nh cá»§a NNT theo thÃ´ng bÃ¡o cá»§a CQT)

Â  Â  <DSHDon>

Â  Â  Â  Â  <HDon>

Â  Â  Â  Â  Â  Â  <STT></STT> //Sá»‘ thá»© tá»±

Â  Â  Â  Â  Â  Â  <MCQTCap> </MCQTCap> //MÃ£ CQT cáº¥p. Báº¯t buá»™c (Trá»« trÆ°á»ng há»£p lÃ  hÃ³a Ä‘Æ¡n khÃ´ng cÃ³ mÃ£ cá»§a CQT)

Â  Â  Â  Â  Â  Â  <KHMSHDon></KHMSHDon>\* //KyÌ hiÃªÌ£u máº«u sá»‘ hoÌa Ä‘Æ¡n

Â  Â  Â  Â  Â  Â  <KHHDon></KHHDon>\*//KÃ½ hiá»‡u hÃ³a Ä‘Æ¡n

Â  Â  Â  Â  Â  Â  <SHDon></SHDon>\*//SÃ´Ì hoÌa Ä‘Æ¡n (SÃ´Ì hoÌa Ä‘Æ¡n Ä‘iá»‡n tá»­)

Â  Â  Â  Â  Â  Â  <Ngay></Ngay>\*//NgaÌ€y (NgaÌ€y láº­p hoÌa Ä‘Æ¡n) - Ä‘á»‹nh dáº¡ng: YYYY-MM-YY

Â  Â  Â  Â  Â  Â  <LADHDDT></LADHDDT>\*//Loáº¡i Ã¡p dá»¥ng hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­

Â  Â  Â  Â  Â  Â  (1:HÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ theo Nghá»‹ Ä‘á»‹nh 123/2020/NÄ-CP;

Â  Â  Â  Â  Â  Â  2: HÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ mÃ£ xÃ¡c thá»±c cá»§a cÆ¡ quan thuáº¿ theo Quyáº¿t Ä‘á»‹nh sá»‘ 1209/QÄ-BTC;

Â  Â  Â  Â  Â  Â  3: HÃ³a Ä‘Æ¡n theo Nghá»‹ Ä‘á»‹nh sá»‘ 51/2010/NÄ-CP vÃ  Nghá»‹ Ä‘á»‹nh sá»‘ 04/2014/NÄ-CP;

Â  Â  Â  Â  Â  Â  4: HÃ³a Ä‘Æ¡n Ä‘áº·t in theo Nghá»‹ Ä‘á»‹nh 123/2020/NÄ-CP)

Â  Â  Â  Â  Â  Â  <TCTBao></TCTBao> \*//TiÌnh chÃ¢Ìt thÃ´ng baÌo (1: Há»§y; 2: Äiá»u chá»‰nh; 3: Thay tháº¿; 4: Giáº£i trÃ¬nh)

Â  Â  Â  Â  Â  Â  <LDo></LDo> //LyÌ do

Â  Â  Â  Â  Â  Â  <Fkey></Fkey>

Â  Â  Â  Â  </HDon>

Â  Â  </DSHDon>

</DLTBao>

Cáº¥u trÃºc chuá»—i base64Hash tráº£ vá»:

Qp0OIf1ZAMA5tHpzdJtqIV0rlZc=

### Gá»­i thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ sai sÃ³t sá»­ dá»¥ng token (bÆ°á»›c 2)

URL

string **SendInvNoticeErrorsWidthToken(**string Account, string ACpass, string username, string password, string xml**)**

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p gá»­i thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ sai sÃ³t vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng token, sau khi thá»±c hiá»‡n gá»i hÃ m Láº¥y giÃ¡ trá»‹ Hash á»Ÿ bÆ°á»›c 1 (**3.1.9**)

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh gá»­i thÃ´ng Ä‘iá»‡p.
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xml**: chuá»—i xml dá»¯ liá»‡u kÃ½ hash.
*   **convert:** Máº·c Ä‘á»‹nh lÃ  0 (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode / 1- Cáº§n convert tá»« TCVN3 sang Unicode)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ max cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| OK:mtd | Gá»­i thÃ´ng Ä‘iá»‡p thÃ nh cÃ´ng, tráº£ vá» mÃ£ thÃ´ng Ä‘iá»‡p |  |

**Cáº¥u trÃºc chuá»—i xml truyá»n lÃªn:**

<CKS>

Â  Â  <SerialCert></SerialCert> \*//serial chá»©ng thÆ° cá»§a cÃ´ng ty

Â  Â  <Base64Hash></Base64Hash> \*//chuá»—i Hash láº¥y tá»« bÆ°á»›c 3.1.9

Â  Â  <SignValue></SignValue> \*//chuá»—i kÃ½

</CKS>

### Láº¥y giÃ¡ trá»‹ Hash cho gá»­i thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n cÃ³ sai sÃ³t báº±ng SmartCA ( bÆ°á»›c 1)

URL

string **GetHashInvNoticeErrorsWithSmartCA**(string Account, string ACpass, string xml, string username, string password, string serial, string pattern = "", int convert = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p gá»­i thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ sai sÃ³t vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng smartCA, thá»±c hiá»‡n truyá»n dá»¯ liá»‡u hÃ³a Ä‘Æ¡n sai sÃ³t vÃ  láº¥y giÃ¡ trá»‹ hash value Ä‘á»ƒ kÃ½ sá»‘ báº±ng smartCA á»Ÿ client.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:**Â  TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh gá»­i thÃ´ng Ä‘iá»‡p.
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xml**: chuá»—i xml thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ sai sÃ³t (theo máº«u mÃ´ táº£ kÃ¨m theo)Â Â Â Â 
*   **serial**: serial cá»§a chá»©ng thÆ° SmartCA cÃ´ng ty Ä‘Ã£ Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng
*   **pattern**: máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng tá»‘i Ä‘a cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i hÃ³a Ä‘Æ¡n cÃ³ lá»—i |  |
| Chuá»—i hash | Chuá»—i tráº£ vá» sá»­ dá»¥ng Ä‘á»ƒ kÃ½ sá»‘ smartCA |  |

Cáº¥u trÃºc chuá»—i XML Ä‘áº§u vÃ o cá»§a thÃ´ng Ä‘iá»‡p: (dáº¥u \* lÃ  báº¯t buá»™c)

<DLTBao>

Â  Â  <TNNT></TNNT>\* //TÃªn ngÆ°á»i ná»™p thuáº¿

Â  Â  <TCQT></TCQT>\*//TÃªn cÆ¡ quan thuáº¿ (TÃªn cÆ¡ quan thuáº¿ ra thÃ´ng bÃ¡o)

Â  Â  <NTBao></NTBao>\*//NgÃ y thÃ´ng bÃ¡o

Â  Â  <DDanh></DDanh>\*//Äá»‹a danh

Â  Â  <Loai> </Loai>\*//Loáº¡i (Loáº¡i thÃ´ng bÃ¡o) (1: ThÃ´ng bÃ¡o há»§y/giáº£i trÃ¬nh cá»§a NNT, 2: ThÃ´ng bÃ¡o há»§y/giáº£i trÃ¬nh cá»§a NNT theo thÃ´ng bÃ¡o cá»§a CQT)Â 

Â  Â  <So></So> //Sá»‘ thÃ´ng bÃ¡o cá»§a CQT. Báº¯t buá»™c (Äá»‘i vá»›i Loáº¡i=2: ThÃ´ng bÃ¡o há»§y/giáº£i trÃ¬nh cá»§a NNT theo thÃ´ng bÃ¡o cá»§a CQT)

Â  Â  <NTBCCQT></NTBCCQT>//NgaÌ€y thÃ´ng baÌo cá»§a CQT. Báº¯t buá»™c (Äá»‘i vá»›i Loáº¡i=2: ThÃ´ng bÃ¡o há»§y/giáº£i trÃ¬nh cá»§a NNT theo thÃ´ng bÃ¡o cá»§a CQT)Â 

Â  Â  <DSHDon>

Â  Â  Â  Â  <HDon>

Â  Â  Â  Â  Â  Â  <STT></STT> //Sá»‘ thá»© tá»±

Â  Â  Â  Â  Â  Â  <MCQTCap> </MCQTCap> //MÃ£ CQT cáº¥p. Báº¯t buá»™c (Trá»« trÆ°á»ng há»£p lÃ  hÃ³a Ä‘Æ¡n khÃ´ng cÃ³ mÃ£ cá»§a CQT)

Â  Â  Â  Â  Â  Â  <KHMSHDon></KHMSHDon>\* //KyÌ hiÃªÌ£u máº«u sá»‘ hoÌa Ä‘Æ¡n

Â  Â  Â  Â  Â  Â  <KHHDon></KHHDon>\*//KÃ½ hiá»‡u hÃ³a Ä‘Æ¡n

Â  Â  Â  Â  Â  Â  <SHDon></SHDon>\*//SÃ´Ì hoÌa Ä‘Æ¡n (SÃ´Ì hoÌa Ä‘Æ¡n Ä‘iá»‡n tá»­)

Â  Â  Â  Â  Â  Â  <Ngay></Ngay>\*//NgaÌ€y (NgaÌ€y láº­p hoÌa Ä‘Æ¡n) - Ä‘á»‹nh dáº¡ng: YYYY-MM-YY

Â  Â  Â  Â  Â  Â  <LADHDDT></LADHDDT>\*//Loáº¡i Ã¡p dá»¥ng hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­Â 

Â  Â  Â  Â  Â  Â  (1:HÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ theo Nghá»‹ Ä‘á»‹nh 123/2020/NÄ-CP;Â 

Â  Â  Â  Â  Â  Â  2: HÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ mÃ£ xÃ¡c thá»±c cá»§a cÆ¡ quan thuáº¿ theo Quyáº¿t Ä‘á»‹nh sá»‘ 1209/QÄ-BTC;

Â  Â  Â  Â  Â  Â  3: HÃ³a Ä‘Æ¡n theo Nghá»‹ Ä‘á»‹nh sá»‘ 51/2010/NÄ-CP vÃ  Nghá»‹ Ä‘á»‹nh sá»‘ 04/2014/NÄ-CP;

Â  Â  Â  Â  Â  Â  4: HÃ³a Ä‘Æ¡n Ä‘áº·t in theo Nghá»‹ Ä‘á»‹nh 123/2020/NÄ-CP)

Â  Â  Â  Â  Â  Â  <TCTBao></TCTBao> \*//TiÌnh chÃ¢Ìt thÃ´ng baÌo (1: Há»§y; 2: Äiá»u chá»‰nh; 3: Thay tháº¿; 4: Giáº£i trÃ¬nh)

Â  Â  Â  Â  Â  Â  <LDo></LDo> //LyÌ do

Â  Â  Â  Â  Â  Â  <Fkey></Fkey>

Â  Â  Â  Â  </HDon>

Â  Â  </DSHDon>

</DLTBao>

Cáº¥u trÃºc chuá»—i Hash tráº£ vá»:

tFcVc/SWLPX+kbJ/uNzlVYBNNeoWlAIAQ0RmkGaYgqs=

### Gá»­i thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ sai sÃ³t sá»­ dá»¥ng SmartCA (bÆ°á»›c 2)

URL

string **SendInvNoticeErrorsWithSmartCA(**string Account, string ACpass, string username, string password, string xml**)**Â 

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p gá»­i thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ sai sÃ³t vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng SmartCA, sau khi thá»±c hiá»‡n gá»i hÃ m Láº¥y giÃ¡ trá»‹ Hash á»Ÿ bÆ°á»›c **GetHashInvNoticeErrorsWidthSmartCA**

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:**Â  TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh gá»­i thÃ´ng Ä‘iá»‡p.
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xml**: chuá»—i xml dá»¯ liá»‡u kÃ½ hash.Â 
*   **convert:** Máº·c Ä‘á»‹nh lÃ  0 (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode / 1- Cáº§n convert tá»« TCVN3 sang Unicode)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ max cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| OK:mtd | Gá»­i thÃ´ng Ä‘iá»‡p thÃ nh cÃ´ng, tráº£ vá» mÃ£ thÃ´ng Ä‘iá»‡p |  |

**Cáº¥u trÃºc chuá»—i xml truyá»n lÃªn:**

<CKS>

Â  Â  <SerialCert></SerialCert> \*//serial chá»©ng thÆ° cá»§a cÃ´ng ty

Â  Â  <HashValue></HashValue > \*//chuá»—i Hash láº¥y tá»« bÆ°á»›c 1

Â  Â  <SignValue></SignValue> \*//chuá»—i kÃ½

</CKS>

### Nháº­n káº¿t quáº£ thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n sai sÃ³t

URL

string **ReceivedInvoiceErrors** (string Account, string ACpass, string username, string password, string mtd)

DESCRIPTION

ÄÃ¢y lÃ  web service nháº­n káº¿t quáº£ pháº£n há»“i cá»§a thuáº¿ theo mÃ£ thÃ´ng Ä‘iá»‡p

HTTP METHOD

GET

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh gá»­i thÃ´ng Ä‘iá»‡p.
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Mtd:** MÃ£ thÃ´ng Ä‘iá»‡p thuáº¿ tráº£ vá» sau khi gá»i hÃ m gá»­i thÃ´ng Ä‘iá»‡p

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | MÃ£ thÃ´ng Ä‘iá»‡p khÃ´ng há»p lá»‡, khÃ´ng tÃ¬m tháº¥y báº£n ghi transaction |  |
| ERR:8 | Lá»—i nháº­n káº¿t quáº£ tá»« cÆ¡ quan thuáº¿ |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y chi tiáº¿t hÃ³a Ä‘Æ¡n sai sÃ³t |  |
| ERR:4 | ChÆ°a cÃ³ kÃªt quáº£ thuáº¿ tráº£ vá», tráº¡ng thÃ¡i chi tiáº¿t chÆ°a Ä‘Æ°á»£c cáº­p nháº­t |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| OK:mtd:dshoadon | Nháº­n káº¿t quáº£ thÃ nh cÃ´ng, tráº£ vá» mÃ£ thÃ´ng Ä‘iÃªp vÃ  danh sÃ¡ch hÃ³a Ä‘Æ¡n bá»‹ lá»—i |  |

### Xá»­ lÃ½ kÃªt quáº£ thÃ´ng Ä‘iá»‡p hÃ³a Ä‘Æ¡n sai sÃ³t

URL

string **HandleInvoiceErrors** (string Account, string ACpass, string username, string password, string mtd)

DESCRIPTION

ÄÃ¢y lÃ  web service xá»­ lÃ½ cáº­p nháº­t tráº¡ng thÃ¡i há»§y hÃ³a Ä‘Æ¡n má»›i vÃ  khÃ´i phá»¥c tráº¡ng thÃ¡i Ã³a Ä‘Æ¡n gá»‘c trÆ°á»ng há»£p nhá»¯ng hÃ³a Ä‘Æ¡n gá»­i sai sÃ³t bá»‹ thuáº¿ tá»« chá»‘i

HTTP METHOD

GET

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh gá»­i thÃ´ng Ä‘iá»‡p.
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Mtd:** MÃ£ thÃ´ng Ä‘iá»‡p thuáº¿ tráº£ vá» sau khi gá»i hÃ m gá»­i thÃ´ng Ä‘iá»‡p

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | MÃ£ thÃ´ng Ä‘iá»‡p khÃ´ng há»p lá»‡, khÃ´ng tÃ¬m tháº¥y báº£n ghi transaction |  |
| ERR:8 | KhÃ´ng tÃ¬m tháº¥y danh sÃ¡ch hÃ³a Ä‘Æ¡n há»§y Ä‘á»ƒ gá»­i máº«u 04, khÃ´ng cÃ³ hÃ³a Ä‘Æ¡n thuáº¿ tá»« chá»‘i |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y chi tiáº¿t hÃ³a Ä‘Æ¡n sai sÃ³t |  |
| ERR:4 | ChÆ°a cÃ³ kÃªt quáº£ thuáº¿ tráº£ vá», tráº¡ng thÃ¡i chi tiáº¿t chÆ°a Ä‘Æ°á»£c cáº­p nháº­t |  |
| ERR:6 | CÃ³ lá»—i xáº£y ra trong quÃ¡ trÃ¬nh update tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n sai sÃ³t |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:51 | Verify chá»©ng thÆ° lá»—i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| OK:mtd | TrÆ°á»ng há»£p kÃ½ sá»‘ HSM: cáº­p nháº­t tráº¡ng thÃ¡i thÃ nh cÃ´ng, tá»± Ä‘á»™ng gá»­i máº«u 04, kÃªt quáº£ tráº£ vá» mÃ£ thÃ´ng Ä‘iá»‡p |  |
| OK:xml | TrÆ°á»ng há»£p kÃ½ sá»‘ token: cáº­p nháº­t tráº¡ng thÃ¡i thÃ nh cÃ´ng, káº¿t quáº£ tráº£ vá» Xml Ä‘á»ƒ thá»±c hiá»‡n thao tÃ¡c gá»i webservice gá»­i thÃ´ng Ä‘iá»‡p sai sÃ³t báº±ng token |  |

### Láº¥y danh sÃ¡ch lá»‹ch sá»­ truyá»n nháº­n CQT theo tham sá»‘ truyá»n vÃ o vÃ  phÃ¢n trang

URL

string **GetTransactionItems** (string **username**, string **password**, int **status**, string **mtdiep**, string **message**, string **fromDate**, string **toDate**, string **mltdiep**, string **pattern**, string **serial**, decimal **invNo**, int **step**, int **pageIndex**, int **pageSize**)

DESCRIPTION

ÄÃ¢y lÃ  web service láº¥y danh sÃ¡ch lá»‹ch sá»­ truyá»n nháº­n lÃªn CQT theo tham sá»‘ tÃ¬m kiáº¿m vÃ  phÃ¢n trang

HTTP METHOD

GET

REQUEST BODY

*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Status:** Tráº¡ng thÃ¡i (giÃ¡ trá»‹ -1 sáº½ lÃ  láº¥y táº¥t cáº£)
*   **Mtdiep:** MÃ£ thÃ´ng Ä‘iá»‡p
*   **Message:** Ná»™i dung thÃ´ng Ä‘iá»‡p truyá»n vá»
*   **FromDate:** NgÃ y báº¯t Ä‘áº§u (dd/MM/yyyy)
*   **ToDate:** NgÃ y káº¿t thÃºc (dd/MM/yyyy)
*   **Mltdiep:** MÃ£ loáº¡i thÃ´ng Ä‘iá»‡p (Ä‘á»ƒ trá»‘ng sáº½ láº¥y táº¥t cáº£)
*   **Pattern:** Máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **Serial:** KÃ½ hiá»‡u hÃ³a Ä‘Æ¡n
*   **InvNo:** Sá»‘ hÃ³a Ä‘Æ¡n (giÃ¡ trá»‹ 0 sáº½ lÃ  láº¥y táº¥t cáº£)
*   **Step:** Step cá»§a lá»‹ch sá»­ truyá»n nháº­n (giÃ¡ trá»‹ -2 sáº½ lÃ  láº¥y táº¥t cáº£)
*   **PageIndex:** Láº¥y trang hiá»‡n táº¡i
*   **PageSize:** Sá»‘ báº£n ghi trong 1 trang

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty Ä‘Äƒng nháº­p |  |
| ERR:12 | Äá»‹nh dáº¡ng ngÃ y thÃ¡ng khÃ´ng Ä‘Ãºng | dd/MM/yyyy |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| OK:base64 | Danh sÃ¡ch lá»‹ch sá»­ truyá»n nháº­n theo base64 |  |

**Ghi chÃº**: cÃ¡c giÃ¡ trá»‹ báº¯t buá»™c vá»›i tham sá»‘ truyá»n vÃ o Ä‘ang Ä‘Æ°á»£c cáº¥u hÃ¬nh cá»‘ Ä‘á»‹nh

*   **Status** (Ä‘á»‹nh dáº¡ng sá»‘ (int))
    *   \-1: GiÃ¡ trá»‹ máº·c Ä‘á»‹nh, láº¥y táº¥t cáº£
    *   5: ÄÃ£ gá»­i TDiep tá»›i TCTN
    *   6: Lá»—i káº¿t ná»‘i tá»›i TCTN
    *   7: Gá»­i TCTN tháº¥t báº¡i
    *   8: TCTN Ä‘Ã£ nháº­n Ä‘Æ°á»£c TDiep
    *   9: TCTN Ä‘Ã£ tiáº¿p nháº­n vÃ  chÆ°a xá»­ lÃ½
    *   10: TCTN Ä‘Ã£ pháº£n há»“i TDiep ká»¹ thuáº­t
    *   11: TCTN Ä‘Ã£ gá»­i TDiep lÃªn CQT
    *   12: TCT Ä‘Ã£ pháº£n há»“i TDiep ká»¹ thuáº­t
    *   13: TCT Ä‘Ã£ pháº£n há»“i káº¿t quáº£ TDiep
    *   16: Lá»—i káº¿t ná»‘i cÆ¡ quan thuáº¿
*   **Step** (Ä‘á»‹nh dáº¡ng sá»‘ (int))
    *   \-2: GiÃ¡ trá»‹ máº·c Ä‘á»‹nh, láº¥y táº¥t cáº£
    *   17: Tiáº¿p nháº­n Tá» khai Ä‘Äƒng kÃ½ sá»­ dá»¥ng hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­
    *   18: KhÃ´ng tiáº¿p nháº­n Tá» khai Ä‘Äƒng kÃ½ sá»­ dá»¥ng hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­
    *   19: Tiáº¿p nháº­n Tá» khai Ä‘Äƒng kÃ½ thay Ä‘á»•i thÃ´ng tin sá»­ dá»¥ng hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­
    *   20: KhÃ´ng tiáº¿p nháº­n Tá» khai Ä‘Äƒng kÃ½ thay Ä‘á»•i thÃ´ng tin sá»­ dá»¥ng hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­
    *   21: Cháº¥p nháº­n Ä‘Äƒng kÃ½/thay Ä‘á»•i thÃ´ng tin sá»­ dá»¥ng hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­.
    *   22: KhÃ´ng cháº¥p nháº­n Ä‘Äƒng kÃ½/thay Ä‘á»•i thÃ´ng tin sá»­ dá»¥ng hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­!
    *   23: TCTN tiáº¿p nháº­n lá»—i
    *   24: TCTN tiáº¿p nháº­n thÃ nh cÃ´ng
    *   25: ThÃ´ng bÃ¡o hÃ³a Ä‘Æ¡n khÃ´ng Ä‘á»§ Ä‘iá»u kiá»‡n cáº¥p mÃ£
    *   26: ThÃ´ng bÃ¡o káº¿t quáº£ Ä‘á»‘i chiáº¿u thÃ´ng tin gÃ³i dá»¯ liá»‡u há»£p lá»‡
    *   27: ThÃ´ng bÃ¡o káº¿t quáº£ Ä‘á»‘i chiáº¿u thÃ´ng tin sÆ¡ bá»™ tá»«ng hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ khÃ´ng há»£p lá»‡
    *   28: ThÃ´ng bÃ¡o káº¿t quáº£ Ä‘á»‘i chiáº¿u sÆ¡ bá»™ thÃ´ng tin cá»§a Báº£ng tá»•ng há»£p khÃ¡c xÄƒng dáº§u, Tá» khai dá»¯ liá»‡u hÃ³a Ä‘Æ¡n, chá»©ng tá»« hÃ ng hÃ³a, dá»‹ch vá»¥ bÃ¡n ra khÃ´ng há»£p lá»‡
    *   29: ThÃ´ng bÃ¡o káº¿t quáº£ Ä‘á»‘i chiáº¿u sÆ¡ bá»™ thÃ´ng tin cá»§a Báº£ng tá»•ng há»£p xÄƒng dáº§u khÃ´ng há»£p lá»‡
    *   30: ThÃ´ng bÃ¡o káº¿t quáº£ Ä‘á»‘i chiáº¿u sÆ¡ bá»™ thÃ´ng tin ÄÆ¡n Ä‘á» nghá»‹ cáº¥p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ mÃ£ cá»§a CQT theo tá»«ng láº§n phÃ¡t sinh vá»›i trÆ°á»ng há»£p NNT gá»­i Ä‘Æ¡n qua cá»•ng thÃ´ng tin Ä‘iá»‡n tá»­ cá»§a TCT
    *   31: ThÃ´ng bÃ¡o káº¿t quáº£ Ä‘á»‘i chiáº¿u thÃ´ng tin gÃ³i dá»¯ liá»‡u khÃ´ng há»£p lá»‡ cÃ¡c trÆ°á»ng há»£p khÃ¡c
    *   32: TCT tiáº¿p nháº­n lá»—i
    *   33: TCT tiáº¿p nháº­n thÃ nh cÃ´ng
    *   34: TCT cáº¥p mÃ£ hÃ³a Ä‘Æ¡n thÃ nh cÃ´ng!
    *   35: TCT thÃ´ng bÃ¡o káº¿t quáº£ Ä‘á»‘i chiáº¿u thÃ´ng tin gÃ³i dá»¯ liá»‡u hÃ³a Ä‘Æ¡n sai sÃ³t há»£p lá»‡
*   **Mltdiep** (Ä‘á»‹nh dáº¡ng chá»¯ (string))
    *   100: ThÃ´ng Ä‘iá»‡p gá»­i tá» khai Ä‘Äƒng kÃ½/thay Ä‘á»•i thÃ´ng tin sá»­ dá»¥ng hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­
    *   101: ThÃ´ng Ä‘iá»‡p gá»­i tá» khai Ä‘Äƒng kÃ½ thay Ä‘á»•i thÃ´ng tin Ä‘Äƒng kÃ½ sá»­ dá»¥ng HÄÄT khi á»§y nhiá»‡m/nháº­n á»§y nhiá»‡m láº­p hÃ³a Ä‘Æ¡n
    *   106: ThÃ´ng Ä‘iá»‡p gá»­i ÄÆ¡n Ä‘á» nghá»‹ cáº¥p hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ mÃ£ cá»§a CQT theo tá»«ng láº§n phÃ¡t sinh
    *   200: ThÃ´ng Ä‘iá»‡p gá»­i hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ tá»›i cÆ¡ quan thuáº¿ Ä‘á»ƒ cáº¥p mÃ£
    *   201: ThÃ´ng Ä‘iá»‡p gá»­i hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ tá»›i cÆ¡ quan thuáº¿ Ä‘á»ƒ cáº¥p mÃ£ theo tá»«ng láº§n phÃ¡t sinh
    *   203: ThÃ´ng Ä‘iá»‡p chuyá»ƒn dá»¯ liá»‡u hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ khÃ´ng mÃ£ Ä‘áº¿n cÆ¡ quan thuáº¿
    *   300: ThÃ´ng Ä‘iá»‡p thÃ´ng bÃ¡o vá» hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ Ä‘Ã£ láº­p cÃ³ sai sÃ³t
    *   400: ThÃ´ng Ä‘iá»‡p chuyá»ƒn báº£ng tá»•ng há»£p dá»¯ liá»‡u hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ Ä‘áº¿n cÆ¡ quan thuáº¿
    *   500: ThÃ´ng Ä‘iá»‡p chuyá»ƒn dá»¯ liá»‡u hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ do TCTN uá»· quyá»n cáº¥p mÃ£ Ä‘áº¿n cÆ¡ quan thuáº¿
*   **InvNo** (Ä‘á»‹nh dáº¡ng sá»‘ (decima))
    *   0: GiÃ¡ trá»‹ máº·c Ä‘á»‹nh sáº½ láº¥t táº¥t cáº£

### Xem chi tiáº¿t báº£n ghi trong lá»‹ch sá»­ truyá»n nháº­n

URL

string GetTransactionDetail (string username, string password, string mtd)

DESCRIPTION

ÄÃ¢y lÃ  web service xem chi tiáº¿t báº£n ghi lá»‹ch sá»­ truyá»n nháº­n

HTTP METHOD

GET

REQUEST BODY

*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Mtd:** MÃ£ thÃ´ng Ä‘iá»‡p thuáº¿ tráº£ vá» sau khi gá»i hÃ m gá»­i thÃ´ng Ä‘iá»‡p

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty Ä‘Äƒng nháº­p |  |
| ERR:3 | MÃ£ thÃ´ng Ä‘iá»‡p khÃ´ng thuá»™c cÃ´ng ty tra cá»©u |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| OK:base64 | Chi tiáº¿t báº£n ghi tráº£ vá» dÆ°á»›i dáº¡ng Base64 |  |

### Xem chi tiáº¿t step CQT tráº£ vá»

URL

string **GetStepDetail** (string **username**, string **password**, string **stepId,** string **mtd**)

DESCRIPTION

ÄÃ¢y lÃ  web service xem chi tiáº¿t step CQT tráº£ káº¿t quáº£ vá»

HTTP METHOD

GET

REQUEST BODY

*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **stepId:** Id step Ä‘Æ°á»£c tráº£ káº¿t quáº£ trÃªn hÃ m **GetTransactionDetail**
*   **Mtd:** MÃ£ thÃ´ng Ä‘iá»‡p thuáº¿ tráº£ vá» sau khi gá»i hÃ m gá»­i thÃ´ng Ä‘iá»‡p

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty Ä‘Äƒng nháº­p |  |
| ERR:3 | MÃ£ thÃ´ng Ä‘iá»‡p khÃ´ng thuá»™c cÃ´ng ty tra cá»©u |  |
| ERR:4 | Tham sá»‘ truyá»n vÃ o rá»—ng |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| OK:base64 | Chi tiáº¿t báº£n ghi tráº£ vá» dÆ°á»›i dáº¡ng Base64 |  |

### Nháº­n káº¿t quáº£ lá»‹ch sá»± truyá»n nháº­n

URL

String GetResultsTransaction (string **username**, string **password,** int Id,bool **tranErr = true)**

DESCRIPTION

ÄÃ¢y lÃ  webservice nháº­n káº¿t quáº£ lá»‹ch sá»± truyá»n nháº­n

HTTP METHOD

POST

REQUEST BODY

*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Id:** Id cá»§a Packagetranscation trong **chi tiáº¿t step CQT tráº£ vá»**
*   **TranErr:** true : trÆ°á»ng há»£p lá»—i mÃ n hinh xem chi tiáº¿t cho nháº­n láº¡i, false: trÆ°á»ng há»£p nháº­n tá»« mÃ n hinh danh sÃ¡ch

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty Ä‘Äƒng nháº­p |  |
| ERR:3 | MÃ£ thÃ´ng Ä‘iá»‡p khÃ´ng thuá»™c cÃ´ng ty tra cá»©u |  |
| ERR:4 | Tham sá»‘ truyá»n vÃ o rá»—ng |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:6 | Sai tráº¡ng thÃ¡i |  |
| Ok:káº¿t quáº£ | ThÃ´ng bÃ¡o káº¿t quáº£ nháº­n káº¿t quáº£ |  |

### ÄÄƒng kÃ½ tá» khai DK01

URL

String RegisterPublish(string Account, string ACpass, string xmlInvData, string username, string password, int type)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p Ä‘Äƒng kÃ½ tá» khai 01.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass :**Â  TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice ( tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: Chuá»—i XML dá»¯ liá»‡u tá» khai 01 Ä‘Ã£ kÃ½ sá»‘ ( theo cáº¥u trÃºc mÃ´ táº£)
*   **type:** \=0

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm khÃ¡ch hÃ ng |  |
| ERR:11 | Dá»¯ liá»‡u xml validate lá»—i |  |
| ERR:6 | Lá»—i gá»­i dá»¯ liá»‡u Ä‘Äƒng kÃ½ lÃªn TCTN |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, kiá»ƒm tra exception tráº£ vá» (DB roll back) |
| OK: mtd | ÄÃ£ gá»­i tá» khai 01 lÃªn TCT: mÃ£ thÃ´ng Ä‘iá»‡p |  |

### Láº¥y káº¿t quáº£ tá» khai DK01

URL

String ReceivedRegisterPublish(string Account, string ACpass, string username, string password, string mtd)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p Ä‘Äƒng kÃ½ tá» khai 01.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass :**Â  TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice ( tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **mtd**: MÃ£ thÃ´ng Ä‘iá»‡p tá» khai 01

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm khÃ¡ch hÃ ng |  |
| ERR:11 | Dá»¯ liá»‡u xml validate lá»—i |  |
| ERR:6 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng Ä‘iá»‡p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, kiá»ƒm tra exception tráº£ vá» (DB roll back) |
| ERR: 7 | Lá»—i dá»¯ liá»‡u tráº£ vá» tá»« TCTN |  |
| OK: xml | XML káº¿t quáº£ TCT tráº£ vá» |  |

### ÄÄƒng kÃ½ dáº£i sá»‘

URL

RegisterPublishInvoice(string Account, string ACpass, string username, string password, string Pattern, string Type, string Serial, int Quantity)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p Ä‘Äƒng kÃ½ dáº£i sá»‘.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass :**Â  TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice ( tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ­ hiá»‡u
*   **Quantity**: Sá»‘ lÆ°á»£ng
*   **type:** \=0

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm khÃ¡ch hÃ ng |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, kiá»ƒm tra exception tráº£ vá» (DB roll back) |
| OK | ThÃ nh cÃ´ng |  |

### Há»§y dáº£i sá»‘

URL

CancelPublishInvoice(string Account, string ACpass, string username, string password, string Pattern, string Serial)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p huá»· dáº£i sá»‘.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass :**Â  TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice ( tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ­ hiá»‡u

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm khÃ¡ch hÃ ng |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, kiá»ƒm tra exception tráº£ vá» (DB roll back) |
| OK | ThÃ nh cÃ´ng |  |

### Láº¥y giÃ¡ trá»‹ Hash cho phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n SmartCa ( bÆ°á»›c 1)

URL

string **GetHashInvSmartCA**(string Account, string ACpass, string xmlInvData, string username, string password, string serialCert, int type, string invToken, string pattern = "", string serial = "", int convert = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng smartCA, thá»±c hiá»‡n truyá»n dá»¯ liá»‡u hÃ³a Ä‘Æ¡n vÃ  láº¥y giÃ¡ trá»‹ hash value Ä‘á»ƒ kÃ½ sá»‘ báº±ng smartCA á»Ÿ client.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml hÃ³a Ä‘Æ¡n (theo máº«u mÃ´ táº£ kÃ¨m theo)
*   **serialCert**: Serial cá»§a chá»©ng thÆ° sá»‘ cÃ´ng ty Ä‘Ã£ Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng
*   **type**: phÃ¡t hÃ nh má»›i: 0, thay tháº¿ = 1, Ä‘iá»u chá»‰nh tÄƒng = 2, Ä‘iá»u chá»‰nh giáº£m = 3, Ä‘iá»u chá»‰nh thÃ´ng tin = 4
*   **invToken**: chuá»—i token hÃ³a Ä‘Æ¡n = máº«u sá»‘;kÃ½ hiá»‡u;sá»‘ hÃ³a Ä‘Æ¡n (vÃ­ dá»¥: 01GTKT0/001;AA/17E;1) â€“ chá»‰ cáº§n khi thay tháº¿/ Ä‘iá»u chá»‰nh; phÃ¡t hÃ nh thÃ¬ Ä‘á»ƒ trá»‘ng
*   **pattern**: máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **serial**: kÃ½ hiá»‡u hÃ³a Ä‘Æ¡n

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  Serial khÃ´ng phÃ¹ há»£p |  |
| ERR:6 | KhÃ´ng cÃ²n Ä‘á»§ sá»‘ lÆ°á»£ng hÃ³a Ä‘Æ¡n Ä‘á»ƒ phÃ¡t hÃ nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng tá»‘i Ä‘a cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i hÃ³a Ä‘Æ¡n cÃ³ lá»—i |  |
| ERR:35 | CÃ´ng ty Ä‘Äƒng kÃ½ DK01 cáº£ cÃ³ mÃ£, khÃ´ng mÃ£. Táº¡o cáº£ kÃ½ hiá»‡u cáº£ 2 dáº£i cÃ³ mÃ£ vÃ  khÃ´ng mÃ£ sáº½ yÃªu cáº§u báº¯t buá»™c truyá»n pattern, serial |  |
| Chuá»—i xml tráº£ vá» | Chuá»—i tráº£ vá» |  |

Cáº¥u trÃºc chuá»—i XML tráº£ vá»:

<Invoices>

<Inv>

<key>**123**</key>

<idInv>**128668**</idInv>

<hashValue>**rKdYgeYc7CYLOhjfNFDZ8nBaWjA=**</hashValue>

<pattern>**01GTKT0/001**</pattern>

<serial>**AA/17E**</serial>

</Inv>

<Inv>

<key>**456**</key>

<idInv>**128923**</idInv>

<hashValue>**2p60p82YQhqjMHG9t/toIaLfENQ=**</hashValue>

<pattern>**01GTKT0/001**</pattern>

<serial>**AA/17E**</serial>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <key>: fkey

tag <idInv>: id hÃ³a Ä‘Æ¡n trÃªn há»‡ thá»‘ng vnpt

tag <hashValue>: chuá»—i hash

tag <pattern>: máº«u sá»‘

tag <serial>: kÃ½ hiá»‡u

### PhÃ¡t hÃ nh hÃ³a Ä‘Æ¡n sá»­ dá»¥ng SmartCA (bÆ°á»›c 2)

URL

string **PublishInvSmartCA** (string Account, string ACpass, string xmlInvData, string username, string password, string pattern = "", string serial = "").

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng SmartCA, sau khi thá»±c hiá»‡n gá»i hÃ m Láº¥y giÃ¡ trá»‹ Hash á»Ÿ bÆ°á»›c 1 (**3.1.25**)

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml dá»¯ liá»‡u kÃ½ hash hÃ³a
*   **pattern**: máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **serial**: kÃ½ hiá»‡u hÃ³a Ä‘Æ¡n
*   **convert:** Máº·c Ä‘á»‹nh lÃ  0 (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode / 1- Cáº§n convert tá»« TCVN3 sang Unicode)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y dáº£i hÃ³a Ä‘Æ¡n | KhÃ´ng tÃ¬m tháº¥y dáº£i hÃ³a Ä‘Æ¡n hoáº·c tÃ i khoáº£n phÃ¡t hÃ nh khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n trÃªn dáº£i hÃ³a Ä‘Æ¡n truyá»n lÃªn. |
| ERR:6 | KhÃ´ng cÃ²n Ä‘á»§ sá»‘ lÆ°á»£ng hÃ³a Ä‘Æ¡n Ä‘á»ƒ phÃ¡t hÃ nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ max cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i hÃ³a Ä‘Æ¡n cÃ³ lá»—i |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhSerial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhinvNumber: sá»‘ hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh |  |

**Cáº¥u trÃºc chuá»—i xmlData truyá»n lÃªn:**

<Invoices>

<SerialCert>540171AA56FDB2F8476BBD781251C83D</SerialCert>

<Inv>

<key>789</key>

<idInv>10</idInv>

<signValue>J2k7CsSN9Gb6PmsHD9yDJS1/j3s=</signValue>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <SerialCert>: serial chá»©ng thÆ° cá»§a cÃ´ng ty

tag <key>: fkey

tag <idInv>: id hÃ³a Ä‘Æ¡n trÃªn há»‡ thá»‘ng vnpt

tag <signValue>: chuá»—i kÃ½

### In thÃ´ng bÃ¡o hÃ³a Ä‘Æ¡n sai sÃ³t

URL

string **PrintNoticeInvError**(string mtdiep,string **username**, string **password**)

DESCRIPTION

ÄÃ¢y lÃ  web service in thÃ´ng bÃ¡o hÃ³a Ä‘Æ¡n sai sÃ³t

HTTP METHOD

GET

REQUEST BODY

*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   Mtdiep**:** MÃ£ thÃ´ng Ä‘iá»‡p

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty Ä‘Äƒng nháº­p |  |
| ERR:2 | MÃ£ thÃ´ng Ä‘iá»‡p khÃ´ng tá»“n táº¡i |  |
| ERR:3 | Data PackageTransactionData rá»—ng |  |
| ERR:7 | Dá»¯ liá»‡u in thÃ´ng bÃ¡o rá»—ng |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| OK:string | In thÃ´ng bÃ¡o hÃ³a Ä‘Æ¡n sai sÃ³t tráº£ vá» dÆ°á»›i dáº¡ng string |  |

### XÃ³a thÃ´ng bÃ¡o phÃ¡t hÃ nh

**URL**

RemovePublishInvoice (string Account, string ACpass, string username, string password, string Pattern, string Serial)

DESCRIPTION

web service xÃ³a thÃ´ng bÃ¡o phÃ¡t hÃ nh

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass :**Â  TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice ( tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ­ hiá»‡u

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm khÃ¡ch hÃ ng |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, kiá»ƒm tra exception tráº£ vá» (DB roll back) |
| OK | ThÃ nh cÃ´ng |  |

## NhÃ³m cÃ¡c hÃ m webservice xá»­ lÃ½ hÃ³a Ä‘Æ¡n (BussinessService)

### Äiá»u chá»‰nh hÃ³a Ä‘Æ¡n theo sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o

URL

string **AdjustActionAssignedNo**(string Account, string ACpass, string xmlInvData, string username, string pass, string fkey, string AttachFile, int? convert, string pattern = null, string serial = null).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cho phÃ©p truyá»n sá»‘ hÃ³a Ä‘Æ¡n

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass :** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cÅ© vÃ  hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh
*   **fkey:**Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh
*   **Convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ½ hiá»‡u

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | HÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh khÃ´ng tá»“n táº¡i |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh Ä‘Ã£ bá»‹ thay tháº¿. KhÃ´ng thá»ƒ Ä‘iá»u chá»‰nh Ä‘Æ°á»£c ná»¯a. |  |
| ERR:9 | Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘Æ°á»£c Ä‘iá»u chá»‰nh |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | Fkey cá»§a hÃ³a Ä‘Æ¡n má»›i Ä‘Ã£ tá»“n táº¡i trÃªn há»‡ thá»‘ng |
| ERR:14 | Lá»—i trong quÃ¡ trÃ¬nh thá»±c hiá»‡n cáº¥p sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| ERR:31 | Sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o khÃ´ng há»£p lá»‡ |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhSerial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhinvNumber: sá»‘ hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh |  |

**Cáº¥u trÃºc cá»§a xmlInvData (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<DieuChinhHD>

<key>Fkey cá»§a hÃ³a Ä‘Æ¡n Ä‘á»ƒ phÃ¢n biá»‡t hÃ³a Ä‘Æ¡n xuáº¥t cho khÃ¡ch hÃ ng nÃ o \*</key>

<Type>Loáº¡i hÃ³a Ä‘Æ¡n chá»‰nh sá»­a(int-máº·c Ä‘á»‹nh láº¥y lÃ  2) 2-Äiá»u chá»‰nh tÄƒng, 3-Äiá»u chá»‰nh giáº£m, 4- HÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh thÃ´ng tin</Type>

<InvoiceNo>Sá»‘ hÃ³a Ä‘Æ¡n \*</InvoiceNo>

<TTChung>

<MHSo>MÃ£ há»“ sÆ¡</MHSo>

<SBKe>Sá»‘ báº£ng kÃª (Sá»‘ cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</SBKe>

<NBKe>NgÃ y báº£ng kÃª (NgÃ y cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</NBKe>

<DVTTe>ÄÆ¡n vá»‹ tiá»n tá»‡ \*</DVTTe>

<TGia>Tá»· giÃ¡ (Báº¯t buá»™c (Trá»« trÆ°á»ng há»£p ÄÆ¡n vá»‹ tiá»n tá»‡ lÃ  VND))</TGia>

<HTTToan>HÃ¬nh thá»©c thanh toÃ¡n </HTTToan>

</TTChung>

<NDHDon>

<NBan>

<Ten>TÃªn </Ten>

<MST>MÃ£ sá»‘ thuáº¿ </MST>

<DChi>Äá»‹a chá»‰ </DChi>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<Fax>Fax</Fax>

<LDDNBo>Lá»‡nh Ä‘iá»u Ä‘á»™ng ná»™i bá»™ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</LDDNBo>

<HDSo>Há»£p Ä‘á»“ng sá»‘ (Há»£p Ä‘á»“ng váº­n chuyá»ƒn) (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HDSo>

<HVTNXHang>Há» vÃ  tÃªn ngÆ°á»i xuáº¥t hÃ ng (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HVTNXHang>

<TNVChuyen>TÃªn ngÆ°á»i váº­n chuyá»ƒn (phiáº¿u xuáº¥t kho)</TNVChuyen>

<PTVChuyen>PhÆ°Æ¡ng tiá»‡n váº­n chuyá»ƒn (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho)</PTVChuyen>

<HDKTSo>Há»£p Ä‘á»“ng kinh táº¿ sá»‘ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTSo>

<HDKTNgay>Há»£p Ä‘á»“ng kinh táº¿ ngÃ y (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTNgay>

</NBan>

<NMua>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ (Báº¯t buá»™c náº¿u cÃ³)</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<MKHang>MÃ£ khÃ¡ch hÃ ng</MKHang>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<HVTNMHang>Há» vÃ  tÃªn ngÆ°á»i mua hÃ ng</HVTNMHang>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<HVTNNHang>Há» vÃ  tÃªn ngÆ°á»i nháº­n hÃ ng (phiáº¿u xuáº¥t kho)</HVTNNHang>

</NMua>

<DSHHDVu>

<HHDVu>

<TChat>TÃ­nh cháº¥t \* (1-HÃ ng hÃ³a, dá»‹ch vá»¥; 2-Khuyáº¿n máº¡i; 3-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)</TChat>

<STT>Sá»‘ thá»© tá»±</STT>

<MHHDVu>MÃ£ hÃ ng hÃ³a, dá»‹ch vá»¥ (Báº¯t buá»™c náº¿u cÃ³)</MHHDVu>

<THHDVu>TÃªn hÃ ng hÃ³a, dá»‹ch vá»¥ \*</THHDVu>

<DVTinh>ÄÆ¡n vá»‹ tÃ­nh (Báº¯t buá»™c náº¿u cÃ³)</DVTinh>

<SLuong>Sá»‘ lÆ°á»£ng (Báº¯t buá»™c náº¿u cÃ³)</SLuong>

<DGia>ÄÆ¡n giÃ¡ (Báº¯t buá»™c náº¿u cÃ³)</DGia>

<TLCKhau>Tá»· lá»‡ % chiáº¿t kháº¥u</TLCKhau>

<STCKhau>Sá»‘ tiá»n chiáº¿t kháº¥u </STCKhau>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) - Báº¯t buá»™c trá»« trÆ°á»ng há»£p TChat = 4</ThTien>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<TThue>Tiá»n thuáº¿</TThue>

<TSThue>Tiá»n sau thuáº¿</TSThue>

<TTKhac>

<TTin>

<TTruong>TÃªn trÆ°á»ng</TTruong>

<KDLieu>Kiá»ƒu dá»¯ liá»‡u</KDLieu>

<DLieu>Dá»¯ liá»‡u</DLieu>

</TTin>

</TTKhac>

</HHDVu>

</DSHHDVu>

<TToan>

<THTTLTSuat><!--sá»­ dá»¥ng hÃ³a Ä‘Æ¡n GTGT-->

<LTSuat>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT)</ThTien>

<TThue>Tiá»n thuáº¿ (Tiá»n thuáº¿ GTGT)</TThue>

</LTSuat>

</THTTLTSuat>

<TgTCThue>Tá»•ng tiá»n chÆ°a thuáº¿ (Tá»•ng cá»™ng thÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTCThue>

<TgTThue>Tá»•ng tiá»n thuáº¿ (Tá»•ng cá»™ng tiá»n thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTThue>

<TTCKTMai>Tá»•ng tiá»n chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i</TTCKTMai>

<TgTTTBSo>Tá»•ng tiá»n thanh toÃ¡n báº±ng sá»‘ \*</TgTTTBSo>

<TgTTTBChu>Tá»•ng tiá»n thanh toÃ¡n báº±ng chá»¯ \*</TgTTTBChu>

</TToan>

</NDHDon>

</DieuChinhHD>

### Html xem trÆ°á»›c khi Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n

URL

string **AdjustInvoiceNoPublish**(string Account, string ACpass, string xmlInvData, string username, string pass, string fkey, int? convert, string pattern = null, string serial = null).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n láº¥y dá»¯ liá»‡u html hÃ³a Ä‘Æ¡n má»›i cá»§a Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n trÆ°á»›c khi kÃ½ sá»‘ phÃ¡t hÃ nh

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cÅ© vÃ  hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh
*   **fkey:** Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh
*   **Convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ½ hiá»‡u

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | HÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh khÃ´ng tá»“n táº¡i |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | CÃ³ lá»—i trong quÃ¡ trÃ¬nh táº¡o má»›i hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh Ä‘Ã£ bá»‹ thay tháº¿. KhÃ´ng thá»ƒ Ä‘iá»u chá»‰nh Ä‘Æ°á»£c ná»¯a. |  |
| ERR:9 | Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘Æ°á»£c Ä‘iá»u chá»‰nh |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:60 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (CÃ³ mÃ£ / KhÃ´ng mÃ£). |  |
| ERR:61 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (HD GTGT / HD bÃ¡n hÃ ng...). |  |
| ERR:62 | KhÃ´ng Ä‘Æ°á»£c dÃ¹ng khÃ´ng mÃ£ Ä‘Äƒng kÃ½ gá»­i báº£ng tá»•ng há»£p thay tháº¿, Ä‘iá»u chá»‰nh cÃ¡c hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i thÃ´ng tin chi tiáº¿t. |  |
| chuá»—i_hml_tráº£_vá» | Tráº£ vá» chuá»—i hml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh nhÆ°ng chÆ°a phÃ¡t hÃ nh, kÃ½ sá»‘ | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng html |

**Cáº¥u trÃºc cá»§a xmlInvData (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<DieuChinhHD>

<key>Fkey cua hoa don \*</key>

<Type>Loáº¡i hÃ³a Ä‘Æ¡n chá»‰nh sá»­a(int-máº·c Ä‘á»‹nh láº¥y lÃ  2) 2-Äiá»u chá»‰nh tÄƒng, 3-Äiá»u chá»‰nh giáº£m, 4- HÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh thÃ´ng tin</Type>

<TTChung>

<MHSo>MÃ£ há»“ sÆ¡</MHSo>

<SBKe>Sá»‘ báº£ng kÃª (Sá»‘ cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</SBKe>

<NBKe>NgÃ y báº£ng kÃª (NgÃ y cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</NBKe>

<DVTTe>ÄÆ¡n vá»‹ tiá»n tá»‡ \*</DVTTe>

<TGia>Tá»· giÃ¡ (Báº¯t buá»™c (Trá»« trÆ°á»ng há»£p ÄÆ¡n vá»‹ tiá»n tá»‡ lÃ  VND))</TGia>

<HTTToan>HÃ¬nh thá»©c thanh toÃ¡n </HTTToan>

</TTChung>

<NDHDon>

<NBan>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ \*</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<Fax>Fax</Fax>

<LDDNBo>Lá»‡nh Ä‘iá»u Ä‘á»™ng ná»™i bá»™ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</LDDNBo>

<HDSo>Há»£p Ä‘á»“ng sá»‘ (Há»£p Ä‘á»“ng váº­n chuyá»ƒn) (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HDSo>

<HVTNXHang>Há» vÃ  tÃªn ngÆ°á»i xuáº¥t hÃ ng (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HVTNXHang>

<TNVChuyen>TÃªn ngÆ°á»i váº­n chuyá»ƒn (phiáº¿u xuáº¥t kho)</TNVChuyen>

<PTVChuyen>PhÆ°Æ¡ng tiá»‡n váº­n chuyá»ƒn (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho)</PTVChuyen>

<HDKTSo>Há»£p Ä‘á»“ng kinh táº¿ sá»‘ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTSo>

<HDKTNgay>Há»£p Ä‘á»“ng kinh táº¿ ngÃ y (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTNgay>

</NBan>

<NMua>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ (Báº¯t buá»™c náº¿u cÃ³)</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<MKHang>MÃ£ khÃ¡ch hÃ ng</MKHang>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<HVTNMHang>Há» vÃ  tÃªn ngÆ°á»i mua hÃ ng</HVTNMHang>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<HVTNNHang>Há» vÃ  tÃªn ngÆ°á»i nháº­n hÃ ng (phiáº¿u xuáº¥t kho)</HVTNNHang>

</NMua>

<DSHHDVu>

<HHDVu>

<TChat>TÃ­nh cháº¥t \* (1-HÃ ng hÃ³a, dá»‹ch vá»¥; 2-Khuyáº¿n máº¡i; 3-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)</TChat>

<STT>Sá»‘ thá»© tá»±</STT>

<MHHDVu>MÃ£ hÃ ng hÃ³a, dá»‹ch vá»¥ (Báº¯t buá»™c náº¿u cÃ³)</MHHDVu>

<THHDVu>TÃªn hÃ ng hÃ³a, dá»‹ch vá»¥ \*</THHDVu>

<DVTinh>ÄÆ¡n vá»‹ tÃ­nh (Báº¯t buá»™c náº¿u cÃ³)</DVTinh>

<SLuong>Sá»‘ lÆ°á»£ng (Báº¯t buá»™c náº¿u cÃ³)</SLuong>

<DGia>ÄÆ¡n giÃ¡ (Báº¯t buá»™c náº¿u cÃ³)</DGia>

<TLCKhau>Tá»· lá»‡ % chiáº¿t kháº¥u</TLCKhau>

<STCKhau>Sá»‘ tiá»n chiáº¿t kháº¥u </STCKhau>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) - Báº¯t buá»™c trá»« trÆ°á»ng há»£p TChat = 4</ThTien>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<TThue>Tiá»n thuáº¿</TThue>

<TSThue>Tiá»n sau thuáº¿</TSThue>

<TTKhac>

<TTin>

<TTruong>TÃªn trÆ°á»ng</TTruong>

<KDLieu>Kiá»ƒu dá»¯ liá»‡u</KDLieu>

<DLieu>Dá»¯ liá»‡u</DLieu>

</TTin>

</TTKhac>

</HHDVu>

</DSHHDVu>

<TToan>

<THTTLTSuat> <!--sá»­ dá»¥ng hÃ³a Ä‘Æ¡n GTGT-->

<LTSuat>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT)</ThTien>

<TThue>Tiá»n thuáº¿ (Tiá»n thuáº¿ GTGT)</TThue>

</LTSuat>

</THTTLTSuat>

<TgTCThue>Tá»•ng tiá»n chÆ°a thuáº¿ (Tá»•ng cá»™ng thÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTCThue>

<TgTThue>Tá»•ng tiá»n thuáº¿ (Tá»•ng cá»™ng tiá»n thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTThue>

<TTCKTMai>Tá»•ng tiá»n chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i</TTCKTMai>

<TgTTTBSo>Tá»•ng tiá»n thanh toÃ¡n báº±ng sá»‘ \*</TgTTTBSo>

<TgTTTBChu>Tá»•ng tiá»n thanh toÃ¡n báº±ng chá»¯ \*</TgTTTBChu>

</TToan>

</NDHDon>

</DieuChinhHD>

### Thay tháº¿ hÃ³a Ä‘Æ¡n theo sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o

URL

string **ReplaceActionAssignedNo**(string Account, string ACpass, string xmlInvData, string username, string pass, string fkey, string Attachfile, int? convert, string pattern = null, string serial = null).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n thay tháº¿ hÃ³a Ä‘Æ¡n cho phÃ©p truyá»n sá»‘ hÃ³a Ä‘Æ¡n

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cÅ© vÃ  hÃ³a Ä‘Æ¡n thay tháº¿
*   **fkey:** Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n thay tháº¿
*   **Convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ½ hiá»‡u

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cáº§n thay tháº¿ |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | CÃ³ lá»—i trong quÃ¡ trÃ¬nh thay tháº¿ hÃ³a Ä‘Æ¡n |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Æ°á»£c thay tháº¿ rá»“i. KhÃ´ng thá»ƒ thay tháº¿ ná»¯a. |  |
| ERR:9 | Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘Æ°á»£c thay tháº¿ |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | Fkey cá»§a hÃ³a Ä‘Æ¡n má»›i Ä‘Ã£ tá»“n táº¡i trÃªn há»‡ thá»‘ng |
| ERR:14 | Lá»—i trong quÃ¡ trÃ¬nh thá»±c hiá»‡n cáº¥p sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| ERR:31 | Sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o khÃ´ng há»£p lá»‡ |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thay tháº¿PatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n thay tháº¿Serial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n thay tháº¿invNumber: sá»‘ hÃ³a Ä‘Æ¡n thay tháº¿ |  |

**Cáº¥u trÃºc cá»§a xmlInvData (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<ThayTheHD>

<key>Fkey cá»§a hÃ³a Ä‘Æ¡n \*</key>

<InvoiceNo>Sá»‘ hÃ³a Ä‘Æ¡n</InvoiceNo>

<TTChung>

<MHSo>MÃ£ há»“ sÆ¡</MHSo>

<SBKe>Sá»‘ báº£ng kÃª (Sá»‘ cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</SBKe>

<NBKe>NgÃ y báº£ng kÃª (NgÃ y cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</NBKe>

<DVTTe>ÄÆ¡n vá»‹ tiá»n tá»‡ \*</DVTTe>

<TGia>Tá»· giÃ¡ (Báº¯t buá»™c (Trá»« trÆ°á»ng há»£p ÄÆ¡n vá»‹ tiá»n tá»‡ lÃ  VND))</TGia>

<HTTToan>HÃ¬nh thá»©c thanh toÃ¡n </HTTToan>

</TTChung>

<NDHDon>

<NBan>

<Ten>TÃªn </Ten>

<MST>MÃ£ sá»‘ thuáº¿ </MST>

<DChi>Äá»‹a chá»‰ </DChi>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<Fax>Fax</Fax>

<LDDNBo>Lá»‡nh Ä‘iá»u Ä‘á»™ng ná»™i bá»™ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</LDDNBo>

<HDSo>Há»£p Ä‘á»“ng sá»‘ (Há»£p Ä‘á»“ng váº­n chuyá»ƒn) (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HDSo>

<HVTNXHang>Há» vÃ  tÃªn ngÆ°á»i xuáº¥t hÃ ng (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HVTNXHang>

<TNVChuyen>TÃªn ngÆ°á»i váº­n chuyá»ƒn (phiáº¿u xuáº¥t kho)</TNVChuyen>

<PTVChuyen>PhÆ°Æ¡ng tiá»‡n váº­n chuyá»ƒn (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho)</PTVChuyen>

<HDKTSo>Há»£p Ä‘á»“ng kinh táº¿ sá»‘ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTSo>

<HDKTNgay>Há»£p Ä‘á»“ng kinh táº¿ ngÃ y (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTNgay>

</NBan>

<NMua>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ (Báº¯t buá»™c náº¿u cÃ³)</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<MKHang>MÃ£ khÃ¡ch hÃ ng</MKHang>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<HVTNMHang>Há» vÃ  tÃªn ngÆ°á»i mua hÃ ng</HVTNMHang>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<HVTNNHang>Há» vÃ  tÃªn ngÆ°á»i nháº­n hÃ ng (phiáº¿u xuáº¥t kho)</HVTNNHang>

</NMua>

<DSHHDVu>

<HHDVu>

<TChat>TÃ­nh cháº¥t \* (1-HÃ ng hÃ³a, dá»‹ch vá»¥; 2-Khuyáº¿n máº¡i; 3-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)</TChat>

<STT>Sá»‘ thá»© tá»±</STT>

<MHHDVu>MÃ£ hÃ ng hÃ³a, dá»‹ch vá»¥ (Báº¯t buá»™c náº¿u cÃ³)</MHHDVu>

<THHDVu>TÃªn hÃ ng hÃ³a, dá»‹ch vá»¥ \*</THHDVu>

<DVTinh>ÄÆ¡n vá»‹ tÃ­nh (Báº¯t buá»™c náº¿u cÃ³)</DVTinh>

<SLuong>Sá»‘ lÆ°á»£ng (Báº¯t buá»™c náº¿u cÃ³)</SLuong>

<DGia>ÄÆ¡n giÃ¡ (Báº¯t buá»™c náº¿u cÃ³)</DGia>

<TLCKhau>Tá»· lá»‡ % chiáº¿t kháº¥u</TLCKhau>

<STCKhau>Sá»‘ tiá»n chiáº¿t kháº¥u </STCKhau>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) - Báº¯t buá»™c trá»« trÆ°á»ng há»£p TChat = 4</ThTien>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<TThue>Tiá»n thuáº¿</TThue>

<TSThue>Tiá»n sau thuáº¿</TSThue>

<TTKhac>

<TTin>

<TTruong>TÃªn trÆ°á»ng</TTruong>

<KDLieu>Kiá»ƒu dá»¯ liá»‡u</KDLieu>

<DLieu>Dá»¯ liá»‡u</DLieu>

</TTin>

</TTKhac>

</HHDVu>

</DSHHDVu>

<TToan>

<THTTLTSuat> <!--sá»­ dá»¥ng hÃ³a Ä‘Æ¡n GTGT-->

<LTSuat>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT)</ThTien>

<TThue>Tiá»n thuáº¿ (Tiá»n thuáº¿ GTGT)</TThue>

</LTSuat>

</THTTLTSuat>

<TgTCThue>Tá»•ng tiá»n chÆ°a thuáº¿ (Tá»•ng cá»™ng thÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTCThue>

<TgTThue>Tá»•ng tiá»n thuáº¿ (Tá»•ng cá»™ng tiá»n thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTThue>

<TTCKTMai>Tá»•ng tiá»n chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i</TTCKTMai>

<TgTTTBSo>Tá»•ng tiá»n thanh toÃ¡n báº±ng sá»‘ \*</TgTTTBSo>

<TgTTTBChu>Tá»•ng tiá»n thanh toÃ¡n báº±ng chá»¯ \*</TgTTTBChu>

</TToan>

</NDHDon>

</ThayTheHD>

### Html xem trÆ°á»›c khi thay tháº¿ hÃ³a Ä‘Æ¡n

URL

string **ReplaceInvoiceNoPublish**(string Account, string ACpass, string xmlInvData, string username, string pass, string fkey, int? convert, string pattern = null, string serial = null).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n láº¥y dá»¯ liá»‡u html hÃ³a Ä‘Æ¡n má»›i cá»§a thay tháº¿ hÃ³a Ä‘Æ¡n trÆ°á»›c khi kÃ½ sá»‘ phÃ¡t hÃ nh

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cÅ© vÃ  hÃ³a Ä‘Æ¡n thay tháº¿
*   **fkey:** Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n thay tháº¿
*   **Convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ½ hiá»‡u

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cáº§n thay tháº¿ |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | CÃ³ lá»—i trong quÃ¡ trÃ¬nh táº¡o má»›i hÃ³a Ä‘Æ¡n thay tháº¿ |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Æ°á»£c thay tháº¿ rá»“i. KhÃ´ng thá»ƒ thay tháº¿ ná»¯a. |  |
| ERR:9 | Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘Æ°á»£c thay tháº¿ |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| chuá»—i_hml_tráº£_vá» | Tráº£ vá» chuá»—i hml tÆ°Æ¡ng á»©ng vá»›i hÃ³a Ä‘Æ¡n thay tháº¿ nhÆ°ng chÆ°a phÃ¡t hÃ nh, kÃ½ sá»‘ | Tráº£ vá» má»™t hÃ³a Ä‘Æ¡n dÆ°á»›i dáº¡ng html |

**Cáº¥u trÃºc cá»§a xmlInvData (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<ThayTheHD>

<key>Fkey cá»§a hÃ³a Ä‘Æ¡n cáº§n thay tháº¿ \*</key>

<TTChung>

<MHSo>MÃ£ há»“ sÆ¡</MHSo>

<SBKe>Sá»‘ báº£ng kÃª (Sá»‘ cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</SBKe>

<NBKe>NgÃ y báº£ng kÃª (NgÃ y cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</NBKe>

<DVTTe>ÄÆ¡n vá»‹ tiá»n tá»‡ \*</DVTTe>

<TGia>Tá»· giÃ¡ (Báº¯t buá»™c (Trá»« trÆ°á»ng há»£p ÄÆ¡n vá»‹ tiá»n tá»‡ lÃ  VND))</TGia>

<HTTToan>HÃ¬nh thá»©c thanh toÃ¡n </HTTToan>

</TTChung>

<NDHDon>

<NBan>

<Ten>TÃªn </Ten>

<MST>MÃ£ sá»‘ thuáº¿ </MST>

<DChi>Äá»‹a chá»‰ </DChi>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<Fax>Fax</Fax>

<LDDNBo>Lá»‡nh Ä‘iá»u Ä‘á»™ng ná»™i bá»™ (Phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</LDDNBo>

<HDSo>Há»£p Ä‘á»“ng sá»‘ (Há»£p Ä‘á»“ng váº­n chuyá»ƒn) (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HDSo>

<HVTNXHang>Há» vÃ  tÃªn ngÆ°á»i xuáº¥t hÃ ng (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HVTNXHang>

<TNVChuyen>TÃªn ngÆ°á»i váº­n chuyá»ƒn (phiáº¿u xuáº¥t kho)</TNVChuyen>

<PTVChuyen>PhÆ°Æ¡ng tiá»‡n váº­n chuyá»ƒn (phiáº¿u xuáº¥t kho)</PTVChuyen>

<HDKTSo>Há»£p Ä‘á»“ng kinh táº¿ sá»‘ ( phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTSo>

<HDKTNgay>Há»£p Ä‘á»“ng kinh táº¿ ngÃ y (phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTNgay>

</NBan>

<NMua>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ (Báº¯t buá»™c náº¿u cÃ³)</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<MKHang>MÃ£ khÃ¡ch hÃ ng</MKHang>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<HVTNMHang>Há» vÃ  tÃªn ngÆ°á»i mua hÃ ng</HVTNMHang>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<HVTNNHang>Há» vÃ  tÃªn ngÆ°á»i nháº­n hÃ ng (phiáº¿u xuáº¥t kho)</HVTNNHang>

</NMua>

<DSHHDVu>

<HHDVu>

<TChat>TÃ­nh cháº¥t \* (1-HÃ ng hÃ³a, dá»‹ch vá»¥; 2-Khuyáº¿n máº¡i; 3-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)</TChat>

<STT>Sá»‘ thá»© tá»±</STT>

<MHHDVu>MÃ£ hÃ ng hÃ³a, dá»‹ch vá»¥ (Báº¯t buá»™c náº¿u cÃ³)</MHHDVu>

<THHDVu>TÃªn hÃ ng hÃ³a, dá»‹ch vá»¥ \*</THHDVu>

<DVTinh>ÄÆ¡n vá»‹ tÃ­nh (Báº¯t buá»™c náº¿u cÃ³)</DVTinh>

<SLuong>Sá»‘ lÆ°á»£ng (Báº¯t buá»™c náº¿u cÃ³)</SLuong>

<DGia>ÄÆ¡n giÃ¡ (Báº¯t buá»™c náº¿u cÃ³)</DGia>

<TLCKhau>Tá»· lá»‡ % chiáº¿t kháº¥u</TLCKhau>

<STCKhau>Sá»‘ tiá»n chiáº¿t kháº¥u </STCKhau>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) - Báº¯t buá»™c trá»« trÆ°á»ng há»£p TChat = 4</ThTien>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<TThue>Tiá»n thuáº¿</TThue>

<TSThue>Tiá»n sau thuáº¿</TSThue>

<TTKhac>

<TTin>

<TTruong>TÃªn trÆ°á»ng</TTruong>

<KDLieu>Kiá»ƒu dá»¯ liá»‡u</KDLieu>

<DLieu>Dá»¯ liá»‡u</DLieu>

</TTin>

</TTKhac>

</HHDVu>

</DSHHDVu>

<TToan>

<THTTLTSuat><!--sá»­ dá»¥ng hÃ³a Ä‘Æ¡n GTGT-->

<LTSuat>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT)</ThTien>

<TThue>Tiá»n thuáº¿ (Tiá»n thuáº¿ GTGT)</TThue>

</LTSuat>

</THTTLTSuat>

<TgTCThue>Tá»•ng tiá»n chÆ°a thuáº¿ (Tá»•ng cá»™ng thÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTCThue>

<TgTThue>Tá»•ng tiá»n thuáº¿ (Tá»•ng cá»™ng tiá»n thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTThue>

<TTCKTMai>Tá»•ng tiá»n chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i</TTCKTMai>

<TgTTTBSo>Tá»•ng tiá»n thanh toÃ¡n báº±ng sá»‘ \*</TgTTTBSo>

<TgTTTBChu>Tá»•ng tiá»n thanh toÃ¡n báº±ng chá»¯ \*</TgTTTBChu>

</TToan>

</NDHDon>

</ThayTheHD>

### Thay tháº¿ hÃ³a Ä‘Æ¡n giá»¯ sá»‘ khÃ¡c máº«u sá»‘

URL

string **ReplaceAssignedNoNewPattern**(string Account, string ACpass, string xmlInvData, string username, string pass, string fkey, string Attachfile, int? convert, string pattern = null, string serial = null, string OldPattern = null).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n thay tháº¿ hÃ³a Ä‘Æ¡n giá»¯ sá»‘ khÃ¡c máº«u sá»‘

HTTP METHOD

POST

REQUEST BODY

*   **username / pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cÅ© vÃ  hÃ³a Ä‘Æ¡n thay tháº¿
*   **fkey:** Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n thay tháº¿
*   **Convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **Pattern**: Máº«u sá»‘ má»›i
*   **Serial**: KÃ½ hiá»‡u
*   **OldPattern:** Máº«u sá»‘ cÅ©

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cáº§n thay tháº¿ |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | CÃ³ lá»—i trong quÃ¡ trÃ¬nh thay tháº¿ hÃ³a Ä‘Æ¡n |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Æ°á»£c thay tháº¿ rá»“i. KhÃ´ng thá»ƒ thay tháº¿ ná»¯a. |  |
| ERR:9 | Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘Æ°á»£c thay tháº¿ |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | Fkey cá»§a hÃ³a Ä‘Æ¡n má»›i Ä‘Ã£ tá»“n táº¡i trÃªn há»‡ thá»‘ng |
| ERR:14 | Lá»—i trong quÃ¡ trÃ¬nh thá»±c hiá»‡n cáº¥p sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| ERR:31 | Sá»‘ hÃ³a Ä‘Æ¡n truyá»n vÃ o khÃ´ng há»£p lá»‡ |  |
| ERR:60 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (CÃ³ mÃ£ / KhÃ´ng mÃ£). |  |
| ERR:61 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (HD GTGT / HD bÃ¡n hÃ ng...). |  |
| ERR:62 | KhÃ´ng Ä‘Æ°á»£c dÃ¹ng khÃ´ng mÃ£ Ä‘Äƒng kÃ½ gá»­i báº£ng tá»•ng há»£p thay tháº¿, Ä‘iá»u chá»‰nh cÃ¡c hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i thÃ´ng tin chi tiáº¿t. |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thay tháº¿PatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n thay tháº¿Serial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n thay tháº¿invNumber: sá»‘ hÃ³a Ä‘Æ¡n thay tháº¿ |  |

**Cáº¥u trÃºc cá»§a xmlInvData (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<ThayTheHD>

<key>Fkey cá»§a hÃ³a Ä‘Æ¡n \*</key>

<InvoiceNo>Sá»‘ hÃ³a Ä‘Æ¡n \*</InvoiceNo>

<TTChung>

<MHSo>MÃ£ há»“ sÆ¡</MHSo>

<SBKe>Sá»‘ báº£ng kÃª (Sá»‘ cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</SBKe>

<NBKe>NgÃ y báº£ng kÃª (NgÃ y cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</NBKe>

<DVTTe>ÄÆ¡n vá»‹ tiá»n tá»‡ \*</DVTTe>

<TGia>Tá»· giÃ¡ (Báº¯t buá»™c (Trá»« trÆ°á»ng há»£p ÄÆ¡n vá»‹ tiá»n tá»‡ lÃ  VND))</TGia>

<HTTToan>HÃ¬nh thá»©c thanh toÃ¡n </HTTToan>

</TTChung>

<NDHDon>

<NBan>

<Ten>TÃªn </Ten>

<MST>MÃ£ sá»‘ thuáº¿ </MST>

<DChi>Äá»‹a chá»‰ </DChi>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<Fax>Fax</Fax>

<LDDNBo>Lá»‡nh Ä‘iá»u Ä‘á»™ng ná»™i bá»™ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</LDDNBo>

<HDSo>Há»£p Ä‘á»“ng sá»‘ (Há»£p Ä‘á»“ng váº­n chuyá»ƒn) (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HDSo>

<HVTNXHang>Há» vÃ  tÃªn ngÆ°á»i xuáº¥t hÃ ng (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HVTNXHang>

<TNVChuyen>TÃªn ngÆ°á»i váº­n chuyá»ƒn (phiáº¿u xuáº¥t kho)</TNVChuyen>

<PTVChuyen>PhÆ°Æ¡ng tiá»‡n váº­n chuyá»ƒn (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho)</PTVChuyen>

<HDKTSo>Há»£p Ä‘á»“ng kinh táº¿ sá»‘ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTSo>

<HDKTNgay>Há»£p Ä‘á»“ng kinh táº¿ ngÃ y (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTNgay>

</NBan>

<NMua>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ (Báº¯t buá»™c náº¿u cÃ³)</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<MKHang>MÃ£ khÃ¡ch hÃ ng</MKHang>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<HVTNMHang>Há» vÃ  tÃªn ngÆ°á»i mua hÃ ng</HVTNMHang>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<HVTNNHang>Há» vÃ  tÃªn ngÆ°á»i nháº­n hÃ ng (phiáº¿u xuáº¥t kho)</HVTNNHang>

</NMua>

<DSHHDVu>

<HHDVu>

<TChat>TÃ­nh cháº¥t \* (1-HÃ ng hÃ³a, dá»‹ch vá»¥; 2-Khuyáº¿n máº¡i; 3-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)</TChat>

<STT>Sá»‘ thá»© tá»±</STT>

<MHHDVu>MÃ£ hÃ ng hÃ³a, dá»‹ch vá»¥ (Báº¯t buá»™c náº¿u cÃ³)</MHHDVu>

<THHDVu>TÃªn hÃ ng hÃ³a, dá»‹ch vá»¥ \*</THHDVu>

<DVTinh>ÄÆ¡n vá»‹ tÃ­nh (Báº¯t buá»™c náº¿u cÃ³)</DVTinh>

<SLuong>Sá»‘ lÆ°á»£ng (Báº¯t buá»™c náº¿u cÃ³)</SLuong>

<DGia>ÄÆ¡n giÃ¡ (Báº¯t buá»™c náº¿u cÃ³)</DGia>

<TLCKhau>Tá»· lá»‡ % chiáº¿t kháº¥u</TLCKhau>

<STCKhau>Sá»‘ tiá»n chiáº¿t kháº¥u </STCKhau>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) - Báº¯t buá»™c trá»« trÆ°á»ng há»£p TChat = 4</ThTien>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<TThue>Tiá»n thuáº¿</TThue>

<TSThue>Tiá»n sau thuáº¿</TSThue>

<TTKhac>

<TTin>

<TTruong>TÃªn trÆ°á»ng</TTruong>

<KDLieu>Kiá»ƒu dá»¯ liá»‡u</KDLieu>

<DLieu>Dá»¯ liá»‡u</DLieu>

</TTin>

</TTKhac>

</HHDVu>

</DSHHDVu>

<TToan>

<THTTLTSuat> <!--sá»­ dá»¥ng hÃ³a Ä‘Æ¡n GTGT-->

<LTSuat>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT)</ThTien>

<TThue>Tiá»n thuáº¿ (Tiá»n thuáº¿ GTGT)</TThue>

</LTSuat>

</THTTLTSuat>

<TgTCThue>Tá»•ng tiá»n chÆ°a thuáº¿ (Tá»•ng cá»™ng thÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTCThue>

<TgTThue>Tá»•ng tiá»n thuáº¿ (Tá»•ng cá»™ng tiá»n thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTThue>

<TTCKTMai>Tá»•ng tiá»n chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i</TTCKTMai>

<TgTTTBSo>Tá»•ng tiá»n thanh toÃ¡n báº±ng sá»‘ \*</TgTTTBSo>

<TgTTTBChu>Tá»•ng tiá»n thanh toÃ¡n báº±ng chá»¯ \*</TgTTTBChu>

</TToan>

</NDHDon>

</ThayTheHD>

### Thay tháº¿ hÃ³a Ä‘Æ¡n theo fkey, pattern, serial truyá»n vÃ o

URL

string **ReplaceInvoiceAction**(string Account, string ACpass, string xmlInvData, string username, string pass, string fkey, string Attachfile, int? convert, string pattern = null, string serial = null).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n thay tháº¿ hÃ³a Ä‘Æ¡n

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cÅ© vÃ  hÃ³a Ä‘Æ¡n thay tháº¿
*   **fkey:** Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n thay tháº¿
*   **Convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ½ hiá»‡u
*   **AttachFile:** ÄÆ°á»ng dáº«n file biÃªn báº£n hoáº·c key Ä‘á»ƒ sinh biÃªn báº£n tá»± Ä‘á»™ng (=10: sinh biÃªn báº£n tá»± Ä‘á»™ng, =11: sinh vÃ  kÃ½ biÃªn báº£n tá»± Ä‘á»™ng, != 10 vÃ  !=11: ÄÆ°á»ng dáº«n file biÃªn báº£n)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cáº§n thay tháº¿ |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | CÃ³ lá»—i trong quÃ¡ trÃ¬nh thay tháº¿ hÃ³a Ä‘Æ¡n |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘Ã£ Ä‘Æ°á»£c thay tháº¿ rá»“i. KhÃ´ng thá»ƒ thay tháº¿ ná»¯a. |  |
| ERR:9 | Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘Æ°á»£c thay tháº¿ |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | Fkey cá»§a hÃ³a Ä‘Æ¡n má»›i Ä‘Ã£ tá»“n táº¡i trÃªn há»‡ thá»‘ng |
| ERR:14 | Lá»—i trong quÃ¡ trÃ¬nh thá»±c hiá»‡n cáº¥p sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:21 | TrÃ¹ng Fkey truyá»n vÃ o |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thay tháº¿PatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n thay tháº¿Serial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n thay tháº¿invNumber: sá»‘ hÃ³a Ä‘Æ¡n thay tháº¿ |  |

**Cáº¥u trÃºc cá»§a xmlInvData (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<ThayTheHD>

<key>Fkey cá»§a hÃ³a Ä‘Æ¡n \*</key>

<TTChung>

<MHSo>MÃ£ há»“ sÆ¡</MHSo>

<SBKe>Sá»‘ báº£ng kÃª (Sá»‘ cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</SBKe>

<NBKe>NgÃ y báº£ng kÃª (NgÃ y cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</NBKe>

<DVTTe>ÄÆ¡n vá»‹ tiá»n tá»‡ \*</DVTTe>

<TGia>Tá»· giÃ¡ (Báº¯t buá»™c (Trá»« trÆ°á»ng há»£p ÄÆ¡n vá»‹ tiá»n tá»‡ lÃ  VND))</TGia>

<HTTToan>HÃ¬nh thá»©c thanh toÃ¡n </HTTToan>

</TTChung>

<NDHDon>

<NBan>

<Ten>TÃªn </Ten>

<MST>MÃ£ sá»‘ thuáº¿ </MST>

<DChi>Äá»‹a chá»‰ </DChi>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<Fax>Fax</Fax>

<LDDNBo>Lá»‡nh Ä‘iá»u Ä‘á»™ng ná»™i bá»™ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</LDDNBo>

<HDSo>Há»£p Ä‘á»“ng sá»‘ (Há»£p Ä‘á»“ng váº­n chuyá»ƒn) (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HDSo>

<HVTNXHang>Há» vÃ  tÃªn ngÆ°á»i xuáº¥t hÃ ng (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HVTNXHang>

<TNVChuyen>TÃªn ngÆ°á»i váº­n chuyá»ƒn (phiáº¿u xuáº¥t kho)</TNVChuyen>

<PTVChuyen>PhÆ°Æ¡ng tiá»‡n váº­n chuyá»ƒn (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho)</PTVChuyen>

<HDKTSo>Há»£p Ä‘á»“ng kinh táº¿ sá»‘ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTSo>

<HDKTNgay>Há»£p Ä‘á»“ng kinh táº¿ ngÃ y (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTNgay>

</NBan>

<NMua>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ (Báº¯t buá»™c náº¿u cÃ³)</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<MKHang>MÃ£ khÃ¡ch hÃ ng</MKHang>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<HVTNMHang>Há» vÃ  tÃªn ngÆ°á»i mua hÃ ng</HVTNMHang>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<HVTNNHang>Há» vÃ  tÃªn ngÆ°á»i nháº­n hÃ ng (phiáº¿u xuáº¥t kho)</HVTNNHang>

</NMua>

<DSHHDVu>

<HHDVu>

<TChat>TÃ­nh cháº¥t \* (1-HÃ ng hÃ³a, dá»‹ch vá»¥; 2-Khuyáº¿n máº¡i; 3-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)</TChat>

<STT>Sá»‘ thá»© tá»±</STT>

<MHHDVu>MÃ£ hÃ ng hÃ³a, dá»‹ch vá»¥ (Báº¯t buá»™c náº¿u cÃ³)</MHHDVu>

<THHDVu>TÃªn hÃ ng hÃ³a, dá»‹ch vá»¥ \*</THHDVu>

<DVTinh>ÄÆ¡n vá»‹ tÃ­nh (Báº¯t buá»™c náº¿u cÃ³)</DVTinh>

<SLuong>Sá»‘ lÆ°á»£ng (Báº¯t buá»™c náº¿u cÃ³)</SLuong>

<DGia>ÄÆ¡n giÃ¡ (Báº¯t buá»™c náº¿u cÃ³)</DGia>

<TLCKhau>Tá»· lá»‡ % chiáº¿t kháº¥u</TLCKhau>

<STCKhau>Sá»‘ tiá»n chiáº¿t kháº¥u </STCKhau>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) - Báº¯t buá»™c trá»« trÆ°á»ng há»£p TChat = 4</ThTien>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<TThue>Tiá»n thuáº¿</TThue>

<TSThue>Tiá»n sau thuáº¿</TSThue>

<TTKhac>

<TTin>

<TTruong>TÃªn trÆ°á»ng</TTruong>

<KDLieu>Kiá»ƒu dá»¯ liá»‡u</KDLieu>

<DLieu>Dá»¯ liá»‡u</DLieu>

</TTin>

</TTKhac>

</HHDVu>

</DSHHDVu>

<TToan>

<THTTLTSuat> <!--sá»­ dá»¥ng hÃ³a Ä‘Æ¡n GTGT-->

<LTSuat>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT)</ThTien>

<TThue>Tiá»n thuáº¿ (Tiá»n thuáº¿ GTGT)</TThue>

</LTSuat>

</THTTLTSuat>

<TgTCThue>Tá»•ng tiá»n chÆ°a thuáº¿ (Tá»•ng cá»™ng thÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTCThue>

<TgTThue>Tá»•ng tiá»n thuáº¿ (Tá»•ng cá»™ng tiá»n thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTThue>

<TTCKTMai>Tá»•ng tiá»n chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i</TTCKTMai>

<TgTTTBSo>Tá»•ng tiá»n thanh toÃ¡n báº±ng sá»‘ \*</TgTTTBSo>

<TgTTTBChu>Tá»•ng tiá»n thanh toÃ¡n báº±ng chá»¯ \*</TgTTTBChu>

</TToan>

</NDHDon>

</ThayTheHD>

### Äiá»u chá»‰nh hÃ³a Ä‘Æ¡n theo fkey, pattern, serial truyá»n vÃ o

URL

string **AdjustInvoiceAction**(string Account, string ACpass, string xmlInvData, string username, string pass, string fkey, string AttachFile, int? convert, string pattern = null, string serial = null).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n cÅ© vÃ  hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh
*   **fkey:** Chuá»—i xÃ¡c Ä‘á»‹nh hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh
*   **Convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ½ hiá»‡u
*   **AttachFile:** ÄÆ°á»ng dáº«n file biÃªn báº£n hoáº·c key Ä‘á»ƒ sinh biÃªn báº£n tá»± Ä‘á»™ng (=10: sinh biÃªn báº£n tá»± Ä‘á»™ng, =11: sinh vÃ  kÃ½ biÃªn báº£n tá»± Ä‘á»™ng, != 10 vÃ  !=11: ÄÆ°á»ng dáº«n file biÃªn báº£n)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | HÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh khÃ´ng tá»“n táº¡i |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | HÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh Ä‘Ã£ bá»‹ thay tháº¿. KhÃ´ng thá»ƒ Ä‘iá»u chá»‰nh Ä‘Æ°á»£c ná»¯a. |  |
| ERR:9 | Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n khÃ´ng Ä‘Æ°á»£c Ä‘iá»u chá»‰nh |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | Fkey cá»§a hÃ³a Ä‘Æ¡n má»›i Ä‘Ã£ tá»“n táº¡i trÃªn há»‡ thá»‘ng |
| ERR:14 | Lá»—i trong quÃ¡ trÃ¬nh thá»±c hiá»‡n cáº¥p sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:21 | TrÃ¹ng Fkey truyá»n vÃ o |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch hÃ³a Ä‘Æ¡n tá»“n táº¡i ngÃ y hÃ³a Ä‘Æ¡n nhá» hÆ¡n ngÃ y hÃ³a Ä‘Æ¡n Ä‘Ã£ phÃ¡t hÃ nh |  |
| ERR:60 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (CÃ³ mÃ£ / KhÃ´ng mÃ£). |  |
| ERR:61 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (HD GTGT / HD bÃ¡n hÃ ng...). |  |
| ERR:62 | KhÃ´ng Ä‘Æ°á»£c dÃ¹ng khÃ´ng mÃ£ Ä‘Äƒng kÃ½ gá»­i báº£ng tá»•ng há»£p thay tháº¿, Ä‘iá»u chá»‰nh cÃ¡c hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i thÃ´ng tin chi tiáº¿t. |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhSerial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhinvNumber: sá»‘ hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh |  |

**Cáº¥u trÃºc cá»§a xmlInvData (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<DieuChinhHD>

<key>Fkey cá»§a hÃ³a Ä‘Æ¡n Ä‘á»ƒ phÃ¢n biá»‡t hÃ³a Ä‘Æ¡n xuáº¥t cho khÃ¡ch hÃ ng nÃ o \*</key>

<Type>Loáº¡i hÃ³a Ä‘Æ¡n chá»‰nh sá»­a(int-máº·c Ä‘á»‹nh láº¥y lÃ  2) 2-Äiá»u chá»‰nh tÄƒng, 3-Äiá»u chá»‰nh giáº£m, 4- HÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh thÃ´ng tin</Type>

<TTChung>

<MHSo>MÃ£ há»“ sÆ¡</MHSo>

<SBKe>Sá»‘ báº£ng kÃª (Sá»‘ cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</SBKe>

<NBKe>NgÃ y báº£ng kÃª (NgÃ y cá»§a báº£ng kÃª cÃ¡c loáº¡i hÃ ng hÃ³a, dá»‹ch vá»¥ Ä‘Ã£ bÃ¡n kÃ¨m theo hÃ³a Ä‘Æ¡n)</NBKe>

<DVTTe>ÄÆ¡n vá»‹ tiá»n tá»‡ \*</DVTTe>

<TGia>Tá»· giÃ¡ (Báº¯t buá»™c (Trá»« trÆ°á»ng há»£p ÄÆ¡n vá»‹ tiá»n tá»‡ lÃ  VND))</TGia>

<HTTToan>HÃ¬nh thá»©c thanh toÃ¡n </HTTToan>

</TTChung>

<NDHDon>

<NBan>

<Ten>TÃªn </Ten>

<MST>MÃ£ sá»‘ thuáº¿ </MST>

<DChi>Äá»‹a chá»‰ </DChi>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<Fax>Fax</Fax>

<LDDNBo>Lá»‡nh Ä‘iá»u Ä‘á»™ng ná»™i bá»™ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</LDDNBo>

<HDSo>Há»£p Ä‘á»“ng sá»‘ (Há»£p Ä‘á»“ng váº­n chuyá»ƒn) (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HDSo>

<HVTNXHang>Há» vÃ  tÃªn ngÆ°á»i xuáº¥t hÃ ng (phiáº¿u xuáº¥t kho váº­n chuyá»ƒn ná»™i bá»™)</HVTNXHang>

<TNVChuyen>TÃªn ngÆ°á»i váº­n chuyá»ƒn (phiáº¿u xuáº¥t kho)</TNVChuyen>

<PTVChuyen>PhÆ°Æ¡ng tiá»‡n váº­n chuyá»ƒn (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho)</PTVChuyen>

<HDKTSo>Há»£p Ä‘á»“ng kinh táº¿ sá»‘ (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTSo>

<HDKTNgay>Há»£p Ä‘á»“ng kinh táº¿ ngÃ y (Báº¯t buá»™c Ä‘á»‘i vá»›i phiáº¿u xuáº¥t kho gá»­i bÃ¡n Ä‘áº¡i lÃ½)</HDKTNgay>

</NBan>

<NMua>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ (Báº¯t buá»™c náº¿u cÃ³)</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<MKHang>MÃ£ khÃ¡ch hÃ ng</MKHang>

<SDThoai>Sá»‘ Ä‘iá»‡n thoáº¡i</SDThoai>

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

<HVTNMHang>Há» vÃ  tÃªn ngÆ°á»i mua hÃ ng</HVTNMHang>

<STKNHang>Sá»‘ tÃ i khoáº£n ngÃ¢n hÃ ng</STKNHang>

<TNHang>TÃªn ngÃ¢n hÃ ng</TNHang>

<HVTNNHang>Há» vÃ  tÃªn ngÆ°á»i nháº­n hÃ ng (phiáº¿u xuáº¥t kho)</HVTNNHang>

</NMua>

<DSHHDVu>

<HHDVu>

<TChat>TÃ­nh cháº¥t \* (1-HÃ ng hÃ³a, dá»‹ch vá»¥; 2-Khuyáº¿n máº¡i; 3-Chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i (trong trÆ°á»ng há»£p muá»‘n thá»ƒ hiá»‡n thÃ´ng tin chiáº¿t kháº¥u theo dÃ²ng); 4-Ghi chÃº/diá»…n giáº£i)</TChat>

<STT>Sá»‘ thá»© tá»±</STT>

<MHHDVu>MÃ£ hÃ ng hÃ³a, dá»‹ch vá»¥ (Báº¯t buá»™c náº¿u cÃ³)</MHHDVu>

<THHDVu>TÃªn hÃ ng hÃ³a, dá»‹ch vá»¥ \*</THHDVu>

<DVTinh>ÄÆ¡n vá»‹ tÃ­nh (Báº¯t buá»™c náº¿u cÃ³)</DVTinh>

<SLuong>Sá»‘ lÆ°á»£ng (Báº¯t buá»™c náº¿u cÃ³)</SLuong>

<DGia>ÄÆ¡n giÃ¡ (Báº¯t buá»™c náº¿u cÃ³)</DGia>

<TLCKhau>Tá»· lá»‡ % chiáº¿t kháº¥u</TLCKhau>

<STCKhau>Sá»‘ tiá»n chiáº¿t kháº¥u </STCKhau>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) - Báº¯t buá»™c trá»« trÆ°á»ng há»£p TChat = 4</ThTien>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<TThue>Tiá»n thuáº¿</TThue>

<TSThue>Tiá»n sau thuáº¿</TSThue>

<TTKhac>

<TTin>

<TTruong>TÃªn trÆ°á»ng</TTruong>

<KDLieu>Kiá»ƒu dá»¯ liá»‡u</KDLieu>

<DLieu>Dá»¯ liá»‡u</DLieu>

</TTin>

</TTKhac>

</HHDVu>

</DSHHDVu>

<TToan>

<THTTLTSuat><!--sá»­ dá»¥ng hÃ³a Ä‘Æ¡n GTGT-->

<LTSuat>

<TSuat>Thuáº¿ suáº¥t (Thuáº¿ suáº¥t thuáº¿ GTGT)</TSuat>

<ThTien>ThÃ nh tiá»n (ThÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT)</ThTien>

<TThue>Tiá»n thuáº¿ (Tiá»n thuáº¿ GTGT)</TThue>

</LTSuat>

</THTTLTSuat>

<TgTCThue>Tá»•ng tiá»n chÆ°a thuáº¿ (Tá»•ng cá»™ng thÃ nh tiá»n chÆ°a cÃ³ thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTCThue>

<TgTThue>Tá»•ng tiá»n thuáº¿ (Tá»•ng cá»™ng tiá»n thuáº¿ GTGT) (Báº¯t buá»™c vá»›i hÃ³a Ä‘Æ¡n GTGT)</TgTThue>

<TTCKTMai>Tá»•ng tiá»n chiáº¿t kháº¥u thÆ°Æ¡ng máº¡i</TTCKTMai>

<TgTTTBSo>Tá»•ng tiá»n thanh toÃ¡n báº±ng sá»‘ \*</TgTTTBSo>

<TgTTTBChu>Tá»•ng tiá»n thanh toÃ¡n báº±ng chá»¯ \*</TgTTTBChu>

</TToan>

</NDHDon>

</DieuChinhHD>

### Äiá»u chá»‰nh hÃ³a Ä‘Æ¡n cÅ© (hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trÃªn há»‡ thá»‘ng)

URL

string **AdjustWithoutInv** (string **account**, string **accPass**, string **invXml**, string **userName**, string **userPass**, string **oldPattern**, string **oldSerial**, decimal **oldNo**, string **strOldArisingDate**, int? **convert**, string **pattern** = null, string **serial** = null, int **relatedInvType** = 3, string **feature** = â€œâ€).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÅ© (hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trÃªn há»‡ thá»‘ng)

HTTP METHOD

POST

REQUEST BODY

*   **userName / userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **account / accPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **invXml**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh
*   **oldPattern, oldSerial, oldNo:** CÃ¡c thÃ´ng sá»‘ máº«u sá»‘, kÃ½ hiá»‡u, sá»‘ hÃ³a Ä‘Æ¡n cá»§a hÃ³a Ä‘Æ¡n cÅ© (hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trÃªn há»‡ thá»‘ng).
*   **strOldArisingDate:** NgÃ y hÃ³a Ä‘Æ¡n cá»§a hÃ³a Ä‘Æ¡n cÅ©, Ä‘á»‹nh dáº¡ng dd/MM/yyyy (Báº¯t buá»™c pháº£i nháº­p Ä‘Ãºng vÃ  Ä‘á»§ 2 chá»¯ sá»‘ cho ngÃ y thÃ¡ng, 4 chá»¯ sá»‘ cho nÄƒm. VÃ­ dá»¥ 01/12/2021)
*   **convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **pattern**: Máº«u sá»‘
*   **serial**: KÃ½ hiá»‡u
*   **relatedInvType:** Loáº¡i hÃ³a Ä‘Æ¡n liÃªn quan, máº·c Ä‘á»‹nh lÃ  3 (CÃ¡c loáº¡i hÃ³a Ä‘Æ¡n theo Nghá»‹ Ä‘á»‹nh sá»‘ 51/2010/NÄ-CP vÃ  Nghá»‹ Ä‘á»‹nh sá»‘ 04/2014/NÄ-CP (Trá»« hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ mÃ£ xÃ¡c thá»±c cá»§a cÆ¡ quan thuáº¿ theo Quyáº¿t Ä‘á»‹nh sá»‘ 1209/QÄ-BTC vÃ  Quyáº¿t Ä‘á»‹nh sá»‘ 2660/QÄ-BTC)))
*   **feature:** trÆ°á»ng sáº½ dÃ¹ng trong tÆ°Æ¡ng lai, hiá»‡n táº¡i khÃ´ng cÃ³ Ã½ ngÄ©a, cÃ³ thá»ƒ nháº­p hoáº·c khÃ´ng

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | HÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh khÃ´ng tá»“n táº¡i |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n hoáº·c lá»—i há»‡ thá»‘ng |  |
| ERR:6 | Dáº£i hÃ³a Ä‘Æ¡n cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:12 | NgÃ y hÃ³a Ä‘Æ¡n cÅ© khÃ´ng há»£p lá»‡ |  |
| ERR:14 | Lá»—i trong quÃ¡ trÃ¬nh thá»±c hiá»‡n cáº¥p sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:60 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (CÃ³ mÃ£ / KhÃ´ng mÃ£). |  |
| ERR:61 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (HD GTGT / HD bÃ¡n hÃ ng...). |  |
| ERR:62 | KhÃ´ng Ä‘Æ°á»£c dÃ¹ng khÃ´ng mÃ£ Ä‘Äƒng kÃ½ gá»­i báº£ng tá»•ng há»£p thay tháº¿, Ä‘iá»u chá»‰nh cÃ¡c hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i thÃ´ng tin chi tiáº¿t. |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK: 1/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhSerial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhinvNumber: sá»‘ hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh |  |

**Cáº¥u trÃºc cá»§a xmlInvData (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<DieuChinhHD>

<key/>

<Type>2</Type>

<InvoiceNo/>

<TTChung>

<MHSo/>

<SBKe/>

<NBKe/>

<DVTTe>VND</DVTTe>

<TGia>1</TGia>

<HTTToan>TM</HTTToan>

</TTChung>

<NDHDon>

<NBan>

<MST>2222222222-945</MST>

<DChi>Ä‘á»‹a chá»‰ ngÆ°á»i bÃ¡n</DChi>

<LDDNBo/>

<HDSo/>

<HVTNXHang/>

<TNVChuyen/>

<PTVChuyen/>

<HDKTSo/>

<HDKTNgay/>

</NBan>

<NMua>

<Ten>txt TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng test bá»‹ lá»—i</Ten>

<MST>8412221813</MST>

<DChi>Äá»‹a chá»‰ cá»§a bÃªn mua lÃ´ 2A LÃ ng Quá»‘c Táº¿ ThÄƒng Long, phÆ°á»ng Dá»‹ch Vá»ng Háº­u, Quáº­n Cáº§u Giáº¥y, HÃ  Ná»™i</DChi>

<MKHang>KH1706</MKHang>

<SDThoai>0916996622</SDThoai>

<DCTDTu>thuy3t.hust@gmail.com,thuyexpress@gmail.com</DCTDTu>

<HVTNMHang>txt test Há» tÃªn ngÆ°á»i mua hÃ ng</HVTNMHang>

<STKNHang>stk0192019201</STKNHang>

<TNHang>NgÃ¢n hÃ ng ngÆ°á»i mua: NgÃ¢n hÃ ng TMCP ÄÃ´ng Nam Ã</TNHang>

</NMua>

<DSHHDVu>

<HHDVu>

<TChat>1</TChat>

<STT>1</STT>

<MHHDVu/>

<THHDVu>sáº£n pháº©m 1</THHDVu>

<DVTinh>Ä‘Æ¡n vá»‹ 1</DVTinh>

<SLuong>21</SLuong>

<DGia>21</DGia>

<TLCKhau>0</TLCKhau>

<STCKhau>0</STCKhau>

<TSuat>KHAC:11%</TSuat>

<ThTien>441</ThTien>

<TTKhac>

<TTin>

<TTruong>Amount</TTruong>

<KDLieu>numeric</KDLieu>

<DLieu>489.51</DLieu>

</TTin>

<TTin>

<TTruong>VATAmount</TTruong>

<KDLieu>numeric</KDLieu>

<DLieu>48.51</DLieu>

</TTin>

</TTKhac>

</HHDVu>

</DSHHDVu>

<TToan>

<THTTLTSuat>

<LTSuat>

<TSuat>KHAC:11%</TSuat>

<TThue>49</TThue>

<ThTien>441</ThTien>

</LTSuat>

</THTTLTSuat>

<TgTCThue>441</TgTCThue>

<TgTThue>49</TgTThue>

<TTCKTMai>0</TTCKTMai>

<TgTTTBSo>490</TgTTTBSo>

<TgTTTBChu>Bá»‘n trÄƒm chÃ­n mÆ°Æ¡i Ä‘á»“ng</TgTTTBChu>

</TToan>

</NDHDon>

</DieuChinhHD>

### Thay tháº¿ hÃ³a Ä‘Æ¡n cÅ© (hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trÃªn há»‡ thá»‘ng)

URL

string **ReplaceWithoutInv** (string **account**, string **accPass**, string **invXml**, string **userName**, string **userPass**, string **oldPattern**, string **oldSerial**, decimal **oldNo**, string **strOldArisingDate**, int? **convert**, string **pattern** = null, string **serial** = null, int **relatedInvType** = 3, string **feature** = â€œâ€).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n thay tháº¿ hÃ³a Ä‘Æ¡n cÅ© (hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trÃªn há»‡ thá»‘ng)

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **account / accPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **invXml**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n thay tháº¿
*   **oldPattern, oldSerial, oldNo:** CÃ¡c thÃ´ng sá»‘ máº«u sá»‘, kÃ½ hiá»‡u, sá»‘ hÃ³a Ä‘Æ¡n cá»§a hÃ³a Ä‘Æ¡n cÅ© (hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trÃªn há»‡ thá»‘ng).
*   **strOldArisingDate:** NgÃ y hÃ³a Ä‘Æ¡n cá»§a hÃ³a Ä‘Æ¡n cÅ©, Ä‘á»‹nh dáº¡ng dd/MM/yyyy (Báº¯t buá»™c pháº£i nháº­p Ä‘Ãºng vÃ  Ä‘á»§ 2 chá»¯ sá»‘ cho ngÃ y thÃ¡ng, 4 chá»¯ sá»‘ cho nÄƒm. VÃ­ dá»¥ 01/12/2021)
*   **convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode).
*   **pattern**: Máº«u sá»‘
*   **serial**: KÃ½ hiá»‡u
*   **relatedInvType:** Loáº¡i hÃ³a Ä‘Æ¡n liÃªn quan, máº·c Ä‘á»‹nh lÃ  3 (CÃ¡c loáº¡i hÃ³a Ä‘Æ¡n theo Nghá»‹ Ä‘á»‹nh sá»‘ 51/2010/NÄ-CP vÃ  Nghá»‹ Ä‘á»‹nh sá»‘ 04/2014/NÄ-CP (Trá»« hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ mÃ£ xÃ¡c thá»±c cá»§a cÆ¡ quan thuáº¿ theo Quyáº¿t Ä‘á»‹nh sá»‘ 1209/QÄ-BTC vÃ  Quyáº¿t Ä‘á»‹nh sá»‘ 2660/QÄ-BTC))
*   **feature:** trÆ°á»ng sáº½ dÃ¹ng trong tÆ°Æ¡ng lai, hiá»‡n táº¡i khÃ´ng cÃ³ Ã½ ngÄ©a, cÃ³ thá»ƒ nháº­p hoáº·c khÃ´ng

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cáº§n thay tháº¿ |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | CÃ³ lá»—i trong quÃ¡ trÃ¬nh thay tháº¿ hÃ³a Ä‘Æ¡n |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:12 | NgÃ y hÃ³a Ä‘Æ¡n cÅ© khÃ´ng há»£p lá»‡ |  |
| ERR:14 | Lá»—i trong quÃ¡ trÃ¬nh thá»±c hiá»‡n cáº¥p sá»‘ hÃ³a Ä‘Æ¡n |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i hÃ³a Ä‘Æ¡n Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:60 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (CÃ³ mÃ£ / KhÃ´ng mÃ£). |  |
| ERR:61 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (HD GTGT / HD bÃ¡n hÃ ng...). |  |
| ERR:62 | KhÃ´ng Ä‘Æ°á»£c dÃ¹ng khÃ´ng mÃ£ Ä‘Äƒng kÃ½ gá»­i báº£ng tá»•ng há»£p thay tháº¿, Ä‘iá»u chá»‰nh cÃ¡c hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i thÃ´ng tin chi tiáº¿t. |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK: 1/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thay tháº¿PatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n thay tháº¿Serial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n thay tháº¿invNumber: sá»‘ hÃ³a Ä‘Æ¡n thay tháº¿ |  |

**Cáº¥u trÃºc cá»§a xmlInvData (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<ThayTheHD>

<key/>

<InvoiceNo/>

<TTChung>

<MHSo/>

<SBKe/>

<NBKe/>

<DVTTe>VND</DVTTe>

<TGia>1</TGia>

<HTTToan>TM</HTTToan>

</TTChung>

<NDHDon>

<NBan>

<MST>2222222222-945</MST>

<DChi>Ä‘á»‹a chá»‰ ngÆ°á»i bÃ¡n</DChi>

<LDDNBo/>

<HDSo/>

<HVTNXHang/>

<TNVChuyen/>

<PTVChuyen/>

<HDKTSo/>

<HDKTNgay/>

</NBan>

<NMua>

<Ten>txt TÃªn Ä‘Æ¡n vá»‹ mua hÃ ng test bá»‹ lá»—i</Ten>

<MST>8412221813</MST>

<DChi>Äá»‹a chá»‰ cá»§a bÃªn mua lÃ´ 2A LÃ ng Quá»‘c Táº¿ ThÄƒng Long, phÆ°á»ng Dá»‹ch Vá»ng Háº­u, Quáº­n Cáº§u Giáº¥y, HÃ  Ná»™i</DChi>

<MKHang>KH1706</MKHang>

<SDThoai>0916996622</SDThoai>

<DCTDTu>thuy3t.hust@gmail.com,thuyexpress@gmail.com</DCTDTu>

<HVTNMHang>txt test Há» tÃªn ngÆ°á»i mua hÃ ng</HVTNMHang>

<STKNHang>stk0192019201</STKNHang>

<TNHang>NgÃ¢n hÃ ng ngÆ°á»i mua: NgÃ¢n hÃ ng TMCP ÄÃ´ng Nam Ã</TNHang>

</NMua>

<DSHHDVu>

<HHDVu>

<TChat>1</TChat>

<STT>1</STT>

<MHHDVu/>

<THHDVu>sáº£n pháº©m 1</THHDVu>

<DVTinh>Ä‘Æ¡n vá»‹ 1</DVTinh>

<SLuong>21</SLuong>

<DGia>21</DGia>

<TLCKhau>0</TLCKhau>

<STCKhau>0</STCKhau>

<TSuat>KHAC:11%</TSuat>

<ThTien>441</ThTien>

<TTKhac>

<TTin>

<TTruong>Amount</TTruong>

<KDLieu>numeric</KDLieu>

<DLieu>489.51</DLieu>

</TTin>

<TTin>

<TTruong>VATAmount</TTruong>

<KDLieu>numeric</KDLieu>

<DLieu>48.51</DLieu>

</TTin>

</TTKhac>

</HHDVu>

</DSHHDVu>

<TToan>

<THTTLTSuat>

<LTSuat>

<TSuat>KHAC:11%</TSuat>

<TThue>49</TThue>

<ThTien>441</ThTien>

</LTSuat>

</THTTLTSuat>

<TgTCThue>441</TgTCThue>

<TgTThue>49</TgTThue>

<TTCKTMai>0</TTCKTMai>

<TgTTTBSo>490</TgTTTBSo>

<TgTTTBChu>Bá»‘n trÄƒm chÃ­n mÆ°Æ¡i Ä‘á»“ng</TgTTTBChu>

</TToan>

</NDHDon>

</ThayTheHD>

### Äiá»u chá»‰nh hÃ³a Ä‘Æ¡n khÃ´ng phÃ¡t sinh hÃ³a Ä‘Æ¡n má»›i

URL

string **AdjustInvoiceNote** (string **account**, string **accPass**, string **xmlInvData**, string **userName**, string **userPass**, string **fkey**, string **attachFile**, string **pattern**)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n Ä‘iá»u chá»‰nh thÃ´ng tin hÃ³a Ä‘Æ¡n mÃ  khÃ´ng phÃ¡t sinh hÃ³a Ä‘Æ¡n má»›i

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **account / accPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **fkey**: fkey cá»§a hÃ³a Ä‘Æ¡n
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh
*   **attachFile:** Ä‘Æ°á»ng dáº«n tÃ i liá»‡u Ä‘Ã­nh kÃ¨m
*   **pattern**: Máº«u sá»‘ hÃ³a Ä‘Æ¡n

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:61 | Fkey hÃ³a Ä‘Æ¡n bá»‹ lá»—i cÃ³ giÃ¡ trá»‹ rá»—ng hoáº·c null |  |
| ERR:4 | KhÃ´ng láº¥y Ä‘Æ°á»£c cÃ´ng ty |  |
| ERR:62 | KhÃ´ng láº¥y Ä‘Æ°á»£c ná»™i dung Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n trong xml |  |
| ERR:5 | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh. Exception, kiá»ƒm tra log |  |
| ERR:20 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:25 | KhÃ´ng táº¡o Ä‘Æ°á»£c invoice service |  |
| ERR:56 | Tráº¡ng thÃ¡i hÃ³a Ä‘Æ¡n khÃ´ng há»£p lá»‡ |  |
| ERR:55 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i pattern hÃ³a Ä‘Æ¡n cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i hÃ³a Ä‘Æ¡n háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK: 1/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thay tháº¿PatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n thay tháº¿Serial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n thay tháº¿invNumber: sá»‘ hÃ³a Ä‘Æ¡n thay tháº¿ |  |

**Cáº¥u trÃºc cá»§a xmlInvData (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<DieuChinhHD>

<Description>Ná»™i dung Ä‘iá»u chá»‰nh\*</Description>

</DieuChinhHD>

### láº¥y giÃ¡ trá»‹ Hash cho Ä‘iá»u chá»‰nh thay tháº¿ hÃ³a Ä‘Æ¡n cÅ© token Smart CA(BÆ°á»›c 1)

Url

string **getHashInvSmartCAToken**(string account, string accPass, string invXml, string userName, string userPass, string oldPattern, string oldSerial, decimal oldNo, string strOldArisingDate, int typeSign, int? convert, string pattern = null, string serial = null, int relatedInvType = 3)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n Ä‘iá»u chá»‰nh, thay tháº¿ hÃ³a Ä‘Æ¡n cÅ© (hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trÃªn há»‡ thá»‘ng) sá»­ dá»¥ng token.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh gá»­i thÃ´ng Ä‘iá»‡p.
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **invXml**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh, thay tháº¿
*   **oldPattern, oldSerial, oldNo:** CÃ¡c thÃ´ng sá»‘ máº«u sá»‘, kÃ½ hiá»‡u, sá»‘ hÃ³a Ä‘Æ¡n cá»§a hÃ³a Ä‘Æ¡n cÅ© (hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trÃªn há»‡ thá»‘ng).
*   **strOldArisingDate:** NgÃ y hÃ³a Ä‘Æ¡n cá»§a hÃ³a Ä‘Æ¡n cÅ©, Ä‘á»‹nh dáº¡ng dd/MM/yyyy (Báº¯t buá»™c pháº£i nháº­p Ä‘Ãºng vÃ  Ä‘á»§ 2 chá»¯ sá»‘ cho ngÃ y thÃ¡ng, 4 chá»¯ sá»‘ cho nÄƒm. VÃ­ dá»¥ 01/12/2021)
*   **convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **pattern**: Máº«u sá»‘
*   **serial**: KÃ½ hiá»‡u
*   **typeSign**: phÃ¡t hÃ nh má»›i: 0, thay tháº¿ = 1, Ä‘iá»u chá»‰nh tÄƒng = 2, Ä‘iá»u chá»‰nh giáº£m = 3, Ä‘iá»u chá»‰nh thÃ´ng tin = 4
*   **relatedInvType:** Loáº¡i hÃ³a Ä‘Æ¡n liÃªn quan, máº·c Ä‘á»‹nh lÃ  3 (CÃ¡c loáº¡i hÃ³a Ä‘Æ¡n theo Nghá»‹ Ä‘á»‹nh sá»‘ 51/2010/NÄ-CP vÃ  Nghá»‹ Ä‘á»‹nh sá»‘ 04/2014/NÄ-CP (Trá»« hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ mÃ£ xÃ¡c thá»±c cá»§a cÆ¡ quan thuáº¿ theo Quyáº¿t Ä‘á»‹nh sá»‘ 1209/QÄ-BTC vÃ  Quyáº¿t Ä‘á»‹nh sá»‘ 2660/QÄ-BTC)))

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty |  |
| ERR:30 | Táº¡o má»›i hÃ³a Ä‘Æ¡n cÃ³ lá»—i |  |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n hoáº·c lá»—i há»‡ thá»‘ng |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:12 | NgÃ y hÃ³a Ä‘Æ¡n cÅ© khÃ´ng há»£p lá»‡ |  |
| ERR:20 | Tham sá»‘ pattern and serial khÃ´ng há»£p lá»‡ |  |
| ERR:21 | TÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | KhÃ´ng tÃ¬m tháº¥y keystores |  |
| ERR:28 | Chá»©ng thÆ° chÆ°a cÃ³ trong há»‡ thá»‘ng |  |
| ERR:24 | chá»©ng thÆ° khÃ´ng dÃ¹ng |  |
| ERR:27 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:60 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (CÃ³ mÃ£ / KhÃ´ng mÃ£). |  |
| ERR:61 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (HD GTGT / HD bÃ¡n hÃ ng...). |  |
| ERR:62 | KhÃ´ng Ä‘Æ°á»£c dÃ¹ng khÃ´ng mÃ£ Ä‘Äƒng kÃ½ gá»­i báº£ng tá»•ng há»£p thay tháº¿, Ä‘iá»u chá»‰nh cÃ¡c hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i thÃ´ng tin chi tiáº¿t. |  |
| Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh | Chuá»—i tráº£ vá» |  |

*   **chuá»—i xml**

<Invoices>

<Inv>

<key>70633DCB-F356-4269-A957-569016AE0017</key>

<idInv>20045793</idInv>

<hashValue>GhdasQwB5B8Y0/lSRHM0K8OXMZo=</hashValue>

<pattern>1/002</pattern>

<serial>C22TWA</serial>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <key>: fkey

tag <idInv>: id hÃ³a Ä‘Æ¡n trÃªn há»‡ thá»‘ng vnpt

tag <hashValue>: chuá»—i hash

tag <pattern>: máº«u sá»‘

tag <serial>: kÃ½ hiá»‡u

### Gá»­i Ä‘iá»u chá»‰nh, thay tháº¿ hÃ³a Ä‘Æ¡n cÅ© sá»­ dá»¥ng token smart CA (BÆ°á»›c 2)

URL

string **AdjustReplaceWithoutInvSmartCA (**string Account, string ACpass, string xmlInvData, string username, string password,int type, string pattern = "", string serial = ""**)**

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p gá»­i thÃ´ng tin Ä‘iá»u chá»‰nh, thay tháº¿ hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÅ© ( khÃ´ng tá»“n táº¡i trong há»‡ thá»‘ng) vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng token, sau khi thá»±c hiá»‡n gá»i hÃ m Láº¥y giÃ¡ trá»‹ Hash á»Ÿ bÆ°á»›c 1 (**3.2.11**)

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh gá»­i thÃ´ng Ä‘iá»‡p.
*   **username/password**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml dá»¯ liá»‡u kÃ½ hash.
*   **Type:** phÃ¡t hÃ nh má»›i: 0, thay tháº¿ = 1, Ä‘iá»u chá»‰nh tÄƒng = 2, Ä‘iá»u chá»‰nh giáº£m = 3, Ä‘iá»u chá»‰nh thÃ´ng tin = 4
*   **pattern**: Máº«u sá»‘
*   **serial**: KÃ½ hiá»‡u

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y dáº£i hÃ³a Ä‘Æ¡n | KhÃ´ng tÃ¬m tháº¥y dáº£i hÃ³a Ä‘Æ¡n hoáº·c tÃ i khoáº£n phÃ¡t hÃ nh khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n trÃªn dáº£i hÃ³a Ä‘Æ¡n truyá»n lÃªn. |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh hoáº·c thay tháº¿ chÆ°a phÃ¡t hÃ nh hoáº·c Ä‘Ã£ Ä‘iá»u chá»‰nh khÃ´ng Ä‘Æ°á»£c thay tháº¿ |  |
| ERR:2 | KhÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cáº§n thay tháº¿ vÃ  Ä‘iá»u chá»‰nh |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i hÃ³a Ä‘Æ¡n cÃ³ lá»—i |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh,thay tháº¿Serial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh,thay tháº¿invNumber: sá»‘ hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh,thay tháº¿ |  |

**Cáº¥u trÃºc chuá»—i xmlData truyá»n lÃªn:**

<Invoices>

<SerialCert>54010101BFD227F36296CA2414AC334E</SerialCert>

<PatternOld>1/003</PatternOld>

<SerialOld>C22TWS</SerialOld>

<NoOlde>00000001</NoOlde>

<Inv>

<key>25904521-A4FB-4A43-BEF8-8455D64A0429</key>

<idInv>20043083</idInv>

<signValue>EKkR0sNI67yHpuvLKWFdVg1jg4Rkm3gSZZAj0m+t/T0O/RGpg2wjItTxBLmZgoUU08szexYTzZQX+x37IExQTtd27XE5D0APA08jjXe/MG+uVRSFoPxf5H9pgwcwlIWVusZhTpLZrTkEhr2fEg+haW9fKuizKI+mur6NlndpJWE=</signValue>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <SerialCert>: serial chá»©ng thÆ° cá»§a cÃ´ng ty

*   *   *   tag < PatternOld >: Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh,thay tháº¿ cÅ©

tag< SerialOld >: hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh,thay tháº¿ cÅ©

tag< NoOlde> : sá»‘ hÃ³a Ä‘Æ¡n cÅ©

tag <idInv>: id hÃ³a Ä‘Æ¡n trÃªn há»‡ thá»‘ng vnpt

tag <signValue>: chuá»—i kÃ½

tag <key>: fkey

### Láº¥y giÃ¡ trá»‹ Hash cho Ä‘iá»u chá»‰nh thay tháº¿ khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cÅ© vá»›i Smart CA(BÆ°á»›c 1)

Url

string **GetHashWithOutInvSmartCA**(string Account, string ACpass, string xmlInvData, string username, string password, string serialCert, int type, string oldPattern, string oldSerial, decimal oldNo, string strOldArisingDate, int oldInvType, string pattern = "", string serial = "", int convert = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n Ä‘iá»u chá»‰nh, thay tháº¿ hÃ³a Ä‘Æ¡n cÅ© (hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trÃªn há»‡ thá»‘ng) sá»­ dá»¥ng token.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh gá»­i thÃ´ng Ä‘iá»‡p.
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh, thay tháº¿
*   **oldPattern, oldSerial, oldNo:** CÃ¡c thÃ´ng sá»‘ máº«u sá»‘, kÃ½ hiá»‡u, sá»‘ hÃ³a Ä‘Æ¡n cá»§a hÃ³a Ä‘Æ¡n cÅ© (hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trÃªn há»‡ thá»‘ng).
*   **strOldArisingDate:** NgÃ y hÃ³a Ä‘Æ¡n cá»§a hÃ³a Ä‘Æ¡n cÅ©, Ä‘á»‹nh dáº¡ng dd/MM/yyyy (Báº¯t buá»™c pháº£i nháº­p Ä‘Ãºng vÃ  Ä‘á»§ 2 chá»¯ sá»‘ cho ngÃ y thÃ¡ng, 4 chá»¯ sá»‘ cho nÄƒm. VÃ­ dá»¥ 01/12/2021)
*   **oldInvType**: loáº¡i hÃ³a Ä‘Æ¡n cÅ© theo quy Ä‘á»‹nh (CÃ¡c loáº¡i hÃ³a Ä‘Æ¡n theo Nghá»‹ Ä‘á»‹nh sá»‘ 51/2010/NÄ-CP vÃ  Nghá»‹ Ä‘á»‹nh sá»‘ 04/2014/NÄ-CP (Trá»« hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ mÃ£ xÃ¡c thá»±c cá»§a cÆ¡ quan thuáº¿ theo Quyáº¿t Ä‘á»‹nh sá»‘ 1209/QÄ-BTC vÃ  Quyáº¿t Ä‘á»‹nh sá»‘ 2660/QÄ-BTC)
*   **convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **pattern**: Máº«u sá»‘
*   **serial**: KÃ½ hiá»‡u
*   **type**: phÃ¡t hÃ nh má»›i: 0, thay tháº¿ = 1, Ä‘iá»u chá»‰nh tÄƒng = 2, Ä‘iá»u chá»‰nh giáº£m = 3, Ä‘iá»u chá»‰nh thÃ´ng tin = 4

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty |  |
| ERR:30 | Táº¡o má»›i hÃ³a Ä‘Æ¡n cÃ³ lá»—i |  |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n hoáº·c lá»—i há»‡ thá»‘ng |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:12 | NgÃ y hÃ³a Ä‘Æ¡n cÅ© khÃ´ng há»£p lá»‡ |  |
| ERR:20 | Tham sá»‘ pattern and serial khÃ´ng há»£p lá»‡ |  |
| ERR:21 | TÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | KhÃ´ng tÃ¬m tháº¥y keystores |  |
| ERR:28 | Chá»©ng thÆ° chÆ°a cÃ³ trong há»‡ thá»‘ng |  |
| ERR:24 | chá»©ng thÆ° khÃ´ng dÃ¹ng |  |
| ERR:27 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh | Chuá»—i tráº£ vá» |  |

*   **chuá»—i xml**

<Invoices>

<Inv>

<key>70633DCB-F356-4269-A957-569016AE0017</key>

<idInv>20045793</idInv>

<hashValue>GhdasQwB5B8Y0/lSRHM0K8OXMZo=</hashValue>

<pattern>1/002</pattern>

<serial>C22TWA</serial>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <key>: fkey

tag <idInv>: id hÃ³a Ä‘Æ¡n trÃªn há»‡ thá»‘ng vnpt

tag <hashValue>: chuá»—i hash

tag <pattern>: máº«u sá»‘

tag <serial>: kÃ½ hiá»‡u

### Gá»­i Ä‘iá»u chá»‰nh, thay tháº¿ khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cÅ© vá»›i smart CA (BÆ°á»›c 2)

URL

string AdjustReplaceWithOutInvSmartCA **(**string Account, string ACpass, string xmlInvData, string username, string password,int type, string pattern = "", string serial = ""**)**

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p gá»­i thÃ´ng tin Ä‘iá»u chá»‰nh, thay tháº¿ hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trong há»‡ thá»‘ng vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng token, sau khi thá»±c hiá»‡n gá»i hÃ m Láº¥y giÃ¡ trá»‹ Hash á»Ÿ bÆ°á»›c 1 (**3.2.13**)

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh gá»­i thÃ´ng Ä‘iá»‡p.
*   **username/password**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml dá»¯ liá»‡u kÃ½ hash.
*   **Type:** phÃ¡t hÃ nh má»›i: 0, thay tháº¿ = 1, Ä‘iá»u chá»‰nh tÄƒng = 2, Ä‘iá»u chá»‰nh giáº£m = 3, Ä‘iá»u chá»‰nh thÃ´ng tin = 4
*   **pattern**: Máº«u sá»‘
*   **serial**: KÃ½ hiá»‡u

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y dáº£i hÃ³a Ä‘Æ¡n | KhÃ´ng tÃ¬m tháº¥y dáº£i hÃ³a Ä‘Æ¡n hoáº·c tÃ i khoáº£n phÃ¡t hÃ nh khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n trÃªn dáº£i hÃ³a Ä‘Æ¡n truyá»n lÃªn. |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh hoáº·c thay tháº¿ chÆ°a phÃ¡t hÃ nh hoáº·c Ä‘Ã£ Ä‘iá»u chá»‰nh khÃ´ng Ä‘Æ°á»£c thay tháº¿ |  |
| ERR:2 | KhÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cáº§n thay tháº¿ vÃ  Ä‘iá»u chá»‰nh |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i hÃ³a Ä‘Æ¡n cÃ³ lá»—i |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh,thay tháº¿Serial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh,thay tháº¿invNumber: sá»‘ hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh,thay tháº¿ |  |

**Cáº¥u trÃºc chuá»—i xmlData truyá»n lÃªn:**

<Invoices>

<SerialCert>54010101BFD227F36296CA2414AC334E</SerialCert>

<PatternOld>1/003</PatternOld>

<SerialOld>C22TWS</SerialOld>

<NoOlde>00000001</NoOlde>

<Inv>

<key>25904521-A4FB-4A43-BEF8-8455D64A0429</key>

<idInv>20043083</idInv>

<signValue>EKkR0sNI67yHpuvLKWFdVg1jg4Rkm3gSZZAj0m+t/T0O/RGpg2wjItTxBLmZgoUU08szexYTzZQX+x37IExQTtd27XE5D0APA08jjXe/MG+uVRSFoPxf5H9pgwcwlIWVusZhTpLZrTkEhr2fEg+haW9fKuizKI+mur6NlndpJWE=</signValue>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <SerialCert>: serial chá»©ng thÆ° cá»§a cÃ´ng ty

*   *   *   tag < PatternOld >: Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh,thay tháº¿ cÅ©

tag< SerialOld >: hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh,thay tháº¿ cÅ©

tag< NoOlde> : sá»‘ hÃ³a Ä‘Æ¡n cÅ©

tag <idInv>: id hÃ³a Ä‘Æ¡n trÃªn há»‡ thá»‘ng vnpt

tag <signValue>: chuá»—i kÃ½

tag <key>: fkey

### Láº¥y giÃ¡ trá»‹ Hash cho Ä‘iá»u chá»‰nh thay tháº¿ khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cÅ© vá»›i Token(BÆ°á»›c 1)

Url

string **GetHashWithOutInvToken**(string Account, string ACpass, string xmlInvData, string username, string password, string serialCert, int type, string oldPattern, string oldSerial, decimal oldNo, string strOldArisingDate, int oldInvType, string pattern = "", string serial = "", int convert = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n Ä‘iá»u chá»‰nh, thay tháº¿ hÃ³a Ä‘Æ¡n cÅ© (hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trÃªn há»‡ thá»‘ng) sá»­ dá»¥ng token.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh gá»­i thÃ´ng Ä‘iá»‡p.
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: String XML dá»¯ liá»‡u hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh, thay tháº¿
*   **oldPattern, oldSerial, oldNo:** CÃ¡c thÃ´ng sá»‘ máº«u sá»‘, kÃ½ hiá»‡u, sá»‘ hÃ³a Ä‘Æ¡n cá»§a hÃ³a Ä‘Æ¡n cÅ© (hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trÃªn há»‡ thá»‘ng).
*   **strOldArisingDate:** NgÃ y hÃ³a Ä‘Æ¡n cá»§a hÃ³a Ä‘Æ¡n cÅ©, Ä‘á»‹nh dáº¡ng dd/MM/yyyy (Báº¯t buá»™c pháº£i nháº­p Ä‘Ãºng vÃ  Ä‘á»§ 2 chá»¯ sá»‘ cho ngÃ y thÃ¡ng, 4 chá»¯ sá»‘ cho nÄƒm. VÃ­ dá»¥ 01/12/2021)
*   **oldInvType**: loáº¡i hÃ³a Ä‘Æ¡n cÅ© theo quy Ä‘á»‹nh (CÃ¡c loáº¡i hÃ³a Ä‘Æ¡n theo Nghá»‹ Ä‘á»‹nh sá»‘ 51/2010/NÄ-CP vÃ  Nghá»‹ Ä‘á»‹nh sá»‘ 04/2014/NÄ-CP (Trá»« hÃ³a Ä‘Æ¡n Ä‘iá»‡n tá»­ cÃ³ mÃ£ xÃ¡c thá»±c cá»§a cÆ¡ quan thuáº¿ theo Quyáº¿t Ä‘á»‹nh sá»‘ 1209/QÄ-BTC vÃ  Quyáº¿t Ä‘á»‹nh sá»‘ 2660/QÄ-BTC)
*   **convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **pattern**: Máº«u sá»‘
*   **serial**: KÃ½ hiá»‡u
*   **type**: phÃ¡t hÃ nh má»›i: 0, thay tháº¿ = 1, Ä‘iá»u chá»‰nh tÄƒng = 2, Ä‘iá»u chá»‰nh giáº£m = 3, Ä‘iá»u chá»‰nh thÃ´ng tin = 4

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty |  |
| ERR:30 | Táº¡o má»›i hÃ³a Ä‘Æ¡n cÃ³ lá»—i |  |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c hÃ³a Ä‘Æ¡n hoáº·c lá»—i há»‡ thá»‘ng |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:12 | NgÃ y hÃ³a Ä‘Æ¡n cÅ© khÃ´ng há»£p lá»‡ |  |
| ERR:20 | Tham sá»‘ pattern and serial khÃ´ng há»£p lá»‡ |  |
| ERR:21 | TÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | KhÃ´ng tÃ¬m tháº¥y keystores |  |
| ERR:28 | Chá»©ng thÆ° chÆ°a cÃ³ trong há»‡ thá»‘ng |  |
| ERR:24 | chá»©ng thÆ° khÃ´ng dÃ¹ng |  |
| ERR:27 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh | Chuá»—i tráº£ vá» |  |

*   **chuá»—i xml**

<Invoices>

<Inv>

<key>70633DCB-F356-4269-A957-569016AE0017</key>

<idInv>20045793</idInv>

<hashValue>GhdasQwB5B8Y0/lSRHM0K8OXMZo=</hashValue>

<pattern>1/002</pattern>

<serial>C22TWA</serial>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <key>: fkey

tag <idInv>: id hÃ³a Ä‘Æ¡n trÃªn há»‡ thá»‘ng vnpt

tag <hashValue>: chuá»—i hash

tag <pattern>: máº«u sá»‘

tag <serial>: kÃ½ hiá»‡u

### Gá»­i Ä‘iá»u chá»‰nh, thay tháº¿ khÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cÅ© vá»›i Token (BÆ°á»›c 2)

URL

string **AdjustReplaceWithOutInvToken (**string Account, string ACpass, string xmlInvData, string username, string password,int type, string pattern = "", string serial = ""**)**

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p gá»­i thÃ´ng tin Ä‘iá»u chá»‰nh, thay tháº¿ hÃ³a Ä‘Æ¡n khÃ´ng tá»“n táº¡i trong há»‡ thá»‘ng vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng token, sau khi thá»±c hiá»‡n gá»i hÃ m Láº¥y giÃ¡ trá»‹ Hash á»Ÿ bÆ°á»›c 1 (**3.2.15**)

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh gá»­i thÃ´ng Ä‘iá»‡p.
*   **username/password**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml dá»¯ liá»‡u kÃ½ hash.
*   **Type:** phÃ¡t hÃ nh má»›i: 0, thay tháº¿ = 1, Ä‘iá»u chá»‰nh tÄƒng = 2, Ä‘iá»u chá»‰nh giáº£m = 3, Ä‘iá»u chá»‰nh thÃ´ng tin = 4
*   **pattern**: Máº«u sá»‘
*   **serial**: KÃ½ hiá»‡u

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y dáº£i hÃ³a Ä‘Æ¡n | KhÃ´ng tÃ¬m tháº¥y dáº£i hÃ³a Ä‘Æ¡n hoáº·c tÃ i khoáº£n phÃ¡t hÃ nh khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n trÃªn dáº£i hÃ³a Ä‘Æ¡n truyá»n lÃªn. |
| ERR:8 | HÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh hoáº·c thay tháº¿ chÆ°a phÃ¡t hÃ nh hoáº·c Ä‘Ã£ Ä‘iá»u chá»‰nh khÃ´ng Ä‘Æ°á»£c thay tháº¿ |  |
| ERR:2 | KhÃ´ng tá»“n táº¡i hÃ³a Ä‘Æ¡n cáº§n thay tháº¿ vÃ  Ä‘iá»u chá»‰nh |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i hÃ³a Ä‘Æ¡n cÃ³ lá»—i |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh,thay tháº¿Serial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh,thay tháº¿invNumber: sá»‘ hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh,thay tháº¿ |  |

**Cáº¥u trÃºc chuá»—i xmlData truyá»n lÃªn:**

<Invoices>

<SerialCert>54010101BFD227F36296CA2414AC334E</SerialCert>

<PatternOld>1/003</PatternOld>

<SerialOld>C22TWS</SerialOld>

<NoOlde>00000001</NoOlde>

<Inv>

<key>25904521-A4FB-4A43-BEF8-8455D64A0429</key>

<idInv>20043083</idInv>

<signValue>EKkR0sNI67yHpuvLKWFdVg1jg4Rkm3gSZZAj0m+t/T0O/RGpg2wjItTxBLmZgoUU08szexYTzZQX+x37IExQTtd27XE5D0APA08jjXe/MG+uVRSFoPxf5H9pgwcwlIWVusZhTpLZrTkEhr2fEg+haW9fKuizKI+mur6NlndpJWE=</signValue>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <SerialCert>: serial chá»©ng thÆ° cá»§a cÃ´ng ty

*   *   *   tag < PatternOld >: Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh,thay tháº¿ cÅ©

tag< SerialOld >: hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh,thay tháº¿ cÅ©

tag< NoOlde> : sá»‘ hÃ³a Ä‘Æ¡n cÅ©

tag <idInv>: id hÃ³a Ä‘Æ¡n trÃªn há»‡ thá»‘ng vnpt

tag <signValue>: chuá»—i kÃ½

tag <key>: fkey

### Thay tháº¿, Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n sá»­ dá»¥ng SmartCa (bÆ°á»›c 2)

URL

string **AdjustReplaceInvSmartCA** (string Account, string ACpass, string xmlInvData, string username, string password, int type, string pattern = "", string serial = "")

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p thay tháº¿ , Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cho cÃ¡c khÃ¡ch hÃ ng sá»­ dá»¥ng SmartCA, sau khi thá»±c hiá»‡n gá»i hÃ m Láº¥y giÃ¡ trá»‹ Hash á»Ÿ bÆ°á»›c 1 (**3.1.25**)

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml thÃ´ng tin hÃ³a Ä‘Æ¡n ( theo mÃ´ táº£)
*   **type**: thay tháº¿ = 1, Ä‘iá»u chá»‰nh tÄƒng = 2, Ä‘iá»u chá»‰nh giáº£m = 3, Ä‘iá»u chá»‰nh thÃ´ng tin = 4
*   **pattern**: máº«u sá»‘ hÃ³a Ä‘Æ¡n
*   **serial**: kÃ½ hiá»‡u hÃ³a Ä‘Æ¡n

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y dáº£i hÃ³a Ä‘Æ¡n | KhÃ´ng tÃ¬m tháº¥y dáº£i hÃ³a Ä‘Æ¡n hoáº·c tÃ i khoáº£n phÃ¡t hÃ nh khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n trÃªn dáº£i hÃ³a Ä‘Æ¡n truyá»n lÃªn. |
| ERR:6 | KhÃ´ng cÃ²n Ä‘á»§ sá»‘ lÆ°á»£ng hÃ³a Ä‘Æ¡n Ä‘á»ƒ phÃ¡t hÃ nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ hÃ³a Ä‘Æ¡n vÆ°á»£t quÃ¡ max cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i hÃ³a Ä‘Æ¡n cÃ³ lá»—i |  |
| ERR:35 | CÃ´ng ty Ä‘Äƒng kÃ½ DK01 cáº£ cÃ³ mÃ£, khÃ´ng mÃ£. Táº¡o cáº£ kÃ½ hiá»‡u cáº£ 2 dáº£i cÃ³ mÃ£ vÃ  khÃ´ng mÃ£ sáº½ yÃªu cáº§u báº¯t buá»™c truyá»n pattern, serial |  |
| ERR:60 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (CÃ³ mÃ£ / KhÃ´ng mÃ£). |  |
| ERR:61 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh hÃ³a Ä‘Æ¡n cÃ¹ng loáº¡i (HD GTGT / HD bÃ¡n hÃ ng...). |  |
| ERR:62 | KhÃ´ng Ä‘Æ°á»£c dÃ¹ng khÃ´ng mÃ£ Ä‘Äƒng kÃ½ gá»­i báº£ng tá»•ng há»£p thay tháº¿, Ä‘iá»u chá»‰nh cÃ¡c hÃ³a Ä‘Æ¡n khÃ´ng mÃ£ gá»­i thÃ´ng tin chi tiáº¿t. |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhSerial ğŸ¡ª serial cá»§a hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nhinvNumber: sá»‘ hÃ³a Ä‘Æ¡n Ä‘iá»u chá»‰nh |  |

**Cáº¥u trÃºc xmlInvData**:

<Invoices>

<SerialCert> **serial chá»©ng thÆ° cá»§a cÃ´ng ty** </SerialCert>

<PatternOld> **máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n bá»‹ Ä‘iá»u chá»‰nh, thay tháº¿** </PatternOld>

<SerialOld> **kÃ½ hiá»‡u cá»§a hÃ³a Ä‘Æ¡n bá»‹ Ä‘iá»u chá»‰nh, thay tháº¿** </SerialOld>

<NoOlde> **sá»‘ hÃ³a Ä‘Æ¡n cá»§a hÃ³a Ä‘Æ¡n bá»‹ Ä‘iá»u chá»‰nh, thay tháº¿** </NoOlde>

<Inv>

<key> **fkey hÃ³a Ä‘Æ¡n má»›i** </key>

<idInv> **id hÃ³a Ä‘Æ¡n má»›i trÃªn há»‡ thá»‘ng vnpt** </idInv>

<signValue> **chuá»—i kÃ½** </signValue>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <SerialCert>: serial chá»©ng thÆ° cá»§a cÃ´ng ty

tag <PatternOld>: máº«u sá»‘ cá»§a hÃ³a Ä‘Æ¡n bá»‹ Ä‘iá»u chá»‰nh, thay tháº¿

tag <SerialOld>: kÃ½ hiá»‡u cá»§a hÃ³a Ä‘Æ¡n bá»‹ Ä‘iá»u chá»‰nh, thay tháº¿

tag <NoOlde>: sá»‘ hÃ³a Ä‘Æ¡n cá»§a hÃ³a Ä‘Æ¡n bá»‹ Ä‘iá»u chá»‰nh, thay tháº¿

tag <key>: fkey hÃ³a Ä‘Æ¡n má»›i

tag <idInv>: id hÃ³a Ä‘Æ¡n má»›i trÃªn há»‡ thá»‘ng vnpt

tag <signValue>: giÃ¡ trá»‹ kÃ½ sá»‘ cá»§a hÃ³a Ä‘Æ¡n má»›i

### Láº¥y thÃ´ng tin config

URL

string **getCompanyConfig** (string Account, string ACpass, string configKey)

DESCRIPTION

ÄÃ¢y lÃ  web service cho kiá»ƒm tra xem Ä‘Ã£ cÃ³ config chÆ°a

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh hÃ³a Ä‘Æ¡n
*   **configKey**: key config

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:4 | Key null |  |
| ERR:3 | MÃ£ thÃ´ng Ä‘iá»‡p khÃ´ng thuá»™c cÃ´ng ty tra cá»©u |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| OK: stringBase64 |  |  |

# Danh sÃ¡ch cÃ¡c hÃ m tÃ­ch chá»©ng tá»« kháº¥u trá»« thu nháº­p cÃ¡ nhÃ¢n

## NhÃ³m cÃ¡c hÃ m webservice táº¡o láº­p vÃ  phÃ¡t hÃ ng chá»©ng tá»«(PublishSerive)

### PhÃ¡t hÃ nh chá»©ng tá»« (HSM)

Url

String **ImportAndPublishCTT** (string Account, string ACpass, string xmlInvData, string username, string password, string pattern = "", string serial = "", int convert = 0).

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh chá»©ng tá»« vá»›i dá»¯ liá»‡u XML cá»§a khÃ¡ch hÃ ng, tá»‘i Ä‘a cho 5000 chá»©ng tá»«.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass :** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh chá»©ng tá»«
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice ( tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: Chuá»—i XML dá»¯ liá»‡u chá»©ng tá»« ( theo cáº¥u trÃºc mÃ´ táº£)
*   **pattern:** Máº«u sá»‘ chá»©ng tá»«
*   **serial:** KÃ½ hiá»‡u chá»©ng tá»«
*   **convert:** Máº·c Ä‘á»‹nh lÃ  0 (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode / 1- Cáº§n convert tá»« TCVN3 sang Unicode)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n thÃªm khÃ¡ch hÃ ng |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh | Há»‡ thá»‘ng sáº½ tráº£ vá» lá»—i náº¿u 1 chá»©ng tá»« trong chuá»—i XML Ä‘áº§u vÃ o khÃ´ng há»£p lá»‡, cáº£ lÃ´ chá»©ng tá»« sáº½ khÃ´ng Ä‘Æ°á»£c phÃ¡t hÃ nh. |
| ERR:7 | ThÃ´ng tin vá» Username/pass khÃ´ng há»£p lá»‡ |  |
| ERR:20 | Pattern vÃ  Serial khÃ´ng phÃ¹ há»£p, hoáº·c khÃ´ng tá»“n táº¡i chá»©ng tá»« Ä‘Ã£ Ä‘Äƒng kÃ­ cÃ³ sá»­ dá»¥ng Pattern vÃ  Serial truyá»n vÃ o. |  |
| ERR:5 | KhÃ´ng phÃ¡t hÃ nh Ä‘Æ°á»£c chá»©ng tá»« | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh, kiá»ƒm tra exception tráº£ vá» (DB roll back) |
| ERR:10 | LÃ´ cÃ³ sá»‘ chá»©ng tá»« vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng cho phÃ©p |  |
| ERR:6 | Dáº£i chá»©ng tá»« khÃ´ng Ä‘á»§ sá»‘ chá»©ng tá»« cho lÃ´ phÃ¡t hÃ nh |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | 1 hoáº·c nhiá»u chá»©ng tá»« trong lÃ´ chá»©ng tá»« cÃ³ Fkey trÃ¹ng vá»›i Fkey cá»§a chá»©ng tá»« Ä‘Ã£ phÃ¡t hÃ nh |
| ERR:21 | Lá»—i trÃ¹ng sá»‘ chá»©ng tá»« |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch chá»©ng tá»« tá»“n táº¡i ngÃ y chá»©ng tá»« nhá» hÆ¡n ngÃ y chá»©ng tá»« Ä‘Ã£ phÃ¡t hÃ nh |  |
| OK:pattern;serial1-key1_num1,key2_num12, â€¦)(VÃ­ dá»¥:OK:CTT56/001;AA/2022-key1_1,key2_2,key3_3,key4_4,key5_5) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh chá»©ng tá»« thÃ nh cÃ´ngPattern ğŸ¡ª Máº«u sá»‘ cá»§a cÃ¡c chá»©ng tá»« Ä‘Ã£ phÃ¡t hÃ nhSerial1 ğŸ¡ª serial cá»§a dÃ£y cÃ¡c chá»©ng tá»« phÃ¡t hÃ nhnum1, num2â€¦ lÃ  cÃ¡c sá»‘ chá»©ng tá»«key1,key2â€¦ lÃ  khÃ³a Ä‘á»ƒ nháº­n biáº¿t chá»©ng tá»« phÃ¡t hÃ nh cho khÃ¡ch hÃ ng nÃ o(láº¥y tá»« Ä‘áº§u vÃ o) | CÃ¡c chá»©ng tá»« cÃ³ serial khÃ¡c nhau phÃ¢n cÃ¡ch bá»Ÿi dáº¥u â€œ;â€CÃ¡c sá»‘ chá»©ng tá»« phÃ¢n cÃ¡ch bá»Ÿi â€œ,â€ |

**Äá»‹nh dáº¡ng chuá»—i xml Ä‘áº§u vÃ o (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<DSCTu>

< CTu>

<key>Fkey cua chug tu</key>

<DLCTu>

<TTChung>

<NLap>ngÃ y láº­p chá»©ng tá»« </NLap>

</TTChung>

<NDCTu>

<NNT>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ (Báº¯t buá»™c náº¿u cÃ³)</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<QTich>Quá»‘c tá»‹ch(VN)</QTich>

<CNCTru>MÃ£ cÃ¡ nhÃ¢n cÆ° trÃº</CNCTru>

< CMND >chá»©ng minh thÆ° hoáº·c cÄƒn cÆ°á»›c cÃ´ng dÃ¢n</ CMND >

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

< SDThoai >sá»‘ Ä‘iá»‡n thoáº¡i </ SDThoai >

< NCCMND >ngÃ y cáº¥p cmnd hoáº·c cccd</ NCCMND >

</NNT>

<TTNCNKTru>

<KTNhap>Khoáº£n thu nháº­p</KTNhap>

<TThang>Thá»i Ä‘iá»ƒm tráº£ thu nháº­p(tá»« thÃ¡ng)</ TThang>

<DThang>Thá»i Ä‘iá»ƒm tráº£ thu nháº­p(Äáº¿n thÃ¡ng)</ DThang>

<Nam> Thá»i Ä‘iá»ƒm tráº£ thu nháº­p(nÄƒm)</ Nam>

< TTNCThue> Â Tá»•ng thu nháº­p chÆ°a tÃ­nh thuáº¿</ TTNCThue >

< TTNTThue>tá»•ng thu nháº­p tÃ­nh thuáº¿</ TTNTThue >

< SThue>Tá»•ng thu nháº­p tÃ­nh thuáº¿\*</ SThue >

<BHiem>Báº£o hiá»ƒm</BHiem>

</TTNCNKTru>

</ NDCTu>

</DLCTu>

</CTu>

</DSCTu>

### Láº¥y giÃ¡ trá»‹ Hash cho phÃ¡t hÃ nh chá»©ng tá»« sá»­ dá»¥ng token(bÆ°á»›c 1)

string **getHashCTTWithToken** (string Account, string ACpass, string xmlInvData, string username, string password, string serialCert, int type, string invToken, string pattern = "", string serial = "", int convert = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh chá»©ng tá»« vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng token, thá»±c hiá»‡n truyá»n dá»¯ liá»‡u chá»©ng tá»« vÃ  láº¥y giÃ¡ trá»‹ hash value Ä‘á»ƒ kÃ½ sá»‘ báº±ng token á»Ÿ client.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh chá»©ng tá»«
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml chá»©ng tá»« (theo máº«u mÃ´ táº£ kÃ¨m theo)
*   **serialCert**: Serial cá»§a chá»©ng thÆ° sá»‘ cÃ´ng ty Ä‘Ã£ Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng
*   **type**: phÃ¡t hÃ nh má»›i: 0, thay tháº¿ = 1, Ä‘iá»u chá»‰nh tÄƒng = 2, Ä‘iá»u chá»‰nh giáº£m = 3, Ä‘iá»u chá»‰nh thÃ´ng tin = 4
*   **invToken**: chuá»—i token chá»©ng tá»« = máº«u sá»‘;kÃ½ hiá»‡u;sá»‘ chá»©ng tá»« (vÃ­ dá»¥: CTT56/001;AA/2022;1) â€“ chá»‰ cáº§n khi thay tháº¿/ Ä‘iá»u chá»‰nh; phÃ¡t hÃ nh thÃ¬ Ä‘á»ƒ trá»‘ng
*   **pattern**: máº«u sá»‘ chá»©ng tá»«
*   **serial**: kÃ½ hiá»‡u chá»©ng tá»«

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | Dáº£i chá»©ng tá»« háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  Serial khÃ´ng phÃ¹ há»£p |  |
| ERR:6 | KhÃ´ng cÃ²n Ä‘á»§ sá»‘ lÆ°á»£ng chá»©ng tá»« Ä‘á»ƒ phÃ¡t hÃ nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ chá»©ng tá»« vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng tá»‘i Ä‘a cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i chá»©ng tá»« cÃ³ lá»—i |  |
| ERR:35 | CÃ´ng ty Ä‘Äƒng kÃ½ DK01 cáº£ cÃ³ mÃ£, khÃ´ng mÃ£. Táº¡o cáº£ kÃ½ hiá»‡u cáº£ 2 dáº£i cÃ³ mÃ£ vÃ  khÃ´ng mÃ£ sáº½ yÃªu cáº§u báº¯t buá»™c truyá»n pattern, serial |  |
| Chuá»—i xml tráº£ vá» | Chuá»—i tráº£ vá» |  |

Cáº¥u trÃºc chuá»—i XML tráº£ vá»:

<Invoices>

<Inv>

<key>**123**</key>

<idInv>**128668**</idInv>

<hashValue>**rKdYgeYc7CYLOhjfNFDZ8nBaWjA=**</hashValue>

<pattern>**CTT56/001**</pattern>

<serial>**AA/2022**</serial>

</Inv>

<Inv>

<key>**456**</key>

<idInv>**128923**</idInv>

<hashValue>**2p60p82YQhqjMHG9t/toIaLfENQ=**</hashValue>

<pattern>**CTT56/001**</pattern>

<serial>**AA/2022**</serial>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <key>: fkey

tag <idInv>: id chá»©ng tá»« trÃªn há»‡ thá»‘ng vnpt

tag <hashValue>: chuá»—i hash

tag <pattern>: máº«u sá»‘

tag <serial>: kÃ½ hiá»‡u

### Gá»­i phÃ¡t hÃ nh chá»©ng tá»« sá»­ dá»¥ng token(bÆ°á»›c 2)

URL

string **publishCTTWithToken** (string Account, string ACpass, string xmlInvData, string username, string password, string pattern = "", string serial = "").

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh chá»©ng tá»« vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng token, sau khi thá»±c hiá»‡n gá»i hÃ m Láº¥y giÃ¡ trá»‹ Hash á»Ÿ bÆ°á»›c 1 (**4.1.2**)

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh chá»©ng tá»«
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml dá»¯ liá»‡u kÃ½ hash hÃ³a
*   **pattern**: máº«u sá»‘ chá»©ng tá»«
*   **serial**: kÃ½ hiá»‡u chá»©ng tá»«
*   **convert:** Máº·c Ä‘á»‹nh lÃ  0 (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode / 1- Cáº§n convert tá»« TCVN3 sang Unicode)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh chá»©ng tá»« |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y dáº£i chá»©ng tá»« | KhÃ´ng tÃ¬m tháº¥y dáº£i chá»©ng tá»« hoáº·c tÃ i khoáº£n phÃ¡t hÃ nh khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh chá»©ng tá»« trÃªn dáº£i chá»©ng tá»« truyá»n lÃªn. |
| ERR:6 | KhÃ´ng cÃ²n Ä‘á»§ sá»‘ lÆ°á»£ng chá»©ng tá»« Ä‘á»ƒ phÃ¡t hÃ nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ chá»©ng tá»« vÆ°á»£t quÃ¡ max cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i chá»©ng tá»« cÃ³ lá»—i |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK: CTT56/001;AA/2022;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh chá»©ng tá»« thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a chá»©ng tá»« Ä‘iá»u chá»‰nhSerial ğŸ¡ª serial cá»§a chá»©ng tá»« Ä‘iá»u chá»‰nhinvNumber: sá»‘ chá»©ng tá»« Ä‘iá»u chá»‰nh |  |

**Cáº¥u trÃºc chuá»—i xmlData truyá»n lÃªn:**

<Invoices>

<SerialCert>540171AA56FDB2F8476BBD781251C83D</SerialCert>

<Inv>

<key>789</key>

<idInv>10</idInv>

<signValue>J2k7CsSN9Gb6PmsHD9yDJS1/j3s=</signValue>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <SerialCert>: serial chá»©ng thÆ° cá»§a cÃ´ng ty

tag <key>: fkey

tag <idInv>: id chá»©ng tá»« trÃªn há»‡ thá»‘ng vnpt

tag <signValue>: chuá»—i kÃ½

### Láº¥y giÃ¡ trá»‹ Hash cho phÃ¡t hÃ nh chá»©ng tá»« sá»­ dá»¥ng smartCA(bÆ°á»›c 1)

URL

string **GetHashCTTSmartCA** (string Account, string ACpass, string xmlInvData, string username, string password, string serialCert, int type, string invToken, string pattern = "", string serial = "", int convert = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh chá»©ng tá»« vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng smartCA, thá»±c hiá»‡n truyá»n dá»¯ liá»‡u chá»©ng tá»« vÃ  láº¥y giÃ¡ trá»‹ hash value Ä‘á»ƒ kÃ½ sá»‘ báº±ng smartCA á»Ÿ client.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh chá»©ng tá»«
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml chá»©ng tá»« (theo máº«u mÃ´ táº£ kÃ¨m theo)
*   **serialCert**: Serial cá»§a chá»©ng thÆ° sá»‘ cÃ´ng ty Ä‘Ã£ Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng
*   **type**: phÃ¡t hÃ nh má»›i: 0, thay tháº¿ = 1, Ä‘iá»u chá»‰nh tÄƒng = 2, Ä‘iá»u chá»‰nh giáº£m = 3, Ä‘iá»u chá»‰nh thÃ´ng tin = 4
*   **invToken**: chuá»—i token chá»©ng tá»« = máº«u sá»‘;kÃ½ hiá»‡u;sá»‘ chá»©ng tá»« (vÃ­ dá»¥: CTT56/001;AA/2022;1) â€“ chá»‰ cáº§n khi thay tháº¿/ Ä‘iá»u chá»‰nh; phÃ¡t hÃ nh thÃ¬ Ä‘á»ƒ trá»‘ng
*   **pattern**: máº«u sá»‘ chá»©ng tá»«
*   **serial**: kÃ½ hiá»‡u chá»©ng tá»«

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | Dáº£i chá»©ng tá»« háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  Serial khÃ´ng phÃ¹ há»£p |  |
| ERR:6 | KhÃ´ng cÃ²n Ä‘á»§ sá»‘ lÆ°á»£ng chá»©ng tá»« Ä‘á»ƒ phÃ¡t hÃ nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ chá»©ng tá»« vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng tá»‘i Ä‘a cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i chá»©ng tá»« cÃ³ lá»—i |  |
| ERR:35 | CÃ´ng ty Ä‘Äƒng kÃ½ DK01 cáº£ cÃ³ mÃ£, khÃ´ng mÃ£. Táº¡o cáº£ kÃ½ hiá»‡u cáº£ 2 dáº£i cÃ³ mÃ£ vÃ  khÃ´ng mÃ£ sáº½ yÃªu cáº§u báº¯t buá»™c truyá»n pattern, serial |  |
| Chuá»—i xml tráº£ vá» | Chuá»—i tráº£ vá» |  |

Cáº¥u trÃºc chuá»—i XML tráº£ vá»:

<Invoices>

<Inv>

<key>**123**</key>

<idInv>**128668**</idInv>

<hashValue>**rKdYgeYc7CYLOhjfNFDZ8nBaWjA=**</hashValue>

<pattern>**CTT56/001**</pattern>

<serial>**AA/2022**</serial>

</Inv>

<Inv>

<key>**456**</key>

<idInv>**128923**</idInv>

<hashValue>**2p60p82YQhqjMHG9t/toIaLfENQ=**</hashValue>

<pattern>**CTT56/001**</pattern>

<serial>**AA/2022**</serial>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <key>: fkey

tag <idInv>: id chá»©ng tá»« trÃªn há»‡ thá»‘ng vnpt

tag <hashValue>: chuá»—i hash

tag <pattern>: máº«u sá»‘

tag <serial>: kÃ½ hiá»‡u

### Gá»­i phÃ¡t hÃ nh chá»©ng tá»« sá»­ dá»¥ng smartCA(bÆ°á»›c 2)

URL

string **PublishCTTSmartCA** (string Account, string ACpass, string xmlInvData, string username, string password, string pattern = "", string serial = "").

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh chá»©ng tá»« vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng SmartCA, sau khi thá»±c hiá»‡n gá»i hÃ m Láº¥y giÃ¡ trá»‹ Hash á»Ÿ bÆ°á»›c 1 (**4.1.4**)

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh chá»©ng tá»«
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml dá»¯ liá»‡u kÃ½ hash hÃ³a
*   **pattern**: máº«u sá»‘ chá»©ng tá»«
*   **serial**: kÃ½ hiá»‡u chá»©ng tá»«
*   **convert:** Máº·c Ä‘á»‹nh lÃ  0 (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode / 1- Cáº§n convert tá»« TCVN3 sang Unicode)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh chá»©ng tá»« |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y dáº£i chá»©ng tá»« | KhÃ´ng tÃ¬m tháº¥y dáº£i chá»©ng tá»« hoáº·c tÃ i khoáº£n phÃ¡t hÃ nh khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh chá»©ng tá»« trÃªn dáº£i chá»©ng tá»« truyá»n lÃªn. |
| ERR:6 | KhÃ´ng cÃ²n Ä‘á»§ sá»‘ lÆ°á»£ng chá»©ng tá»« Ä‘á»ƒ phÃ¡t hÃ nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ chá»©ng tá»« vÆ°á»£t quÃ¡ max cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i chá»©ng tá»« cÃ³ lá»—i |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK: CTT56/001;AA/2022;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh chá»©ng tá»« thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a chá»©ng tá»« Ä‘iá»u chá»‰nhSerial ğŸ¡ª serial cá»§a chá»©ng tá»« Ä‘iá»u chá»‰nhinvNumber: sá»‘ chá»©ng tá»« Ä‘iá»u chá»‰nh |  |

**Cáº¥u trÃºc chuá»—i xmlData truyá»n lÃªn:**

<Invoices>

<SerialCert>540171AA56FDB2F8476BBD781251C83D</SerialCert>

<Inv>

<key>789</key>

<idInv>10</idInv>

<signValue>J2k7CsSN9Gb6PmsHD9yDJS1/j3s=</signValue>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <SerialCert>: serial chá»©ng thÆ° cá»§a cÃ´ng ty

tag <key>: fkey

tag <idInv>: id chá»©ng tá»« trÃªn há»‡ thá»‘ng vnpt

tag <signValue>: chuá»—i kÃ½

## NhÃ³m cÃ¡c hÃ m webserive phÃ¡t hÃ nh thay tháº¿ chá»©ng tá»«(BusinessService)

### Thay tháº¿ chá»©ng tá»« (HSM)

URL

string **ReplaceCTTAction** (string Account, string ACpass, string xmlInvData, string username, string pass, string fkey, string Attachfile, int? convert, string pattern = null, string serial = null).

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n thay tháº¿ chá»©ng tá»«

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh chá»©ng tá»«
*   **xmlInvData**: String XML dá»¯ liá»‡u chá»©ng tá»« cÅ© vÃ  chá»©ng tá»« thay tháº¿
*   **fkey:** Chuá»—i xÃ¡c Ä‘á»‹nh chá»©ng tá»« cáº§n thay tháº¿
*   **Convert**: Máº·c Ä‘á»‹nh lÃ  0, (0 â€“ KhÃ´ng cáº§n convert tá»« TCVN3 sang Unicode. 1- Cáº§n convert tá»« TCVN3 sang Unicode)
*   **Pattern**: Máº«u sá»‘
*   **Serial**: KÃ½ hiá»‡u
*   **AttachFile:** ÄÆ°á»ng dáº«n file biÃªn báº£n hoáº·c key Ä‘á»ƒ sinh biÃªn báº£n tá»± Ä‘á»™ng (=10: sinh biÃªn báº£n tá»± Ä‘á»™ng, =11: sinh vÃ  kÃ½ biÃªn báº£n tá»± Ä‘á»™ng, != 10 vÃ  !=11: ÄÆ°á»ng dáº«n file biÃªn báº£n)

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tá»“n táº¡i chá»©ng tá»« cáº§n thay tháº¿ |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:5 | CÃ³ lá»—i trong quÃ¡ trÃ¬nh thay tháº¿ chá»©ng tá»« |  |
| ERR:6 | Dáº£i chá»©ng tá»« cÅ© Ä‘Ã£ háº¿t |  |
| ERR:7 | User name khÃ´ng phÃ¹ há»£p, khÃ´ng tÃ¬m tháº¥y company tÆ°Æ¡ng á»©ng cho user. |  |
| ERR:8 | Chá»©ng tá»« Ä‘Ã£ Ä‘Æ°á»£c thay tháº¿ rá»“i. KhÃ´ng thá»ƒ thay tháº¿ ná»¯a. |  |
| ERR:9 | Tráº¡ng thÃ¡i chá»©ng tá»« khÃ´ng Ä‘Æ°á»£c thay tháº¿ |  |
| ERR:13 | Lá»—i trÃ¹ng fkey | Fkey cá»§a chá»©ng tá»« má»›i Ä‘Ã£ tá»“n táº¡i trÃªn há»‡ thá»‘ng |
| ERR:14 | Lá»—i trong quÃ¡ trÃ¬nh thá»±c hiá»‡n cáº¥p sá»‘ chá»©ng tá»« |  |
| ERR:15 | Lá»—i khi thá»±c hiá»‡n Deserialize chuá»—i chá»©ng tá»« Ä‘áº§u vÃ o |  |
| ERR:19 | Pattern truyá»n vÃ o khÃ´ng giá»‘ng vá»›i chá»©ng tá»« cáº§n Ä‘iá»u chá»‰nh |  |
| ERR:20 | Dáº£i chá»©ng tá»« háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| ERR:21 | TrÃ¹ng Fkey truyá»n vÃ o |  |
| ERR:29 | Lá»—i chá»©ng thÆ° háº¿t háº¡n |  |
| ERR:30 | Danh sÃ¡ch chá»©ng tá»« tá»“n táº¡i ngÃ y chá»©ng tá»« nhá» hÆ¡n ngÃ y chá»©ng tá»« Ä‘Ã£ phÃ¡t hÃ nh |  |
| ERR:60 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh chá»©ng tá»« cÃ¹ng loáº¡i (CÃ³ mÃ£ / KhÃ´ng mÃ£). |  |
| ERR:61 | Chá»‰ Ä‘Æ°á»£c phÃ©p Ä‘iá»u chá»‰nh chá»©ng tá»« cÃ¹ng loáº¡i (HD GTGT / HD bÃ¡n hÃ ng...). |  |
| ERR:62 | KhÃ´ng Ä‘Æ°á»£c dÃ¹ng khÃ´ng mÃ£ Ä‘Äƒng kÃ½ gá»­i báº£ng tá»•ng há»£p thay tháº¿, Ä‘iá»u chá»‰nh cÃ¡c chá»©ng tá»« khÃ´ng mÃ£ gá»­i thÃ´ng tin chi tiáº¿t. |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK: CTT56/001;AA/2022;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh chá»©ng tá»« thay tháº¿PatterğŸ¡ª Máº«u sá»‘ cá»§a chá»©ng tá»« thay tháº¿Serial ğŸ¡ª serial cá»§a chá»©ng tá»« thay tháº¿invNumber: sá»‘ chá»©ng tá»« thay tháº¿ |  |

**Cáº¥u trÃºc cá»§a xmlInvData trÆ°á»ng há»£p khÃ´ng cÃ³ trÆ°á»ng má»Ÿ rá»™ng (cÃ¡c trÆ°á»ng \* lÃ  báº¯t buá»™c):**

<ThayTheCT>

<key>**fkey chá»©ng tá»«** </key>

<TTChung>

<NLap>ngÃ y láº­p chá»©ng tá»« </NLap>

</TTChung>

<NDCTu>

<NNT>

<Ten>TÃªn \*</Ten>

<MST>MÃ£ sá»‘ thuáº¿ (Báº¯t buá»™c náº¿u cÃ³)</MST>

<DChi>Äá»‹a chá»‰ \*</DChi>

<QTich>Quá»‘c tá»‹ch(VN)</QTich>

<CNCTru>MÃ£ cÃ¡ nhÃ¢n cÆ° trÃº</CNCTru>

< CMND >chá»©ng minh thÆ° hoáº·c cÄƒn cÆ°á»›c cÃ´ng dÃ¢n</ CMND >

<DCTDTu>Äá»‹a chá»‰ thÆ° Ä‘iá»‡n tá»­ </DCTDTu>

< SDThoai >sá»‘ Ä‘iá»‡n thoáº¡i </ SDThoai >

< NCCMND >ngÃ y cáº¥p cmnd hoáº·c cccd</ NCCMND >

</NNT>

<TTNCNKTru>

<KTNhap>Khoáº£n thu nháº­p</KTNhap>

<TThang>Thá»i Ä‘iá»ƒm tráº£ thu nháº­p(thÃ¡ng)</ TThang>

<DThang>Thá»i Ä‘iá»ƒm tráº£ thu nháº­p(thÃ¡ng)</DThang>

<Nam> Thá»i Ä‘iá»ƒm tráº£ thu nháº­p(nÄƒm)</ Nam>

< TTNCThue> Â Tá»•ng thu nháº­p chÆ°a tÃ­nh thuáº¿</ TTNCThue >

< TTNTThue>tá»•ng thu nháº­p tÃ­nh thuáº¿</ TTNTThue >

< SThue>Tá»•ng thu nháº­p tÃ­nh thuáº¿\*</ SThue >

<Bhiem>Khoáº£n Ä‘Ã³ng báº£o hiá»ƒm báº¯t buá»™c</Bhiem>

</TTNCNKTru>

</ NDCTu>

</ThayTheCT>

### Láº¥y giÃ¡ trá»‹ Hash thay tháº¿ chá»©ng tá»« sá»­ dá»¥ng token(buoc 1)

URL

string **getHashCTTTokenReplace** (string Account, string ACpass, string xmlInvData, string username, string password, string serialCert, int type, string invToken, string pattern = "", string serial = "", int convert = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh chá»©ng tá»« vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng token, thá»±c hiá»‡n truyá»n dá»¯ liá»‡u chá»©ng tá»« vÃ  láº¥y giÃ¡ trá»‹ hash value Ä‘á»ƒ kÃ½ sá»‘ báº±ng token á»Ÿ client.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh chá»©ng tá»«
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml chá»©ng tá»« (theo máº«u mÃ´ táº£ kÃ¨m theo)
*   **serialCert**: Serial cá»§a chá»©ng thÆ° sá»‘ cÃ´ng ty Ä‘Ã£ Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng
*   **type**: phÃ¡t hÃ nh má»›i: 0, thay tháº¿ = 1
*   **invToken**: chuá»—i token chá»©ng tá»« = máº«u sá»‘;kÃ½ hiá»‡u;sá»‘ chá»©ng tá»« (vÃ­ dá»¥: CTT56/001;AA/2022;1) â€“ chá»‰ cáº§n khi thay tháº¿/ Ä‘iá»u chá»‰nh; phÃ¡t hÃ nh thÃ¬ Ä‘á»ƒ trá»‘ng
*   **pattern**: máº«u sá»‘ chá»©ng tá»«
*   **serial**: kÃ½ hiá»‡u chá»©ng tá»«

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | Dáº£i chá»©ng tá»« háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  Serial khÃ´ng phÃ¹ há»£p |  |
| ERR:6 | KhÃ´ng cÃ²n Ä‘á»§ sá»‘ lÆ°á»£ng chá»©ng tá»« Ä‘á»ƒ phÃ¡t hÃ nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ chá»©ng tá»« vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng tá»‘i Ä‘a cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i chá»©ng tá»« cÃ³ lá»—i |  |
| ERR:35 | CÃ´ng ty Ä‘Äƒng kÃ½ DK01 cáº£ cÃ³ mÃ£, khÃ´ng mÃ£. Táº¡o cáº£ kÃ½ hiá»‡u cáº£ 2 dáº£i cÃ³ mÃ£ vÃ  khÃ´ng mÃ£ sáº½ yÃªu cáº§u báº¯t buá»™c truyá»n pattern, serial |  |
| Chuá»—i xml tráº£ vá» | Chuá»—i tráº£ vá» |  |

Cáº¥u trÃºc chuá»—i XML tráº£ vá»:

<Invoices>

<Inv>

<key>**123**</key>

<idInv>**128668**</idInv>

<hashValue>**rKdYgeYc7CYLOhjfNFDZ8nBaWjA=**</hashValue>

<pattern>**CTT56/001**</pattern>

<serial>**AA/2022**</serial>

</Inv>

<Inv>

<key>**456**</key>

<idInv>**128923**</idInv>

<hashValue>**2p60p82YQhqjMHG9t/toIaLfENQ=**</hashValue>

<pattern>**CTT56/001**</pattern>

<serial>**AA/2022**</serial>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <key>: fkey

tag <idInv>: id chá»©ng tá»« trÃªn há»‡ thá»‘ng vnpt

tag <hashValue>: chuá»—i hash

tag <pattern>: máº«u sá»‘

tag <serial>: kÃ½ hiá»‡u

### Gá»­i thay tháº¿ chá»©ng tá»« sá»­ dá»¥ng token(bÆ°á»›c 2)

string **AdjustReplaceCTTToken** (string Account, string ACpass, string xmlInvData, string username, string password, int type, string pattern = "", string serial = "")

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p gá»­i thÃ´ng tin thay tháº¿ chá»©ng tá»« vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng token, sau khi thá»±c hiá»‡n gá»i hÃ m Láº¥y giÃ¡ trá»‹ Hash á»Ÿ bÆ°á»›c 1 (**4.2.2**)

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh gá»­i thÃ´ng Ä‘iá»‡p.
*   **username/password**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml dá»¯ liá»‡u kÃ½ hash.
*   **pattern**: Máº«u sá»‘
*   **serial**: KÃ½ hiá»‡u
*   **type :** thay tháº¿ = 1

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y dáº£i chá»©ng tá»« | KhÃ´ng tÃ¬m tháº¥y dáº£i chá»©ng tá»« hoáº·c tÃ i khoáº£n phÃ¡t hÃ nh khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh chá»©ng tá»« trÃªn dáº£i chá»©ng tá»« truyá»n lÃªn. |
| ERR:8 | Chá»©ng tá»« Ä‘iá»u chá»‰nh hoáº·c thay tháº¿ chÆ°a phÃ¡t hÃ nh hoáº·c Ä‘Ã£ Ä‘iá»u chá»‰nh khÃ´ng Ä‘Æ°á»£c thay tháº¿ |  |
| ERR:2 | KhÃ´ng tá»“n táº¡i chá»©ng tá»« cáº§n thay tháº¿ vÃ  Ä‘iá»u chá»‰nh |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i chá»©ng tá»« cÃ³ lá»—i |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK:01GTKT3/001;AA/12E;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh chá»©ng tá»« thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a chá»©ng tá»« Ä‘iá»u chá»‰nh,thay tháº¿Serial ğŸ¡ª serial cá»§a chá»©ng tá»« Ä‘iá»u chá»‰nh,thay tháº¿invNumber: sá»‘ chá»©ng tá»« Ä‘iá»u chá»‰nh,thay tháº¿ |  |

**Cáº¥u trÃºc chuá»—i xmlData truyá»n lÃªn:**

<Invoices>

<SerialCert>54010101BFD227F36296CA2414AC334E</SerialCert>

<PatternOld>**CTT56**/003</PatternOld>

<SerialOld>AA/2022</SerialOld>

<NoOlde>00000001</NoOlde>

<Inv>

<key>25904521-A4FB-4A43-BEF8-8455D64A0429</key>

<idInv>20043083</idInv>

<signValue>EKkR0sNI67yHpuvLKWFdVg1jg4Rkm3gSZZAj0m+t/T0O/RGpg2wjItTxBLmZgoUU08szexYTzZQX+x37IExQTtd27XE5D0APA08jjXe/MG+uVRSFoPxf5H9pgwcwlIWVusZhTpLZrTkEhr2fEg+haW9fKuizKI+mur6NlndpJWE=</signValue>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <SerialCert>: serial chá»©ng thÆ° cá»§a cÃ´ng ty

*   *   *   tag < PatternOld >: Máº«u sá»‘ cá»§a chá»©ng tá»« Ä‘iá»u chá»‰nh,thay tháº¿ cÅ©

tag< SerialOld >: chá»©ng tá»« Ä‘iá»u chá»‰nh,thay tháº¿ cÅ©

tag< NoOlde> : sá»‘ chá»©ng tá»« cÅ©

tag <idInv>: id chá»©ng tá»« trÃªn há»‡ thá»‘ng vnpt

tag <signValue>: chuá»—i kÃ½

tag <key>: fkey

### Láº¥y giÃ¡ trá»‹ Hash thay tháº¿ chá»©ng tá»« sá»­ dá»¥ng smartCA(bÆ°á»›c 1)

URL

string **GetHashCTTSmartCAReplace** (string Account, string ACpass, string xmlInvData, string username, string password, string serialCert, int type, string invToken, string pattern = "", string serial = "", int convert = 0)

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p phÃ¡t hÃ nh chá»©ng tá»« vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng smartCA, thá»±c hiá»‡n truyá»n dá»¯ liá»‡u chá»©ng tá»« vÃ  láº¥y giÃ¡ trá»‹ hash value Ä‘á»ƒ kÃ½ sá»‘ báº±ng smartCA á»Ÿ client.

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh chá»©ng tá»«
*   **Username/pass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml chá»©ng tá»« (theo máº«u mÃ´ táº£ kÃ¨m theo)
*   **serialCert**: Serial cá»§a chá»©ng thÆ° sá»‘ cÃ´ng ty Ä‘Ã£ Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng
*   **type**: phÃ¡t hÃ nh má»›i: 0, thay tháº¿ = 1,
*   **invToken**: chuá»—i token chá»©ng tá»« = máº«u sá»‘;kÃ½ hiá»‡u;sá»‘ chá»©ng tá»« (vÃ­ dá»¥: CTT56/001;AA/2022;1) â€“ chá»‰ cáº§n khi thay tháº¿/ Ä‘iá»u chá»‰nh; phÃ¡t hÃ nh thÃ¬ Ä‘á»ƒ trá»‘ng
*   **pattern**: máº«u sá»‘ chá»©ng tá»«
*   **serial**: kÃ½ hiá»‡u chá»©ng tá»«

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | Dáº£i chá»©ng tá»« háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  Serial khÃ´ng phÃ¹ há»£p |  |
| ERR:6 | KhÃ´ng cÃ²n Ä‘á»§ sá»‘ lÆ°á»£ng chá»©ng tá»« Ä‘á»ƒ phÃ¡t hÃ nh |  |
| ERR:10 | LÃ´ cÃ³ sá»‘ chá»©ng tá»« vÆ°á»£t quÃ¡ sá»‘ lÆ°á»£ng tá»‘i Ä‘a cho phÃ©p |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i chá»©ng tá»« cÃ³ lá»—i |  |
| ERR:35 | CÃ´ng ty Ä‘Äƒng kÃ½ DK01 cáº£ cÃ³ mÃ£, khÃ´ng mÃ£. Táº¡o cáº£ kÃ½ hiá»‡u cáº£ 2 dáº£i cÃ³ mÃ£ vÃ  khÃ´ng mÃ£ sáº½ yÃªu cáº§u báº¯t buá»™c truyá»n pattern, serial |  |
| Chuá»—i xml tráº£ vá» | Chuá»—i tráº£ vá» |  |

Cáº¥u trÃºc chuá»—i XML tráº£ vá»:

<Invoices>

<Inv>

<key>**123**</key>

<idInv>**128668**</idInv>

<hashValue>**rKdYgeYc7CYLOhjfNFDZ8nBaWjA=**</hashValue>

<pattern>**CTT56/001**</pattern>

<serial>**AA/2022**</serial>

</Inv>

<Inv>

<key>**456**</key>

<idInv>**128923**</idInv>

<hashValue>**2p60p82YQhqjMHG9t/toIaLfENQ=**</hashValue>

<pattern>**CTT56/001**</pattern>

<serial>**AA/2022**</serial>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <key>: fkey

tag <idInv>: id chá»©ng tá»« trÃªn há»‡ thá»‘ng vnpt

tag <hashValue>: chuá»—i hash

tag <pattern>: máº«u sá»‘

tag <serial>: kÃ½ hiá»‡u

### Gá»­i thay tháº¿ chá»©ng tá»« sá»­ dá»¥ng smartCA(bÆ°á»›c 2)

**url**

string **AdjustReplaceCTTSmartCA (**string Account, string ACpass, string xmlInvData, string username, string password,int type, string pattern = "", string serial = ""**)**

DESCRIPTION

ÄÃ¢y lÃ  web service cho phÃ©p gá»­i thÃ´ng tin thay tháº¿ chá»©ng tá»« vá»›i cÃ¡c há»‡ thá»‘ng sá»­ dá»¥ng token, sau khi thá»±c hiá»‡n gá»i hÃ m Láº¥y giÃ¡ trá»‹ Hash á»Ÿ bÆ°á»›c 1 (**4.2.4**)

HTTP METHOD

POST

REQUEST BODY

*   **Account/ACPass:** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh gá»­i thÃ´ng Ä‘iá»‡p.
*   **username/password**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **xmlInvData**: chuá»—i xml dá»¯ liá»‡u kÃ½ hash.
*   **pattern**: Máº«u sá»‘
*   **serial**: KÃ½ hiá»‡u
*   **type = 1 máº·c Ä‘á»‹nh thay tháº¿**

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:21 | KhÃ´ng tÃ¬m tháº¥y cÃ´ng ty hoáº·c tÃ i khoáº£n khÃ´ng tá»“n táº¡i |  |
| ERR:22 | CÃ´ng ty chÆ°a Ä‘Äƒng kÃ½ chá»©ng thÆ° sá»‘ |  |
| ERR:28 | ChÆ°a cÃ³ thÃ´ng tin chá»©ng thÆ° trong há»‡ thá»‘ng |  |
| ERR:24 | Chá»©ng thÆ° truyá»n lÃªn khÃ´ng Ä‘Ãºng vá»›i chá»©ng thÆ° Ä‘Äƒng kÃ½ trong há»‡ thá»‘ng |  |
| ERR:27 | Chá»©ng thÆ° chÆ°a Ä‘áº¿n thá»i Ä‘iá»ƒm sá»­ dá»¥ng |  |
| ERR:26 | Chá»©ng thÆ° sá»‘ háº¿t háº¡n |  |
| ERR:3 | Dá»¯ liá»‡u xml Ä‘áº§u vÃ o khÃ´ng Ä‘Ãºng quy Ä‘á»‹nh |  |
| ERR:20 | KhÃ´ng tÃ¬m tháº¥y dáº£i chá»©ng tá»« | KhÃ´ng tÃ¬m tháº¥y dáº£i chá»©ng tá»« hoáº·c tÃ i khoáº£n phÃ¡t hÃ nh khÃ´ng cÃ³ quyá»n phÃ¡t hÃ nh chá»©ng tá»« trÃªn dáº£i chá»©ng tá»« truyá»n lÃªn. |
| ERR:8 | Chá»©ng tá»« Ä‘iá»u chá»‰nh hoáº·c thay tháº¿ chÆ°a phÃ¡t hÃ nh hoáº·c Ä‘Ã£ Ä‘iá»u chá»‰nh khÃ´ng Ä‘Æ°á»£c thay tháº¿ |  |
| ERR:2 | KhÃ´ng tá»“n táº¡i chá»©ng tá»« cáº§n thay tháº¿ vÃ  Ä‘iá»u chá»‰nh |  |
| ERR:5 | CÃ³ lá»—i xáº£y ra | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |
| ERR:30 | Táº¡o má»›i chá»©ng tá»« cÃ³ lá»—i |  |
| OK: pattern;serial;invNumber(VÃ­ dá»¥:OK: CTT56/001;AA/2022;0000002) | OK ğŸ¡ª Ä‘Ã£ phÃ¡t hÃ nh chá»©ng tá»« thÃ nh cÃ´ngPatterğŸ¡ª Máº«u sá»‘ cá»§a chá»©ng tá»« Ä‘iá»u chá»‰nh,thay tháº¿Serial ğŸ¡ª serial cá»§a chá»©ng tá»« Ä‘iá»u chá»‰nh,thay tháº¿invNumber: sá»‘ chá»©ng tá»« Ä‘iá»u chá»‰nh,thay tháº¿ |  |

**Cáº¥u trÃºc chuá»—i xmlData truyá»n lÃªn:**

<Invoices>

<SerialCert>54010101BFD227F36296CA2414AC334E</SerialCert>

<PatternOld>CTT56/003</PatternOld>

<SerialOld>AA/2022</SerialOld>

<NoOlde>00000001</NoOlde>

<Inv>

<key>25904521-A4FB-4A43-BEF8-8455D64A0429</key>

<idInv>20043083</idInv>

<signValue>EKkR0sNI67yHpuvLKWFdVg1jg4Rkm3gSZZAj0m+t/T0O/RGpg2wjItTxBLmZgoUU08szexYTzZQX+x37IExQTtd27XE5D0APA08jjXe/MG+uVRSFoPxf5H9pgwcwlIWVusZhTpLZrTkEhr2fEg+haW9fKuizKI+mur6NlndpJWE=</signValue>

</Inv>

</Invoices>

Trong Ä‘Ã³: tag <SerialCert>: serial chá»©ng thÆ° cá»§a cÃ´ng ty

*   *   *   tag < PatternOld >: Máº«u sá»‘ cá»§a chá»©ng tá»« Ä‘iá»u chá»‰nh,thay tháº¿ cÅ©

tag< SerialOld >: chá»©ng tá»« Ä‘iá»u chá»‰nh,thay tháº¿ cÅ©

tag< NoOlde> : sá»‘ chá»©ng tá»« cÅ©

## Há»§y chá»©ng tá»«

URL

string **cancelInvCTT**(string Account, string ACpass, string Fkey, string functionName, string userName, string userPass,string note = null)

DESCRIPTION

ÄÃ¢y lÃ  web service thá»±c hiá»‡n há»§y chá»©ng tá»« theo giÃ¡ trá»‹ fkey truyá»n vÃ o

HTTP METHOD

POST

REQUEST BODY

*   **userName /** **userPass**: TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho khÃ¡ch hÃ ng Ä‘á»ƒ gá»i Ä‘áº¿n webservice (tÃ i khoáº£n cÃ³ quyá»n ServiceRole trong há»‡ thá»‘ng).
*   **Account/ACPass :** TÃ i khoáº£n Ä‘Æ°á»£c cáº¥p phÃ¡t cho nhÃ¢n viÃªn gá»i lá»‡nh phÃ¡t hÃ nh chá»©ng tá»«
*   **fkey:**Chuá»—i xÃ¡c Ä‘á»‹nh chá»©ng tá»« cáº§n há»§y
*   **functionName: CancelInv há»§y khÃ´ng kÃ½ biÃªn báº£n ,** cancelInvSignFile: há»§y táº¡o file biÃªn báº£n
*   **Note : ghi chÃº biÃªn báº£n**

RETURNS

| Káº¿t quáº£ | MÃ´ táº£ | Ghi chÃº |
| --- | --- | --- |
| ERR:1 | TÃ i khoáº£n Ä‘Äƒng nháº­p sai hoáº·c khÃ´ng cÃ³ quyá»n |  |
| ERR:2 | KhÃ´ng tÃ¬m tháº¥y chá»©ng tá»« |  |
| ERR:6 | Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |  |
| ERR:7 | KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin cÃ´ng ty tÆ°Æ¡ng á»©ng, hoáº·c lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh |  |
| ERR:8 | Chá»©ng tá»« Ä‘Ã£ bá»‹ Ä‘iá»u chá»‰nh / há»§y / chá»©ng tá»« má»›i táº¡o khÃ´ng thá»ƒ há»§y Ä‘Æ°á»£c |  |
| ERR:9 | Chá»©ng tá»« Ä‘Ã£ thanh toÃ¡n, khÃ´ng cho phÃ©p há»§y |  |
| ERR:20 | Dáº£i chá»©ng tá»« háº¿t, User/Account khÃ´ng cÃ³ quyá»n vá»›i Serial/Pattern vÃ  serial khÃ´ng phÃ¹ há»£p |  |
| OK: | Há»§y chá»©ng tá»« thÃ nh cÃ´ng |  |