# TÃ­nh nÄƒng Äiá»n nhanh Danh sÃ¡ch MÃ£ sá»‘ BHXH

## Tá»•ng quan
ÄÃ£ thÃªm tÃ­nh nÄƒng Ä‘iá»n nhanh danh sÃ¡ch mÃ£ sá»‘ BHXH vÃ o QuickFillModal, cho phÃ©p ngÆ°á»i dÃ¹ng nháº­p nhiá»u mÃ£ BHXH cÃ¹ng lÃºc (má»—i dÃ²ng má»™t mÃ£) vÃ  tá»± Ä‘á»™ng phÃ¢n bá»• cho cÃ¡c ngÆ°á»i tham gia theo thá»© tá»±.

## TÃ­nh nÄƒng má»›i

### **Äiá»n nhanh Danh sÃ¡ch MÃ£ BHXH**
- Nháº­p nhiá»u mÃ£ BHXH cÃ¹ng lÃºc (má»—i dÃ²ng má»™t mÃ£)
- Tá»± Ä‘á»™ng phÃ¢n bá»• mÃ£ BHXH theo thá»© tá»± cho ngÆ°á»i tham gia
- Validation tá»± Ä‘á»™ng: chá»‰ cho phÃ©p sá»‘, tá»‘i thiá»ƒu 8 kÃ½ tá»±, tá»‘i Ä‘a 10 kÃ½ tá»±
- Preview sá»‘ lÆ°á»£ng mÃ£ BHXH há»£p lá»‡ Ä‘Æ°á»£c phÃ¡t hiá»‡n
- Scrollable textarea vá»›i giá»›i háº¡n chiá»u cao

## CÃ¡ch sá»­ dá»¥ng

### BÆ°á»›c 1: Má»Ÿ Äiá»n nhanh dá»¯ liá»‡u
1. Trong báº£ng danh sÃ¡ch ngÆ°á»i tham gia, click nÃºt **"Äiá»n nhanh"** (âš¡)
2. Modal "Äiá»n nhanh dá»¯ liá»‡u" sáº½ hiá»ƒn thá»‹

### BÆ°á»›c 2: Chá»n trÆ°á»ng MÃ£ sá»‘ BHXH
1. Trong pháº§n "Chá»n trÆ°á»ng cáº§n Ä‘iá»n", click vÃ o **"MÃ£ sá»‘ BHXH"** (icon #)
2. Giao diá»‡n sáº½ hiá»ƒn thá»‹ cháº¿ Ä‘á»™ Ä‘iá»n mÃ£ BHXH

### BÆ°á»›c 3: Chá»n cháº¿ Ä‘á»™ Danh sÃ¡ch mÃ£
1. Trong pháº§n "Cháº¿ Ä‘á»™ Ä‘iá»n mÃ£ BHXH", click vÃ o **"Danh sÃ¡ch mÃ£"** (icon ðŸ“‹)
2. Giao diá»‡n sáº½ chuyá»ƒn sang textarea Ä‘á»ƒ nháº­p nhiá»u mÃ£

### BÆ°á»›c 4: Nháº­p danh sÃ¡ch mÃ£ BHXH
1. Nháº­p danh sÃ¡ch mÃ£ BHXH vÃ o textarea (má»—i dÃ²ng má»™t mÃ£)
2. Há»‡ thá»‘ng tá»± Ä‘á»™ng validate vÃ  hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng mÃ£ há»£p lá»‡
3. Preview hiá»ƒn thá»‹ cÃ¡c mÃ£ Ä‘Ã£ Ä‘Æ°á»£c phÃ¡t hiá»‡n

### BÆ°á»›c 5: Chá»n pháº¡m vi Ã¡p dá»¥ng
1. **Táº¥t cáº£ ngÆ°á»i tham gia**: Ãp dá»¥ng theo thá»© tá»± tá»« ngÆ°á»i Ä‘áº§u tiÃªn
2. **Chá»‰ ngÆ°á»i chÆ°a cÃ³ thÃ´ng tin**: Chá»‰ Ä‘iá»n cho ngÆ°á»i chÆ°a cÃ³ mÃ£ BHXH
3. **Chá»‰ nhá»¯ng ngÆ°á»i Ä‘Æ°á»£c chá»n**: Ãp dá»¥ng cho nhá»¯ng ngÆ°á»i Ä‘Æ°á»£c chá»n cá»¥ thá»ƒ

### BÆ°á»›c 6: Ãp dá»¥ng
1. Click **"Äiá»n X mÃ£ BHXH"** (X lÃ  sá»‘ lÆ°á»£ng mÃ£ há»£p lá»‡)
2. MÃ£ BHXH sáº½ Ä‘Æ°á»£c phÃ¢n bá»• theo thá»© tá»±

## Giao diá»‡n ngÆ°á»i dÃ¹ng

### Cháº¿ Ä‘á»™ selection
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [#] MÃ£ Ä‘Æ¡n láº»        [ðŸ“‹] Danh sÃ¡ch mÃ£  â”‚
â”‚     Äiá»n cÃ¹ng má»™t mÃ£      Nhiá»u mÃ£ khÃ¡c â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Textarea input
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nháº­p danh sÃ¡ch mÃ£ sá»‘ BHXH               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 8923487321                      [ðŸ“‹]â”‚ â”‚
â”‚ â”‚ 8922622809                          â”‚ â”‚
â”‚ â”‚ 8923468288                          â”‚ â”‚
â”‚ â”‚ 8923406406                          â”‚ â”‚
â”‚ â”‚ 8923440017                          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ ðŸ’¡ Má»—i dÃ²ng má»™t mÃ£ BHXH, sáº½ Ä‘Æ°á»£c phÃ¢n bá»•â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ðŸ“‹ ÄÃ£ phÃ¡t hiá»‡n 5 mÃ£ BHXH há»£p lá»‡    â”‚ â”‚
â”‚ â”‚ 8923487321, 8922622809, 8923468288  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Validation vÃ  Quy táº¯c

### Input Validation
- **Chá»‰ cho phÃ©p sá»‘**: Tá»± Ä‘á»™ng loáº¡i bá» kÃ½ tá»± khÃ´ng pháº£i sá»‘
- **Tá»‘i thiá»ƒu 8 kÃ½ tá»±**: MÃ£ BHXH pháº£i cÃ³ Ã­t nháº¥t 8 sá»‘
- **Tá»‘i Ä‘a 10 kÃ½ tá»±**: Giá»›i háº¡n Ä‘á»™ dÃ i theo quy Ä‘á»‹nh BHXH
- **Má»—i dÃ²ng má»™t mÃ£**: TÃ¡ch mÃ£ theo dÃ²ng má»›i

### Quy táº¯c phÃ¢n bá»•
- **Theo thá»© tá»±**: MÃ£ Ä‘áº§u tiÃªn â†’ NgÆ°á»i Ä‘áº§u tiÃªn Ä‘Æ°á»£c chá»n
- **Giá»›i háº¡n sá»‘ lÆ°á»£ng**: Chá»‰ phÃ¢n bá»• tá»‘i Ä‘a sá»‘ mÃ£ cÃ³ sáºµn
- **Æ¯u tiÃªn ngÆ°á»i tham gia**: Náº¿u cÃ³ nhiá»u mÃ£ hÆ¡n ngÆ°á»i, chá»‰ dÃ¹ng sá»‘ mÃ£ cáº§n thiáº¿t

## VÃ­ dá»¥ sá»­ dá»¥ng

### VÃ­ dá»¥ 1: Äiá»n cho táº¥t cáº£ (5 ngÆ°á»i, 3 mÃ£)
**Input:**
```
8923487321
8922622809
8923468288
```
**Káº¿t quáº£:**
- NgÆ°á»i 1 â†’ maSoBHXH: "8923487321"
- NgÆ°á»i 2 â†’ maSoBHXH: "8922622809"
- NgÆ°á»i 3 â†’ maSoBHXH: "8923468288"
- NgÆ°á»i 4, 5 â†’ khÃ´ng thay Ä‘á»•i

### VÃ­ dá»¥ 2: Äiá»n cho ngÆ°á»i Ä‘Æ°á»£c chá»n (chá»n ngÆ°á»i 2, 4, 6)
**Input:** 3 mÃ£ BHXH, chá»n ngÆ°á»i 2, 4, 6
**Káº¿t quáº£:**
- NgÆ°á»i 2 â†’ maSoBHXH: mÃ£ Ä‘áº§u tiÃªn
- NgÆ°á»i 4 â†’ maSoBHXH: mÃ£ thá»© hai
- NgÆ°á»i 6 â†’ maSoBHXH: mÃ£ thá»© ba

### VÃ­ dá»¥ 3: Validation input
**Input:**
```
abc8923487321def
8922622809
invalid
8923468288xyz
```
**Káº¿t quáº£:** 3 mÃ£ há»£p lá»‡: "8923487321", "8922622809", "8923468288"

## Modal Layout Improvements

### Responsive Design
- **Fixed Header**: Header luÃ´n hiá»ƒn thá»‹ á»Ÿ trÃªn
- **Scrollable Content**: Ná»™i dung cÃ³ thá»ƒ cuá»™n khi quÃ¡ dÃ i
- **Fixed Footer**: NÃºt báº¥m luÃ´n hiá»ƒn thá»‹ á»Ÿ dÆ°á»›i
- **Max Height**: Modal tá»‘i Ä‘a 90% viewport height

### Textarea Enhancements
- **Scrollable**: CÃ³ thanh cuá»™n khi ná»™i dung dÃ i
- **Resizable**: CÃ³ thá»ƒ resize theo chiá»u dá»c
- **Min/Max Height**: Giá»›i háº¡n chiá»u cao 100px - 150px
- **Auto-focus**: Tá»± Ä‘á»™ng focus khi chuyá»ƒn sang bulk mode

## Technical Implementation

### Files Ä‘Ã£ thay Ä‘á»•i
1. **`QuickFillModal.tsx`**
   - ThÃªm `bhxhMode` state (single/bulk)
   - ThÃªm `bhxhBulkInput` state
   - ThÃªm `parseBulkBhxhInput` function
   - Cáº£i thiá»‡n modal layout (fixed header/footer)
   - ThÃªm bulk BHXH UI components

2. **`KeKhai603ParticipantTable.tsx`** (REMOVED)
   - Component Ä‘Ã£ bá»‹ xÃ³a khá»i codebase

### Key Functions
```typescript
// Parse bulk BHXH input
const parseBulkBhxhInput = (input: string): string[] => {
  const lines = input.split('\n').map(line => line.trim()).filter(line => line);
  const validCodes: string[] = [];
  
  for (const line of lines) {
    const cleanCode = line.replace(/\D/g, '').slice(0, 10);
    if (cleanCode.length >= 8) {
      validCodes.push(cleanCode);
    }
  }
  
  return validCodes;
};

// Handle bulk BHXH fill
const handleQuickFillBulkBHXH = (bhxhCodes: string[], selectedIndices?: number[]) => {
  const indicesToUpdate = selectedIndices || Array.from({ length: participants.length }, (_, i) => i);
  const maxUpdates = Math.min(bhxhCodes.length, indicesToUpdate.length);
  
  for (let i = 0; i < maxUpdates; i++) {
    const participantIndex = indicesToUpdate[i];
    const bhxhCode = bhxhCodes[i];
    
    if (participantIndex < participants.length && bhxhCode) {
      handleParticipantChange(participantIndex, 'maSoBHXH', bhxhCode);
    }
  }
};
```

## Lá»£i Ã­ch

### Hiá»‡u quáº£
- Äiá»n nhiá»u mÃ£ BHXH cÃ¹ng lÃºc thay vÃ¬ tá»«ng mÃ£ má»™t
- Tá»± Ä‘á»™ng phÃ¢n bá»• theo thá»© tá»±, khÃ´ng cáº§n chá»n thá»§ cÃ´ng
- Copy-paste trá»±c tiáº¿p tá»« Excel hoáº·c file text

### ChÃ­nh xÃ¡c
- Validation tá»± Ä‘á»™ng Ä‘áº£m báº£o format Ä‘Ãºng
- Preview trÆ°á»›c khi Ã¡p dá»¥ng
- KhÃ´ng ghi Ä‘Ã¨ náº¿u chá»n "chá»‰ ngÆ°á»i chÆ°a cÃ³ thÃ´ng tin"

### Linh hoáº¡t
- Há»— trá»£ cáº£ single vÃ  bulk mode
- Ãp dá»¥ng cho táº¥t cáº£, ngÆ°á»i Ä‘Æ°á»£c chá»n, hoáº·c ngÆ°á»i chÆ°a cÃ³ thÃ´ng tin
- Responsive design phÃ¹ há»£p má»i kÃ­ch thÆ°á»›c mÃ n hÃ¬nh

## TÃ­ch há»£p vá»›i workflow

### Vá»›i tÃ­nh nÄƒng hiá»‡n cÃ³
- âœ… TÆ°Æ¡ng thÃ­ch vá»›i "Äiá»n nhanh STT há»™"
- âœ… TÆ°Æ¡ng thÃ­ch vá»›i "Äiá»n nhanh Sá»‘ thÃ¡ng Ä‘Ã³ng"
- âœ… Hoáº¡t Ä‘á»™ng vá»›i "Nháº­p há»™ gia Ä‘Ã¬nh"
- âœ… TÃ­ch há»£p vá»›i BHXH API lookup

### Workflow Ä‘á» xuáº¥t
1. **Bulk BHXH**: Äiá»n danh sÃ¡ch mÃ£ BHXH
2. **API Lookup**: Enter Ä‘á»ƒ tra cá»©u thÃ´ng tin tá»«ng mÃ£
3. **STT há»™**: Äiá»n nhanh STT há»™ tá»± Ä‘á»™ng tÄƒng dáº§n
4. **Sá»‘ thÃ¡ng**: Äiá»n nhanh sá»‘ thÃ¡ng Ä‘Ã³ng

## Testing

### Manual Testing
1. Má»Ÿ modal Ä‘iá»n nhanh
2. Chá»n "MÃ£ sá»‘ BHXH" â†’ "Danh sÃ¡ch mÃ£"
3. Nháº­p danh sÃ¡ch mÃ£ BHXH vá»›i format khÃ¡c nhau
4. Verify validation vÃ  preview
5. Test vá»›i cÃ¡c pháº¡m vi Ã¡p dá»¥ng khÃ¡c nhau
6. Verify modal scrolling vÃ  responsive

### Edge Cases
- Textarea rá»—ng
- Chá»‰ cÃ³ mÃ£ khÃ´ng há»£p lá»‡
- Nhiá»u mÃ£ hÆ¡n sá»‘ ngÆ°á»i tham gia
- Ãt mÃ£ hÆ¡n sá»‘ ngÆ°á»i tham gia
- Modal quÃ¡ cao (test scrolling)

TÃ­nh nÄƒng **"Äiá»n nhanh Danh sÃ¡ch MÃ£ sá»‘ BHXH"** Ä‘Ã£ sáºµn sÃ ng sá»­ dá»¥ng vá»›i UI responsive vÃ  user-friendly! ðŸŽ‰
